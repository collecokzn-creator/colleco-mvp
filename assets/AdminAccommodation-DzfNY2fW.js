import{r as o,u as j,j as e}from"./index-BCXrhMbA.js";function y(){const[c,i]=o.useState(null),[l,d]=o.useState(null),[a,n]=o.useState({}),m=j();async function h(){const t=await fetch("/api/accommodation/admin");if(!t.ok){if(t.status===401)return m("/login");const r=await t.text();throw new Error(r)}const s=await t.json();i(s.inventory),d(s.holds||{})}o.useEffect(()=>{h().catch(t=>console.error(t))},[]);async function p(){const s=await fetch("/api/accommodation/inventory",{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({roomTypes:a})});if(!s.ok){const u=await s.text();alert("Save failed: "+u);return}const r=await s.json();i(r.inventory),n({})}if(!c)return e.jsx("div",{className:"p-6",children:"Loading admin accommodationâ€¦"});const x=c.roomTypes||{};return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Accommodation Inventory"}),e.jsx("div",{className:"mb-4",children:e.jsxs("table",{className:"w-full border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"Room Type"}),e.jsx("th",{className:"p-2",children:"Total"}),e.jsx("th",{className:"p-2",children:"Price"})]})}),e.jsx("tbody",{children:Object.entries(x).map(([t,s])=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2 font-medium",children:t}),e.jsx("td",{className:"p-2",children:s.total}),e.jsx("td",{className:"p-2",children:s.price})]},t))})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Edit Room Types"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[e.jsx("input",{placeholder:"name",onChange:t=>n({...a,[t.target.value]:a[t.target.value]||{total:0,price:0}}),className:"border p-2"}),e.jsx("input",{placeholder:"total",type:"number",onChange:t=>{const s=Object.keys(a)[0];s&&(a[s]={...a[s]||{},total:Number(t.target.value||0)},n({...a}))},className:"border p-2"}),e.jsx("input",{placeholder:"price",type:"number",step:"0.01",onChange:t=>{const s=Object.keys(a)[0];s&&(a[s]={...a[s]||{},price:Number(t.target.value||0)},n({...a}))},className:"border p-2"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:p,className:"px-3 py-2 bg-brand-orange text-white rounded",children:"Save"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Active Holds"}),e.jsx("pre",{className:"mt-2 bg-gray-50 p-2 rounded text-sm overflow-auto",children:JSON.stringify(l,null,2)})]})]})}export{y as default};
