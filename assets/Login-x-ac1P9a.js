import{r as d,u as y,b as S,j as e}from"./index-BCXrhMbA.js";function L(){const[i,u]=d.useState("login"),[t,b]=d.useState(""),[n,m]=d.useState(""),[l,f]=d.useState(!1),[g,r]=d.useState(""),[x,a]=d.useState(""),w=y(),{user:c,setUser:h}=S();function p(s){return/\S+@\S+\.\S+/.test(s)}function j(s){if(s.preventDefault(),r(""),a(""),!p(t)){r("Please enter a valid email address.");return}if(!n){r("Please enter your password.");return}const o=JSON.parse(localStorage.getItem("user:"+t));if(!o||o.password!==n){r("Invalid email or password.");return}a("Login successful! Welcome, "+o.name+"."),h(o),setTimeout(()=>w("/profile"),600)}function N(s){if(s.preventDefault(),r(""),a(""),!p(t)){r("Please enter a valid email address.");return}if(!n||n.length<6){r("Password must be at least 6 characters.");return}if(localStorage.getItem("user:"+t)){r("An account with this email already exists.");return}const o={email:t,password:n,name:t.split("@")[0]};localStorage.setItem("user:"+t,JSON.stringify(o)),a("Registration successful! You can now log in.")}function v(){h(null),b(""),m(""),r(""),a("")}return c?e.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4 text-brand-orange",children:["Welcome, ",c.name,"!"]}),e.jsxs("div",{className:"bg-cream-sand p-6 border border-cream-border rounded mb-4",children:[e.jsxs("p",{className:"text-brand-russty mb-4",children:["You are logged in as ",e.jsx("span",{className:"font-semibold",children:c.email}),"."]}),e.jsx("button",{className:"px-4 py-2 rounded bg-brand-orange text-white font-semibold hover:bg-brand-orange/90 transition",onClick:v,children:"Logout"})]})]}):e.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-brand-orange",children:"Login / Register"}),e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx("button",{className:`px-4 py-2 rounded font-semibold transition ${i==="login"?"bg-brand-orange text-white":"bg-cream-sand text-brand-russty border border-cream-border"}`,onClick:()=>{u("login"),r(""),a("")},children:"Login"}),e.jsx("button",{className:`px-4 py-2 rounded font-semibold transition ${i==="register"?"bg-brand-orange text-white":"bg-cream-sand text-brand-russty border border-cream-border"}`,onClick:()=>{u("register"),r(""),a("")},children:"Register"})]}),e.jsxs("form",{className:"bg-cream-sand p-6 border border-cream-border rounded",onSubmit:i==="login"?j:N,children:[e.jsx("label",{className:"block mb-2 text-brand-russty font-semibold",children:"Email"}),e.jsx("input",{type:"email",className:"w-full mb-4 px-3 py-2 border border-cream-border rounded",value:t,onChange:s=>b(s.target.value),required:!0}),e.jsx("label",{className:"block mb-2 text-brand-russty font-semibold",children:"Password"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:l?"text":"password",className:"w-full px-3 py-2 border border-cream-border rounded pr-10",value:n,onChange:s=>m(s.target.value),required:!0,"aria-label":"Password"}),e.jsx("button",{type:"button",onClick:()=>f(s=>!s),"aria-label":l?"Hide password":"Show password","aria-pressed":l,className:"absolute inset-y-0 right-2 my-auto h-7 w-7 flex items-center justify-center rounded bg-cream border border-cream-border text-brand-russty hover:bg-cream-sand",title:l?"Hide":"Show",children:l?"🙈":"👁️"})]}),g&&e.jsx("div",{className:"mb-3 text-red-600 font-semibold",children:g}),x&&e.jsx("div",{className:"mb-3 text-green-700 font-semibold",children:x}),e.jsx("button",{type:"submit",className:"w-full px-4 py-2 rounded bg-brand-orange text-white font-semibold hover:bg-brand-orange/90 transition",children:i==="login"?"Login":"Register"})]})]})}export{L as default};
