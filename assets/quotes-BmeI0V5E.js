import{E as lt}from"./jspdf.es.min-C6ZdERfm.js";import{f as F}from"./currency-SRo7-frQ.js";function U(e,t,n,r,i){r=r||{};var o=1.15,s=i.internal.scaleFactor,f=i.internal.getFontSize()/s,h=i.getLineHeightFactor?i.getLineHeightFactor():o,a=f*h,l=/\r\n|\r|\n/g,u="",g=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(u=typeof e=="string"?e.split(l):e,g=u.length||1),n+=f*(2-o),r.valign==="middle"?n-=g/2*a:r.valign==="bottom"&&(n-=g*a),r.halign==="center"||r.halign==="right"){var d=f;if(r.halign==="center"&&(d*=.5),u&&g>=1){for(var p=0;p<u.length;p++)i.text(u[p],t-i.getStringUnitWidth(u[p])*d,n),n+=a;return i}t-=i.getStringUnitWidth(e)*d}return r.halign==="justify"?i.text(e,t,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(e,t,n),i}var O={},H=(function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=t:O=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,n){var r,i,o;n===void 0&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),f=s.fontStyle,h=s.fontName;if(t.font&&(h=t.font),t.fontStyle){f=t.fontStyle;var a=this.getFontList()[h];a&&a.indexOf(f)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(a[0]),f=a[0])}if(this.jsPDFDocument.setFont(h,f),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var l=e.unifyColor(t.fillColor);l&&(r=this.jsPDFDocument).setFillColor.apply(r,l),l=e.unifyColor(t.textColor),l&&(i=this.jsPDFDocument).setTextColor.apply(i,l),l=e.unifyColor(t.lineColor),l&&(o=this.jsPDFDocument).setDrawColor.apply(o,l),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,n,r){return this.jsPDFDocument.splitTextToSize(t,n,r)},e.prototype.rect=function(t,n,r,i,o){return this.jsPDFDocument.rect(t,n,r,i,o)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return O||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e})(),M=function(e,t){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},M(e,t)};function J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");M(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var G=(function(e){J(t,e);function t(n){var r=e.call(this)||this;return r._element=n,r}return t})(Array);function ut(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function gt(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function k(e,t,n){n.applyStyles(t,!0);var r=Array.isArray(e)?e:[e],i=r.map(function(o){return n.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return i}function X(e,t,n,r){var i=t.settings.tableLineWidth,o=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:o});var s=Z(i,!1);s&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),r.y-n.y,s)}function Z(e,t){var n=e>0,r=t||t===0;return n&&r?"DF":n?"S":r?"F":null}function z(e,t){var n,r,i,o;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(n=e.left)!==null&&n!==void 0?n:t,top:(r=e.top)!==null&&r!==void 0?r:t,right:(i=e.right)!==null&&i!==void 0?i:t,bottom:(o=e.bottom)!==null&&o!==void 0?o:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function V(e,t){var n=z(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function dt(e,t,n,r,i){var o={},s=1.3333333333333333,f=j(t,function(S){return i.getComputedStyle(S).backgroundColor});f!=null&&(o.fillColor=f);var h=j(t,function(S){return i.getComputedStyle(S).color});h!=null&&(o.textColor=h);var a=vt(r,n);a&&(o.cellPadding=a);var l="borderTopColor",u=s*n,g=r.borderTopWidth;if(r.borderBottomWidth===g&&r.borderRightWidth===g&&r.borderLeftWidth===g){var d=(parseFloat(g)||0)/u;d&&(o.lineWidth=d)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/u,right:(parseFloat(r.borderRightWidth)||0)/u,bottom:(parseFloat(r.borderBottomWidth)||0)/u,left:(parseFloat(r.borderLeftWidth)||0)/u},o.lineWidth.top||(o.lineWidth.right?l="borderRightColor":o.lineWidth.bottom?l="borderBottomColor":o.lineWidth.left&&(l="borderLeftColor"));var p=j(t,function(S){return i.getComputedStyle(S)[l]});p!=null&&(o.lineColor=p);var c=["left","right","center","justify"];c.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),c=["middle","bottom","top"],c.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var v=parseInt(r.fontSize||"");isNaN(v)||(o.fontSize=v/s);var m=pt(r);m&&(o.fontStyle=m);var w=(r.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(o.font=w),o}function pt(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function j(e,t){var n=tt(e,t);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function tt(e,t){var n=t(e);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?e.parentElement==null?null:tt(e.parentElement,t):n}function vt(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],r=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,o=n.map(function(f){return parseInt(f||"0")/r}),s=z(o,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function et(e,t,n,r,i){var o,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var f;typeof t=="string"?f=n.document.querySelector(t):f=t;var h=Object.keys(e.getFontList()),a=e.scaleFactor(),l=[],u=[],g=[];if(!f)return console.error("Html table could not be found with input: ",t),{head:l,body:u,foot:g};for(var d=0;d<f.rows.length;d++){var p=f.rows[d],c=(s=(o=p?.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),v=yt(h,a,n,p,r,i);v&&(c==="thead"?l.push(v):c==="tfoot"?g.push(v):u.push(v))}return{head:l,body:u,foot:g}}function yt(e,t,n,r,i,o){for(var s=new G(r),f=0;f<r.cells.length;f++){var h=r.cells[f],a=n.getComputedStyle(h);if(i||a.display!=="none"){var l=void 0;o&&(l=dt(e,h,t,a,n)),s.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:l,_element:h,content:ct(h)})}}var u=n.getComputedStyle(r);if(s.length>0&&(i||u.display!=="none"))return s}function ct(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),t.innerText||t.textContent||""}function mt(e,t,n){for(var r=0,i=[e,t,n];r<i.length;r++){var o=i[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function P(e,t,n,r,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),s=1;s<arguments.length;s++){var f=arguments[s];if(f!=null)for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}return o}function rt(e,t){var n=new H(e),r=n.getDocumentOptions(),i=n.getGlobalOptions();mt(i,r,t);var o=P({},i,r,t),s;typeof window<"u"&&(s=window);var f=wt(i,r,t),h=St(i,r,t),a=xt(n,o),l=Ct(n,o,s);return{id:t.tableId,content:l,hooks:h,styles:f,settings:a}}function wt(e,t,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(h){if(h==="columnStyles"){var a=e[h],l=t[h],u=n[h];r.columnStyles=P({},a,l,u)}else{var g=[e,t,n],d=g.map(function(p){return p[h]||{}});r[h]=P({},d[0],d[1],d[2])}},o=0,s=Object.keys(r);o<s.length;o++){var f=s[o];i(f)}return r}function St(e,t,n){for(var r=[e,t,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=r;o<s.length;o++){var f=s[o];f.didParseCell&&i.didParseCell.push(f.didParseCell),f.willDrawCell&&i.willDrawCell.push(f.willDrawCell),f.didDrawCell&&i.didDrawCell.push(f.didDrawCell),f.willDrawPage&&i.willDrawPage.push(f.willDrawPage),f.didDrawPage&&i.didDrawPage.push(f.didDrawPage)}return i}function xt(e,t){var n,r,i,o,s,f,h,a,l,u,g,d,p=z(t.margin,40/e.scaleFactor()),c=(n=Pt(e,t.startY))!==null&&n!==void 0?n:p.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(r=t.showFoot)!==null&&r!==void 0?r:"everyPage";var m;t.showHead===!0?m="everyPage":t.showHead===!1?m="never":m=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var w=(o=t.useCss)!==null&&o!==void 0?o:!1,S=t.theme||(w?"plain":"striped"),x=!!t.horizontalPageBreak,W=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(f=t.includeHiddenHtml)!==null&&f!==void 0?f:!1,useCss:w,theme:S,startY:c,margin:p,pageBreak:(h=t.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(a=t.rowPageBreak)!==null&&a!==void 0?a:"auto",tableWidth:(l=t.tableWidth)!==null&&l!==void 0?l:"auto",showHead:m,showFoot:v,tableLineWidth:(u=t.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(g=t.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:x,horizontalPageBreakRepeat:W,horizontalPageBreakBehaviour:(d=t.horizontalPageBreakBehaviour)!==null&&d!==void 0?d:"afterAllRows"}}function Pt(e,t){var n=e.getLastAutoTable(),r=e.scaleFactor(),i=e.pageNumber(),o=!1;if(n&&n.startPageNumber){var s=n.startPageNumber+n.pageNumber-1;o=s===i}return typeof t=="number"?t:(t==null||t===!1)&&o&&n?.finalY!=null?n.finalY+20/r:null}function Ct(e,t,n){var r=t.head||[],i=t.body||[],o=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(n){var f=et(e,t.html,n,s,t.useCss)||{};r=f.head||r,i=f.body||r,o=f.foot||r}else console.error("Cannot parse html in non browser environment")}var h=t.columns||Dt(r,i,o);return{columns:h,head:r,body:i,foot:o}}function Dt(e,t,n){var r=e[0]||t[0]||n[0]||[],i=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,f;Array.isArray(r)?f=r[parseInt(o)]:f=r[o],typeof f=="object"&&!Array.isArray(f)&&(s=f?.colSpan||1);for(var h=0;h<s;h++){var a=void 0;Array.isArray(r)?a=i.length:a=o+(h>0?"_".concat(h):"");var l={dataKey:a};i.push(l)}}),i}var N=(function(){function e(t,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=t.getDocument()}return e})(),Ht=(function(e){J(t,e);function t(n,r,i,o,s,f){var h=e.call(this,n,r,f)||this;return h.cell=i,h.row=o,h.column=s,h.section=o.section,h}return t})(N),Ft=(function(){function e(t,n){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,n,r,i,o,s){for(var f=0,h=n;f<h.length;f++){var a=h[f],l=new Ht(t,this,r,i,o,s),u=a(l)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],u)return!1}return!0},e.prototype.callEndPageHooks=function(t,n){t.applyStyles(t.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var o=i[r];o(new N(t,this,n))}},e.prototype.callWillDrawPageHooks=function(t,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var o=i[r];o(new N(t,this,n))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,o){return i+o.wrappedWidth},0);return n}else{var r=this.settings.margin;return t-r.left-r.right}},e})(),nt=(function(){function e(t,n,r,i,o){o===void 0&&(o=!1),this.height=0,this.raw=t,t instanceof G&&(this.raw=t._element,this.element=t._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=o}return e.prototype.getMaxCellHeight=function(t){var n=this;return t.reduce(function(r,i){var o;return Math.max(r,((o=n.cells[i.index])===null||o===void 0?void 0:o.height)||0)},0)},e.prototype.hasRowSpan=function(t){var n=this;return t.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,n){return this.getMaxCellHeight(n)<=t},e.prototype.getMinimumRowHeight=function(t,n){var r=this;return t.reduce(function(i,o){var s=r.cells[o.index];if(!s)return 0;var f=n.getLineHeight(s.styles.fontSize),h=s.padding("vertical"),a=h+f;return a>i?a:i},0)},e})(),it=(function(){function e(t,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=t;var o=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,o=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",f=/\r\n|\r|\n/g;this.text=s.split(f)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:t}},e.prototype.getContentHeight=function(t,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*n,o=r*i+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},e.prototype.padding=function(t){var n=z(this.styles.cellPadding,0);return t==="vertical"?n.top+n.bottom:t==="horizontal"?n.left+n.right:n[t]},e})(),bt=(function(){function e(t,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=n,this.index=r}return e.prototype.getMaxCustomCellWidth=function(t){for(var n=0,r=0,i=t.allRows();r<i.length;r++){var o=i[r],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(n=Math.max(n,s.styles.cellWidth))}return n},e})();function Wt(e,t){Tt(e,t);var n=[],r=0;t.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(t);s?o.width=s:(o.width=o.wrappedWidth,n.push(o)),r+=o.width});var i=t.getWidth(e.pageSize().width)-r;i&&(i=$(n,i,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),i&&(i=$(n,i,function(o){return o.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Rt(t),zt(t,e),kt(t)}function Tt(e,t){var n=e.scaleFactor(),r=t.settings.horizontalPageBreak,i=V(e,t);t.allRows().forEach(function(o){for(var s=0,f=t.columns;s<f.length;s++){var h=f[s],a=o.cells[h.index];if(a){var l=t.hooks.didParseCell;t.callCellHooks(e,l,a,o,h,null);var u=a.padding("horizontal");a.contentWidth=k(a.text,a.styles,e)+u;var g=k(a.text.join(" ").split(/[^\S\u00A0]+/),a.styles,e);if(a.minReadableWidth=g+a.padding("horizontal"),typeof a.styles.cellWidth=="number")a.minWidth=a.styles.cellWidth,a.wrappedWidth=a.styles.cellWidth;else if(a.styles.cellWidth==="wrap"||r===!0)a.contentWidth>i?(a.minWidth=i,a.wrappedWidth=i):(a.minWidth=a.contentWidth,a.wrappedWidth=a.contentWidth);else{var d=10/n;a.minWidth=a.styles.minCellWidth||d,a.wrappedWidth=a.contentWidth,a.minWidth>a.wrappedWidth&&(a.wrappedWidth=a.minWidth)}}}}),t.allRows().forEach(function(o){for(var s=0,f=t.columns;s<f.length;s++){var h=f[s],a=o.cells[h.index];if(a&&a.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,a.wrappedWidth),h.minWidth=Math.max(h.minWidth,a.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,a.minReadableWidth);else{var l=t.styles.columnStyles[h.dataKey]||t.styles.columnStyles[h.index]||{},u=l.cellWidth||l.minCellWidth;u&&typeof u=="number"&&(h.minWidth=u,h.wrappedWidth=u)}a&&(a.colSpan>1&&!h.minWidth&&(h.minWidth=a.minWidth),a.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=a.minWidth))}})}function $(e,t,n){for(var r=t,i=e.reduce(function(d,p){return d+p.wrappedWidth},0),o=0;o<e.length;o++){var s=e[o],f=s.wrappedWidth/i,h=r*f,a=s.width+h,l=n(s),u=a<l?l:a;t-=u-s.width,s.width=u}if(t=Math.round(t*1e10)/1e10,t){var g=e.filter(function(d){return t<0?d.width>n(d):!0});g.length&&(t=$(g,t,n))}return t}function kt(e){for(var t={},n=1,r=e.allRows(),i=0;i<r.length;i++)for(var o=r[i],s=0,f=e.columns;s<f.length;s++){var h=f[s],a=t[h.index];if(n>1)n--,delete o.cells[h.index];else if(a)a.cell.height+=o.height,n=a.cell.colSpan,delete o.cells[h.index],a.left--,a.left<=1&&delete t[h.index];else{var l=o.cells[h.index];if(!l)continue;if(l.height=o.height,l.rowSpan>1){var u=r.length-i,g=l.rowSpan>u?u:l.rowSpan;t[h.index]={cell:l,left:g,row:o}}}}}function Rt(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var r=t[n],i=null,o=0,s=0,f=0;f<e.columns.length;f++){var h=e.columns[f];if(s-=1,s>1&&e.columns[f+1])o+=h.width,delete r.cells[h.index];else if(i){var a=i;delete r.cells[h.index],i=null,a.width=h.width+o}else{var a=r.cells[h.index];if(!a)continue;if(s=a.colSpan,o=0,a.colSpan>1){i=a,o+=h.width;continue}a.width=h.width+o}}}function zt(e,t){for(var n={count:0,height:0},r=0,i=e.allRows();r<i.length;r++){for(var o=i[r],s=0,f=e.columns;s<f.length;s++){var h=f[s],a=o.cells[h.index];if(a){t.applyStyles(a.styles,!0);var l=a.width-a.padding("horizontal");if(a.styles.overflow==="linebreak")a.text=t.splitTextToSize(a.text,l+1/t.scaleFactor(),{fontSize:a.styles.fontSize});else if(a.styles.overflow==="ellipsize")a.text=q(a.text,l,a.styles,t,"...");else if(a.styles.overflow==="hidden")a.text=q(a.text,l,a.styles,t,"");else if(typeof a.styles.overflow=="function"){var u=a.styles.overflow(a.text,l);typeof u=="string"?a.text=[u]:a.text=u}a.contentHeight=a.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var g=a.contentHeight/a.rowSpan;a.rowSpan>1&&n.count*n.height<g*a.rowSpan?n={height:g,count:a.rowSpan}:n&&n.count>0&&n.height>g&&(g=n.height),g>o.height&&(o.height=g)}}n.count--}}function q(e,t,n,r,i){return e.map(function(o){return At(o,t,n,r,i)})}function At(e,t,n,r,i){var o=1e4*r.scaleFactor();if(t=Math.ceil(t*o)/o,t>=k(e,n,r))return e;for(;t<k(e+i,n,r)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}function ot(e,t){var n=new H(e),r=jt(t,n.scaleFactor()),i=new Ft(t,r);return Wt(n,i),n.applyStyles(n.userStyles),i}function jt(e,t){var n=e.content,r=Bt(n.columns);if(n.head.length===0){var i=_(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=_(r,"foot");i&&n.foot.push(i)}var o=e.settings.theme,s=e.styles;return{columns:r,head:E("head",n.head,r,s,o,t),body:E("body",n.body,r,s,o,t),foot:E("foot",n.foot,r,s,o,t)}}function E(e,t,n,r,i,o){var s={},f=t.map(function(h,a){for(var l=0,u={},g=0,d=0,p=0,c=n;p<c.length;p++){var v=c[p];if(s[v.index]==null||s[v.index].left===0)if(d===0){var m=void 0;Array.isArray(h)?m=h[v.index-g-l]:m=h[v.dataKey];var w={};typeof m=="object"&&!Array.isArray(m)&&(w=m?.styles||{});var S=Lt(e,v,a,i,r,o,w),x=new it(m,S,e);u[v.dataKey]=x,u[v.index]=x,d=x.colSpan-1,s[v.index]={left:x.rowSpan-1,times:d}}else d--,g++;else s[v.index].left--,d=s[v.index].times,l++}return new nt(h,a,e,u)});return f}function _(e,t){var n={};return e.forEach(function(r){if(r.raw!=null){var i=Et(t,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function Et(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Bt(e){return e.map(function(t,n){var r,i;return typeof t=="object"?i=(r=t.dataKey)!==null&&r!==void 0?r:n:i=n,new bt(i,t,n)})}function Lt(e,t,n,r,i,o,s){var f=gt(r),h;e==="head"?h=i.headStyles:e==="body"?h=i.bodyStyles:e==="foot"&&(h=i.footStyles);var a=P({},f.table,f[e],i.styles,h),l=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},u=e==="body"?l:{},g=e==="body"&&n%2===0?P({},f.alternateRow,i.alternateRowStyles):{},d=ut(o),p=P({},d,a,g,u);return P(p,s)}function Mt(e,t,n){var r;n===void 0&&(n={});var i=V(e,t),o=new Map,s=[],f=[],h=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?h=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(h=[t.settings.horizontalPageBreakRepeat]),h.forEach(function(g){var d=t.columns.find(function(p){return p.dataKey===g||p.index===g});d&&!o.has(d.index)&&(o.set(d.index,!0),s.push(d.index),f.push(t.columns[d.index]),i-=d.wrappedWidth)});for(var a=!0,l=(r=n?.start)!==null&&r!==void 0?r:0;l<t.columns.length;){if(o.has(l)){l++;continue}var u=t.columns[l].wrappedWidth;if(a||i>=u)a=!1,s.push(l),f.push(t.columns[l]),i-=u;else break;l++}return{colIndexes:s,columns:f,lastIndex:l-1}}function Nt(e,t){for(var n=[],r=0;r<t.columns.length;r++){var i=Mt(e,t,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function at(e,t){var n=t.settings,r=n.startY,i=n.margin,o={x:i.left,y:r},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),f=r+i.bottom+s;if(n.pageBreak==="avoid"){var h=t.body,a=h.reduce(function(g,d){return g+d.height},0);f+=a}var l=new H(e);(n.pageBreak==="always"||n.startY!=null&&f>l.pageSize().height)&&(ft(l),o.y=i.top),t.callWillDrawPageHooks(l,o);var u=P({},o);t.startPageNumber=l.pageNumber(),n.horizontalPageBreak?$t(l,t,u,o):(l.applyStyles(l.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(g){return C(l,t,g,o,t.columns)}),l.applyStyles(l.userStyles),t.body.forEach(function(g,d){var p=d===t.body.length-1;R(l,t,g,p,u,o,t.columns)}),l.applyStyles(l.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(g){return C(l,t,g,o,t.columns)})),X(l,t,u,o),t.callEndPageHooks(l,o),t.finalY=o.y,e.lastAutoTable=t,l.applyStyles(l.userStyles)}function $t(e,t,n,r){var i=Nt(e,t),o=t.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(a,l){e.applyStyles(e.userStyles),l>0?b(e,t,n,r,a.columns,!0):Y(e,t,r,a.columns),Ot(e,t,n,r,a.columns),B(e,t,r,a.columns)});else for(var s=-1,f=i[0],h=function(){var a=s;if(f){e.applyStyles(e.userStyles);var l=f.columns;s>=0?b(e,t,n,r,l,!0):Y(e,t,r,l),a=I(e,t,s+1,r,l),B(e,t,r,l)}var u=a-s;i.slice(1).forEach(function(g){e.applyStyles(e.userStyles),b(e,t,n,r,g.columns,!0),I(e,t,s+1,r,g.columns,u),B(e,t,r,g.columns)}),s=a};s<t.body.length-1;)h()}function Y(e,t,n,r){var i=t.settings;e.applyStyles(e.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(o){return C(e,t,o,n,r)})}function Ot(e,t,n,r,i){e.applyStyles(e.userStyles),t.body.forEach(function(o,s){var f=s===t.body.length-1;R(e,t,o,f,n,r,i)})}function I(e,t,n,r,i,o){e.applyStyles(e.userStyles),o=o??t.body.length;var s=Math.min(n+o,t.body.length),f=-1;return t.body.slice(n,s).forEach(function(h,a){var l=n+a===t.body.length-1,u=st(e,t,l,r);h.canEntireRowFit(u,i)&&(C(e,t,h,r,i),f=n+a)}),f}function B(e,t,n,r){var i=t.settings;e.applyStyles(e.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(o){return C(e,t,o,n,r)})}function qt(e,t,n){var r=n.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),o=Math.floor((t-i)/r);return Math.max(0,o)}function _t(e,t,n,r){var i={};e.spansMultiplePages=!0,e.height=0;for(var o=0,s=0,f=n.columns;s<f.length;s++){var h=f[s],a=e.cells[h.index];if(a){Array.isArray(a.text)||(a.text=[a.text]);var l=new it(a.raw,a.styles,a.section);l=P(l,a),l.text=[];var u=qt(a,t,r);a.text.length>u&&(l.text=a.text.splice(u,a.text.length));var g=r.scaleFactor(),d=r.getLineHeightFactor();a.contentHeight=a.getContentHeight(g,d),a.contentHeight>=t&&(a.contentHeight=t,l.styles.minCellHeight-=t),a.contentHeight>e.height&&(e.height=a.contentHeight),l.contentHeight=l.getContentHeight(g,d),l.contentHeight>o&&(o=l.contentHeight),i[h.index]=l}}var p=new nt(e.raw,-1,e.section,i,!0);p.height=o;for(var c=0,v=n.columns;c<v.length;c++){var h=v[c],l=p.cells[h.index];l&&(l.height=p.height);var a=e.cells[h.index];a&&(a.height=e.height)}return p}function Yt(e,t,n,r){var i=e.pageSize().height,o=r.settings.margin,s=o.top+o.bottom,f=i-s;t.section==="body"&&(f-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var h=t.getMinimumRowHeight(r.columns,e),a=h<n;if(h>f)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!a)return!1;var l=t.hasRowSpan(r.columns),u=t.getMaxCellHeight(r.columns)>f;return u?(l&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(l||r.settings.rowPageBreak==="avoid")}function R(e,t,n,r,i,o,s){var f=st(e,t,r,o);if(n.canEntireRowFit(f,s))C(e,t,n,o,s);else if(Yt(e,n,f,t)){var h=_t(n,f,t,e);C(e,t,n,o,s),b(e,t,i,o,s),R(e,t,h,r,i,o,s)}else b(e,t,i,o,s),R(e,t,n,r,i,o,s)}function C(e,t,n,r,i){r.x=t.settings.margin.left;for(var o=0,s=i;o<s.length;o++){var f=s[o],h=n.cells[f.index];if(!h){r.x+=f.width;continue}e.applyStyles(h.styles),h.x=r.x,h.y=r.y;var a=t.callCellHooks(e,t.hooks.willDrawCell,h,n,f,r);if(a===!1){r.x+=f.width;continue}It(e,h,r);var l=h.getTextPos();U(h.text,l.x,l.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,h,n,f,r),r.x+=f.width}r.y+=n.height}function It(e,t,n){var r=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=Z(r.lineWidth,r.fillColor);i&&e.rect(t.x,n.y,t.width,t.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),Qt(e,t,n,r.lineWidth))}function Qt(e,t,n,r){var i,o,s,f;r.top&&(i=n.x,o=n.y,s=n.x+t.width,f=n.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),h(r.top,i,o,s,f)),r.bottom&&(i=n.x,o=n.y+t.height,s=n.x+t.width,f=n.y+t.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),h(r.bottom,i,o,s,f)),r.left&&(i=n.x,o=n.y,s=n.x,f=n.y+t.height,r.top&&(o-=.5*r.top),r.bottom&&(f+=.5*r.bottom),h(r.left,i,o,s,f)),r.right&&(i=n.x+t.width,o=n.y,s=n.x+t.width,f=n.y+t.height,r.top&&(o-=.5*r.top),r.bottom&&(f+=.5*r.bottom),h(r.right,i,o,s,f));function h(a,l,u,g,d){e.getDocument().setLineWidth(a),e.getDocument().line(l,u,g,d,"S")}}function st(e,t,n,r){var i=t.settings.margin.bottom,o=t.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&n)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-r.y-i}function b(e,t,n,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!o&&t.foot.forEach(function(f){return C(e,t,f,r,i)}),t.callEndPageHooks(e,r);var s=t.settings.margin;X(e,t,n,r),ft(e),t.pageNumber++,r.x=s.left,r.y=s.top,n.y=s.top,t.callWillDrawPageHooks(e,r),t.settings.showHead==="everyPage"&&(t.head.forEach(function(f){return C(e,t,f,r,i)}),e.applyStyles(e.userStyles))}function ft(e){var t=e.pageNumber();e.setPage(t+1);var n=e.pageNumber();return n===t?(e.addPage(),!0):!1}function Kt(e){e.API.autoTable=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=rt(this,r),o=ot(this,i);return at(this,o),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,n,r,i){U(t,n,r,i,this)},e.API.autoTableSetDefaults=function(t){return H.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,n){H.setDefaults(t,n)},e.API.autoTableHtmlToJson=function(t,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new H(this),o=et(i,t,window,n,!1),s=o.head,f=o.body,h=((r=s[0])===null||r===void 0?void 0:r.map(function(a){return a.content}))||[];return{columns:h,rows:f,data:f}}}var L;function Ut(e,t){var n=rt(e,t),r=ot(e,n);at(e,r)}try{if(typeof window<"u"&&window){var Q=window,K=Q.jsPDF||((L=Q.jspdf)===null||L===void 0?void 0:L.jsPDF);K&&Kt(K)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Zt=(e,t,n,r)=>{const i=new lt,o=typeof e=="object"&&e&&Array.isArray(e.items)&&(e.currency||e.taxRate!==void 0);let s,f,h,a,l="R",u=0,g="Draft",d="",p,c;o?(s=(e.clientName||"Quote").trim(),f=e.items||[],h=e.id||e.reference||"",a=!0,l=e.currency||l,u=typeof e.taxRate=="number"?e.taxRate:0,g=e.status||g,d=e.notes||"",p=e.createdAt,c=e.updatedAt):(s=e?.trim?.()||"Quote",f=[],h=n,a=r);const v=f.map(y=>({name:y.title||y.name||"Item",description:y.description||y.subtitle||"",qty:(y.quantity!==void 0?y.quantity:y.qty!==void 0?y.qty:1)||1,unit:(y.unitPrice!==void 0?y.unitPrice:y.price!==void 0?y.price:0)||0,category:y.category||""})),m=a?v:v.filter(y=>y.unit);if(i.setFontSize(20),i.text("ðŸ§¾ CollEco Travel â€“ Quotation",10,18),i.setFontSize(12),i.text(`Quote For: ${s}`,10,28),h&&i.text(`Reference: ${h}`,10,34),o&&(i.text(`Status: ${g}`,10,40),d)){const y=i.splitTextToSize(`Notes: ${d}`,190);i.text(y,10,46)}let w=48;o&&d&&(w=46+i.splitTextToSize(`Notes: ${d}`,190).length*6+4);const S=m.map((y,T)=>[T+1,y.name,y.qty,F(y.unit,l),F(y.unit*y.qty,l)]);Ut(i,{startY:w,head:[["#","Item","Qty","Unit Price","Total"]],body:S});const x=m.reduce((y,T)=>y+T.unit*T.qty,0),W=u?x*(u/100):0,ht=x+W;let D=i.lastAutoTable.finalY+8;i.setFontSize(12),i.text(`Subtotal: ${F(x,l)}`,10,D),D+=6,u&&(i.text(`Tax (${u.toFixed(2)}%): ${F(W,l)}`,10,D),D+=6),i.setFontSize(13),i.text(`Grand Total: ${F(ht,l)}`,10,D),D+=8,o&&(p&&(i.setFontSize(8),i.text(`Created: ${new Date(p).toLocaleString()}`,10,D)),c&&(i.setFontSize(8),i.text(`Updated: ${new Date(c).toLocaleString()}`,10,D+4))),i.save(`${s.replace(/\s+/g,"_")}_Quote.pdf`)},Jt={},A=typeof import.meta<"u"&&Jt?"http://127.0.0.1:4001":"/api";async function Vt(){try{const e=await fetch(`${A}/quotes`);if(!e.ok)throw new Error("fetch_failed");return(await e.json()).quotes||[]}catch{return[]}}async function te(e){try{const t=await fetch(`${A}/quotes`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}),n=await t.json().catch(()=>null);if(!t.ok){const r=new Error("create_failed");throw r.status=t.status,r.body=n,r}return n.quote||n||null}catch(t){if(t&&t.body)throw t;return{...e,id:"tmp_"+Math.random().toString(36).slice(2,8),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}}async function ee(e){try{if(!(await fetch(`${A}/quotes/${e}`,{method:"DELETE"})).ok)throw new Error("delete_failed");return!0}catch{return!1}}async function re(e,t){try{const n=await fetch(`${A}/quotes/${e}`,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),r=await n.json().catch(()=>null);if(!n.ok){const i=new Error("update_failed");throw i.status=n.status,i.body=r,i}return r.quote||null}catch(n){if(n&&n.body)throw n;return null}}export{Zt as a,te as c,ee as d,Vt as g,re as u};
