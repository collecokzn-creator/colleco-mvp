{"version":3,"file":"AIMetricsPage-C7EbhZyY.js","sources":["../../src/pages/AIMetricsPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\n\r\nconst API_BASE = import.meta.env.VITE_API_BASE || 'http://localhost:4000';\r\n\r\nfunction usePolling(url, interval=4000){\r\n  const [data,setData] = useState(null);\r\n  const [error,setError] = useState('');\r\n  const timerRef = useRef(null);\r\n  useEffect(()=>{\r\n    let mounted = true;\r\n    async function fetchOnce(){\r\n      try {\r\n        const res = await fetch(url);\r\n        if(!res.ok){ throw new Error(await res.text()||'Request failed'); }\r\n        const j = await res.json();\r\n        if(mounted) setData(j);\r\n      } catch(e){ if(mounted) setError(e.message||'Error'); }\r\n    }\r\n    fetchOnce();\r\n    timerRef.current = setInterval(fetchOnce, interval);\r\n    return ()=>{ mounted=false; clearInterval(timerRef.current); };\r\n  }, [url, interval]);\r\n  return { data, error };\r\n}\r\n\r\nexport default function AIMetricsPage(){\r\n  const { data, error } = usePolling(`${API_BASE}/api/ai/metrics`, 5000);\r\n  const { data: history } = usePolling(`${API_BASE}/api/ai/metrics/history`, 10000);\r\n  const { data: cfg } = usePolling(`${API_BASE}/api/ai/config${import.meta.env.VITE_API_TOKEN?`?token=${import.meta.env.VITE_API_TOKEN}`:''}`, 20000);\r\n  const [series,setSeries] = useState([]);\r\n  const [refineSeries,setRefineSeries] = useState([]);\r\n  const [cacheRatioSeries,setCacheRatioSeries] = useState([]); // percent 0-100\r\n  const [tokenSeries,setTokenSeries] = useState([]); // cumulative total tokens\r\n\r\n  useEffect(()=>{\r\n    if(data){\r\n      setSeries(s => [...s.slice(-49), { t: Date.now(), total: data.total, cacheHits: data.cacheHits, cacheMiss: data.cacheMiss }]);\r\n      setRefineSeries(s => [...s.slice(-49), { t: Date.now(), refine: data.refine }]);\r\n      const denom = (data.cacheHits + data.cacheMiss) || 0;\r\n      if(denom){\r\n        const ratio = (data.cacheHits / denom)*100;\r\n        setCacheRatioSeries(s => [...s.slice(-49), { t: Date.now(), ratio }]);\r\n      }\r\n      if(data.tokens && typeof data.tokens.total === 'number'){\r\n        setTokenSeries(s => [...s.slice(-49), { t: Date.now(), tokens: data.tokens.total }]);\r\n      }\r\n    }\r\n  }, [data]);\r\n\r\n  // If history file exists, backfill (only once on first load of history)\r\n  const historyLoadedRef = useRef(false);\r\n  useEffect(()=>{\r\n    // Server returns { samples: [...] }\r\n    if(history && Array.isArray(history.samples) && history.samples.length && !historyLoadedRef.current){\r\n      historyLoadedRef.current = true;\r\n      // normalize snapshot objects: expecting fields similar to metrics\r\n      const snapshots = history.samples.slice(-100); // cap\r\n      const mappedTotal = snapshots.map(s=>({ t: s.ts, total: s.total, cacheHits: s.cacheHits, cacheMiss: s.cacheMiss }));\r\n      const mappedRefine = snapshots.map(s=>({ t: s.ts, refine: s.refine }));\r\n      const mappedRatio = snapshots.filter(s=> (s.cacheHits + s.cacheMiss)>0).map(s=>({ t: s.ts, ratio: (s.cacheHits/(s.cacheHits+s.cacheMiss))*100 }));\r\n      const mappedTokens = snapshots.filter(s=> s.tokens && typeof s.tokens.total==='number').map(s=>({ t: s.ts, tokens: s.tokens.total }));\r\n      setSeries(mappedTotal);\r\n      setRefineSeries(mappedRefine);\r\n      setCacheRatioSeries(mappedRatio);\r\n      if(mappedTokens.length) setTokenSeries(mappedTokens);\r\n    }\r\n  }, [history]);\r\n\r\n  function spark(values, key='total', color=\"#c2410c\"){\r\n    if(!values.length) return null;\r\n    const max = Math.max(...values.map(v=>v[key]));\r\n    const min = Math.min(...values.map(v=>v[key]));\r\n    const range = max - min || 1;\r\n    const pts = values.map((v,i)=>{\r\n      const x = (i/(values.length-1))*100;\r\n      const y = 100 - ((v[key] - min)/range)*100;\r\n      return `${x},${y}`;\r\n    }).join(' ');\r\n    return (\r\n      <svg viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\" className=\"w-full h-full\">\r\n        <polyline fill=\"none\" stroke={color} strokeWidth=\"2\" points={pts} />\r\n      </svg>\r\n    );\r\n  }\r\n\r\n  function latencyBadge(label, value, thresholds){\r\n    const { warn=300, danger=800 } = thresholds||{};\r\n    let tone = 'bg-emerald-200 text-emerald-900';\r\n    if(value>=danger) tone='bg-red-300 text-red-900';\r\n    else if(value>=warn) tone='bg-amber-300 text-amber-900';\r\n    return <span className={`px-1.5 py-0.5 rounded text-[10px] font-semibold tracking-wide ${tone}`}>{label} {value}ms</span>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-6 flex flex-col gap-6\" aria-labelledby=\"aiMetricsHeading\">\r\n      <div className=\"flex items-start justify-between gap-4 flex-wrap\">\r\n        <h1 id=\"aiMetricsHeading\" className=\"text-2xl font-bold text-brand-brown\">AI Metrics</h1>\r\n        <button\r\n          type=\"button\"\r\n          onClick={()=>{ window.open(`${API_BASE}/api/ai/metrics/history/download${import.meta.env.VITE_API_TOKEN?`?token=${import.meta.env.VITE_API_TOKEN}`:''}`,'_blank'); }}\r\n          className=\"text-[11px] px-3 py-1 rounded bg-brand-brown text-cream-sand font-semibold hover:bg-brand-brown/90 focus:outline-none focus:ring-2 focus:ring-brand-brown/50\"\r\n        >Download History</button>\r\n      </div>\r\n      <p className=\"text-sm text-brand-brown/70 leading-snug\">Live heuristic AI usage counters (ephemeral, reset on server restart). Polls every 5s.</p>\r\n      {cfg && cfg.llm && (\r\n        <div className=\"text-[11px] flex flex-wrap gap-2 items-center\">\r\n          <span className=\"px-2 py-0.5 rounded bg-brand-brown/10 text-brand-brown uppercase tracking-wide\">LLM: {cfg.llm.provider}</span>\r\n          {cfg.llm.model && <span className=\"px-2 py-0.5 rounded bg-cream-sand border border-cream-border text-brand-brown\">model: {cfg.llm.model}</span>}\r\n          {cfg.hybridLLM ? <span className=\"px-2 py-0.5 rounded bg-emerald-100 text-emerald-900\">hybrid on</span> : <span className=\"px-2 py-0.5 rounded bg-amber-100 text-amber-900\">hybrid off</span>}\r\n        </div>\r\n      )}\r\n      {error && <div className=\"bg-red-100 border border-red-300 text-red-700 px-3 py-2 rounded text-sm\">{error}</div>}\r\n      <div className=\"grid sm:grid-cols-3 gap-4\">\r\n        {data && [\r\n          { label:'Total', value:data.total },\r\n          { label:'Cache Hits', value:data.cacheHits },\r\n          { label:'Cache Miss', value:data.cacheMiss },\r\n          { label:'Refines', value:data.refine },\r\n          { label:'Drafts', value:data.drafts },\r\n          { label:'Rate Limited', value:data.rateLimited }\r\n        ].map(m => (\r\n          <div key={m.label} className=\"p-3 rounded border border-cream-border bg-cream-sand/40 flex flex-col gap-1\">\r\n            <div className=\"text-xs font-semibold text-brand-brown/80 uppercase tracking-wide\">{m.label}</div>\r\n            <div className=\"text-lg font-bold text-brand-brown\">{m.value}</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"grid sm:grid-cols-3 gap-4\">\r\n        <div className=\"h-24 border border-cream-border rounded bg-cream-sand/40 p-2\">\r\n          <div className=\"text-[11px] font-semibold mb-1 text-brand-brown/70\">Total Requests ({series.length})</div>\r\n          <div className=\"w-full h-16\">{spark(series,'total','#c2410c')}</div>\r\n        </div>\r\n        <div className=\"h-24 border border-cream-border rounded bg-cream-sand/40 p-2\">\r\n          <div className=\"text-[11px] font-semibold mb-1 text-brand-brown/70\">Refine Requests ({refineSeries.length})</div>\r\n          <div className=\"w-full h-16\">{spark(refineSeries,'refine','#92400e')}</div>\r\n        </div>\r\n        <div className=\"h-24 border border-cream-border rounded bg-cream-sand/40 p-2\">\r\n          <div className=\"text-[11px] font-semibold mb-1 text-brand-brown/70\">Cache Hit Ratio (%)</div>\r\n          <div className=\"w-full h-16\">{spark(cacheRatioSeries,'ratio','#065f46')}</div>\r\n        </div>\r\n      </div>\r\n      {tokenSeries.length>0 && (\r\n        <div className=\"h-24 border border-cream-border rounded bg-cream-sand/40 p-2\">\r\n          <div className=\"text-[11px] font-semibold mb-1 text-brand-brown/70\">Total Tokens ({tokenSeries[tokenSeries.length-1].tokens})</div>\r\n          <div className=\"w-full h-16\">{spark(tokenSeries,'tokens','#1d4ed8')}</div>\r\n        </div>\r\n      )}\r\n      {data && data.latencyPercentiles && (\r\n        <div className=\"grid sm:grid-cols-2 gap-4\">\r\n          <div className=\"p-3 rounded border border-cream-border bg-cream-sand/40 text-[11px] flex flex-col gap-1\">\r\n            <div className=\"font-semibold\">Latency (gen)</div>\r\n            <div className=\"flex flex-wrap gap-1\">\r\n              {latencyBadge('P50', data.latencyPercentiles.gen.p50, { warn:300, danger:800 })}\r\n              {latencyBadge('P95', data.latencyPercentiles.gen.p95, { warn:500, danger:1200 })}\r\n              {latencyBadge('P99', data.latencyPercentiles.gen.p99, { warn:700, danger:1500 })}\r\n              <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-brand-brown/10 text-brand-brown font-semibold\">Avg {data.avgLatencyMs?.gen}ms</span>\r\n            </div>\r\n          </div>\r\n          <div className=\"p-3 rounded border border-cream-border bg-cream-sand/40 text-[11px] flex flex-col gap-1\">\r\n            <div className=\"font-semibold\">Latency (refine)</div>\r\n            <div className=\"flex flex-wrap gap-1\">\r\n              {latencyBadge('P50', data.latencyPercentiles.refine.p50, { warn:300, danger:800 })}\r\n              {latencyBadge('P95', data.latencyPercentiles.refine.p95, { warn:500, danger:1200 })}\r\n              {latencyBadge('P99', data.latencyPercentiles.refine.p99, { warn:700, danger:1500 })}\r\n              <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-brand-brown/10 text-brand-brown font-semibold\">Avg {data.avgLatencyMs?.refine}ms</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Rate limit strategy summary */}\r\n      {data && data.rateLimit && (\r\n        <div className=\"p-3 rounded border border-cream-border bg-cream-sand/40 text-[11px] flex flex-col gap-1\">\r\n          <div className=\"font-semibold mb-1\">Rate Limit</div>\r\n          <div className=\"flex flex-wrap gap-2 items-center\">\r\n            <span className=\"px-2 py-0.5 bg-brand-brown/10 rounded text-brand-brown text-[10px] uppercase tracking-wide\">{data.rateLimit.strategy}</span>\r\n            {data.rateLimit.strategy === 'token_bucket' && (\r\n              <span>capacity {data.rateLimit.capacity} • refill {data.rateLimit.refillMs}ms</span>\r\n            )}\r\n            {data.rateLimit.strategy === 'sliding_window' && (\r\n              <span>window {data.rateLimit.windowMs}ms • max {data.rateLimit.max}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Snapshot delta panel (last interval) */}\r\n      {history && Array.isArray(history.samples) && history.samples.length > 0 && (()=>{\r\n        const last = history.samples[history.samples.length-1];\r\n        if(!last) return null;\r\n        const hasDeltas = last.tokensDelta || typeof last.costDelta==='number' || typeof last.totalDelta==='number';\r\n        if(!hasDeltas) return null;\r\n        const reqPerSec = typeof last.totalDelta==='number' ? (last.totalDelta/10).toFixed(2) : '0.00';\r\n        return (\r\n          <div className=\"p-3 rounded border border-cream-border bg-cream-sand/40 text-[11px] grid sm:grid-cols-3 gap-3\">\r\n            <div>\r\n              <div className=\"font-semibold mb-0.5\">Last Interval Requests</div>\r\n              <div className=\"font-bold text-brand-brown text-sm\">{last.totalDelta ?? 0 >=0 ? '+' : ''}{last.totalDelta ?? 0}</div>\r\n              <div className=\"text-[10px] text-brand-brown/60\">~10s window • {reqPerSec}/s</div>\r\n            </div>\r\n            <div>\r\n              <div className=\"font-semibold mb-0.5\">Token Delta (total)</div>\r\n              <div className=\"font-bold text-brand-brown text-sm\">{last.tokensDelta ? (last.tokensDelta.total>=0?'+':'')+last.tokensDelta.total : '0'}</div>\r\n              {last.tokensDelta && <div className=\"text-[10px] text-brand-brown/60\">prompt {last.tokensDelta.prompt>=0?'+':''}{last.tokensDelta.prompt} • completion {last.tokensDelta.completion>=0?'+':''}{last.tokensDelta.completion}</div>}\r\n            </div>\r\n            <div>\r\n              <div className=\"font-semibold mb-0.5\">Cost Δ (USD)</div>\r\n              <div className=\"font-bold text-brand-brown text-sm\">{(last.costDelta>=0?'+':'')}{last.costDelta?.toFixed ? last.costDelta.toFixed(6) : last.costDelta}</div>\r\n              <div className=\"text-[10px] text-brand-brown/60\">cumulative {data?.costUsd?.toFixed ? data.costUsd.toFixed(6) : data?.costUsd}</div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })()}\r\n      {data && data.tokens && (\r\n        <div className=\"grid sm:grid-cols-4 gap-4\">\r\n          {[{label:'Prompt Tokens',v:data.tokens.prompt},{label:'Completion Tokens',v:data.tokens.completion},{label:'Total Tokens',v:data.tokens.total},{label:'Est. Cost (USD)',v:data.costUsd?.toFixed? data.costUsd.toFixed(6): data.costUsd}].map(m=> (\r\n            <div key={m.label} className=\"p-3 rounded border border-cream-border bg-cream-sand/40 flex flex-col gap-1\">\r\n              <div className=\"text-[10px] font-semibold uppercase tracking-wide text-brand-brown/70\">{m.label}</div>\r\n              <div className=\"text-sm font-bold text-brand-brown break-all\">{m.v}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {data && (\r\n        <details className=\"text-xs\">\r\n          <summary className=\"cursor-pointer font-semibold\">Raw JSON</summary>\r\n          <pre className=\"bg-cream-sand border border-cream-border rounded p-2 overflow-auto max-h-64 whitespace-pre-wrap break-all\">{JSON.stringify(data,null,2)}</pre>\r\n        </details>\r\n      )}\r\n      <p className=\"text-[11px] text-brand-brown/60\">History-backed visualization (snapshots every ~10s). Includes latency percentiles & token/cost metrics when hybrid mode is active.</p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useRef","useEffect","jsx","jsxs"],"mappings":"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"}