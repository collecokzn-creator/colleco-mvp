{"version":3,"file":"AccommodationBooking-CnBd5hSB.js","sources":["../../src/components/AccommodationSelector.jsx","../../src/components/MealSelector.jsx","../../src/pages/AccommodationBooking.jsx"],"sourcesContent":["/* eslint-disable no-unused-vars, react/no-unescaped-entities */\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Star,\r\n  DollarSign,\r\n  TrendingUp,\r\n  Home,\r\n  Shield,\r\n  Award,\r\n  Heart,\r\n  MapPin,\r\n  CheckCircle2,\r\n  Filter,\r\n  ArrowUpDown,\r\n  Wifi,\r\n  Coffee,\r\n  Utensils,\r\n  Waves,\r\n  Dumbbell,\r\n  ParkingCircle,\r\n  X,\r\n  SlidersHorizontal,\r\n  Map as MapIcon,\r\n  List,\r\n  Sparkles,\r\n  Calendar,\r\n  Users,\r\n  ChevronDown,\r\n  ChevronUp\r\n} from 'lucide-react';\r\n\r\nexport default function AccommodationSelector({ onSelectProperty, onSkip, onCancel, location, checkIn, checkOut, guests }) {\r\n\r\n  const [properties, setProperties] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [sortBy, setSortBy] = useState('recommended');\r\n  const [favoriteProperties, setFavoriteProperties] = useState([]);\r\n  const [selectedProperty, setSelectedProperty] = useState(null);\r\n  \r\n  // Enhanced filters\r\n  const [minStars, setMinStars] = useState(0);\r\n  const [maxStars, setMaxStars] = useState(5);\r\n  const [priceRange, setPriceRange] = useState([0, 10000]);\r\n  const [minRating, setMinRating] = useState(0);\r\n  const [propertyTypes, setPropertyTypes] = useState([]);\r\n  const [requiredAmenities, setRequiredAmenities] = useState([]);\r\n  const [freeCancellation, setFreeCancellation] = useState(false);\r\n  const [breakfastIncluded, setBreakfastIncluded] = useState(false);\r\n  const [mealPlanFilter, setMealPlanFilter] = useState(''); // Filter: '', 'room_only', 'breakfast', 'half_board', 'full_board'\r\n  const [propertyMealPlans, setPropertyMealPlans] = useState({}); // Store selected meal plan per property\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  // Default to 'grid' (house icon) for mobile, 'list' for desktop\r\n  const isMobile = window.innerWidth < 768;\r\n  const [viewMode, setViewMode] = useState(isMobile ? 'grid' : 'list'); // 'list', 'grid', or 'map'\r\n  const [hoveredProperty, setHoveredProperty] = useState(null);\r\n  \r\n  // Google Maps search URL\r\n  const googleMapsAreaUrl = location\r\n    ? `https://www.google.com/maps/search/?api=1&query=hotels+accommodation+${encodeURIComponent(location)}`\r\n    : null;\r\n\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem('colleco.favoriteProperties');\r\n    if (saved) {\r\n      try {\r\n        setFavoriteProperties(JSON.parse(saved));\r\n      } catch (e) {\r\n        console.error('Failed to load favorites', e);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!location || !checkIn || !checkOut || !guests) return;\r\n    setLoading(true);\r\n    \r\n    const generateMockProperties = () => {\r\n      const propertyTypes = ['Hotel', 'Guesthouse', 'B&B', 'Lodge', 'Resort', 'Apartment'];\r\n      const propertyNames = [\r\n        'The Oyster Box', 'Beverly Hills Hotel', 'Southern Sun', 'Protea Hotel',\r\n        'Garden Court', 'African Pride', 'City Lodge', 'Premier Hotel',\r\n        'Coastlands Musgrave', 'Quarters Hotel', 'Durban Hilton', 'Holiday Inn',\r\n        'Radisson Blu', 'The Edward Hotel', 'Blue Waters Hotel'\r\n      ];\r\n      const locations = [\r\n        'Umhlanga Rocks, Durban', 'Durban Beachfront', 'Gateway, Umhlanga',\r\n        'Ballito, KZN', 'Durban North', 'Morningside, Durban',\r\n        'Westville, Durban', 'Pinetown, Durban', 'Umdloti Beach'\r\n      ];\r\n      const amenitiesList = [\r\n        ['Free WiFi', 'Pool', 'Breakfast', 'Parking', 'Restaurant', 'Gym', 'Spa', 'Room Service'],\r\n        ['Free WiFi', 'Pool', 'Breakfast', 'Parking', 'Bar', 'Beach Access'],\r\n        ['Free WiFi', 'Breakfast', 'Parking', 'Garden', 'BBQ'],\r\n        ['Free WiFi', 'Pool', 'Breakfast', 'Parking', 'Restaurant', 'Gym', 'Beach Access'],\r\n        ['Free WiFi', 'Pool', 'Breakfast', 'Parking', 'Conference Room', 'Business Center'],\r\n        ['Free WiFi', 'Breakfast', 'Parking', 'Pet Friendly', 'Laundry', 'Kitchen'],\r\n        ['Free WiFi', 'Pool', 'Spa', 'Restaurant', 'Bar', 'Beach Access', 'Room Service']\r\n      ];\r\n\r\n      const basePrice = 1200;\r\n      const checkInDate = new Date(checkIn);\r\n      const checkOutDate = new Date(checkOut);\r\n      const nights = Math.max(1, Math.ceil((checkOutDate - checkInDate) / (1000 * 60 * 60 * 24)));\r\n      const propertyCount = 12 + Math.floor(Math.random() * 6);\r\n      \r\n      return Array.from({ length: propertyCount }, (_, index) => {\r\n        const stars = 3 + Math.floor(Math.random() * 3);\r\n        const type = propertyTypes[index % propertyTypes.length];\r\n        const name = propertyNames[index % propertyNames.length];\r\n        const address = locations[index % locations.length];\r\n        const amenities = amenitiesList[index % amenitiesList.length];\r\n        \r\n        let priceMultiplier = 0.5 + (stars / 5) * 1.5;\r\n        if (type === 'Resort' || type === 'Lodge') priceMultiplier += 0.3;\r\n        if (amenities.includes('Spa')) priceMultiplier += 0.2;\r\n        if (amenities.includes('Beach Access')) priceMultiplier += 0.15;\r\n        priceMultiplier += (Math.random() * 0.3 - 0.15);\r\n        \r\n        const pricePerNight = Math.round(basePrice * priceMultiplier / 50) * 50;\r\n        const totalPrice = pricePerNight * nights;\r\n        const rating = 3.5 + Math.random() * 1.5;\r\n        const reviewCount = 50 + Math.floor(Math.random() * 950);\r\n        const distanceKm = 0.5 + Math.random() * 15;\r\n        \r\n        const isPremier = stars === 5 && rating >= 4.7;\r\n        const ecoFriendly = Math.random() > 0.7;\r\n        const isPopular = reviewCount > 500 && rating >= 4.5;\r\n        const hasFreeCancellation = Math.random() > 0.4;\r\n        const hasBreakfast = amenities.includes('Breakfast');\r\n        \r\n        // Define available meal plans based on property type and stars\r\n        const availableMealPlans = ['room_only'];\r\n        if (stars >= 2) availableMealPlans.push('breakfast');\r\n        if (stars >= 3 && (type === 'Hotel' || type === 'Resort' || type === 'Lodge')) {\r\n          availableMealPlans.push('half_board');\r\n        }\r\n        if (stars >= 4 && (type === 'Hotel' || type === 'Resort')) {\r\n          availableMealPlans.push('full_board');\r\n        }\r\n        if (stars === 5 && type === 'Resort') {\r\n          availableMealPlans.push('all_inclusive');\r\n        }\r\n        \r\n        // Generate realistic coordinates based on location\r\n        const baseCoords = { lat: -29.8587, lng: 31.0218 }; // Durban center\r\n        const latOffset = (Math.random() - 0.5) * 0.1;\r\n        const lngOffset = (Math.random() - 0.5) * 0.1;\r\n        \r\n        return {\r\n          id: `PROP-${Date.now()}-${index}`,\r\n          name,\r\n          type,\r\n          stars,\r\n          address,\r\n          rating: Number(rating.toFixed(1)),\r\n          reviewCount,\r\n          pricePerNight,\r\n          totalPrice,\r\n          amenities,\r\n          isPremier,\r\n          ecoFriendly,\r\n          isPopular,\r\n          hasFreeCancellation,\r\n          hasBreakfast,\r\n          availableMealPlans,\r\n          distanceKm: Number(distanceKm.toFixed(1)),\r\n          imageUrl: null,\r\n          checkIn,\r\n          checkOut,\r\n          nights,\r\n          availableRooms: 1 + Math.floor(Math.random() * 5),\r\n          lastBookedMinutesAgo: Math.random() > 0.6 ? Math.floor(Math.random() * 120) : null,\r\n          coordinates: {\r\n            lat: baseCoords.lat + latOffset,\r\n            lng: baseCoords.lng + lngOffset\r\n          }\r\n        };\r\n      });\r\n    };\r\n\r\n    const useDemo = (import.meta?.env?.VITE_DEMO_ACCOMMODATION ?? '1') === '1';\r\n\r\n    fetch('/api/accommodation/available-properties', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ location, checkIn, checkOut, guests })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(new Error('bad status')))\r\n      .then(data => {\r\n        const props = data.properties || [];\r\n        const finalProps = props.length ? props : (useDemo ? generateMockProperties() : []);\r\n        setProperties(finalProps);\r\n        // Auto-set price range based on results\r\n        if (finalProps.length) {\r\n          const prices = finalProps.map(p => p.pricePerNight);\r\n          setPriceRange([Math.min(...prices), Math.max(...prices)]);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        const mockProps = useDemo ? generateMockProperties() : [];\r\n        setProperties(mockProps);\r\n        if (mockProps.length) {\r\n          const prices = mockProps.map(p => p.pricePerNight);\r\n          setPriceRange([Math.min(...prices), Math.max(...prices)]);\r\n        }\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [location, checkIn, checkOut, guests]);\r\n\r\n  const toggleFavorite = (propertyId) => {\r\n    const updated = favoriteProperties.includes(propertyId)\r\n      ? favoriteProperties.filter(id => id !== propertyId)\r\n      : [...favoriteProperties, propertyId];\r\n    setFavoriteProperties(updated);\r\n    localStorage.setItem('colleco.favoriteProperties', JSON.stringify(updated));\r\n  };\r\n\r\n  const getFilteredAndSortedProperties = () => {\r\n    let filtered = [...properties];\r\n\r\n    // Apply filters\r\n    if (minStars > 0) filtered = filtered.filter(p => p.stars >= minStars);\r\n    if (maxStars < 5) filtered = filtered.filter(p => p.stars <= maxStars);\r\n    if (minRating > 0) filtered = filtered.filter(p => p.rating >= minRating);\r\n    if (propertyTypes.length > 0) filtered = filtered.filter(p => propertyTypes.includes(p.type));\r\n    if (requiredAmenities.length > 0) {\r\n      filtered = filtered.filter(p => \r\n        requiredAmenities.every(a => (p.amenities || []).includes(a))\r\n      );\r\n    }\r\n    if (freeCancellation) filtered = filtered.filter(p => p.hasFreeCancellation);\r\n    if (breakfastIncluded) filtered = filtered.filter(p => p.hasBreakfast);\r\n    if (mealPlanFilter) {\r\n      filtered = filtered.filter(p => \r\n        p.availableMealPlans && p.availableMealPlans.includes(mealPlanFilter)\r\n      );\r\n    }\r\n    \r\n    // Price range filter\r\n    filtered = filtered.filter(p => \r\n      p.pricePerNight >= priceRange[0] && p.pricePerNight <= priceRange[1]\r\n    );\r\n\r\n    // Apply sorting\r\n    switch (sortBy) {\r\n      case 'price_low':\r\n        filtered.sort((a, b) => a.pricePerNight - b.pricePerNight);\r\n        break;\r\n      case 'price_high':\r\n        filtered.sort((a, b) => b.pricePerNight - a.pricePerNight);\r\n        break;\r\n      case 'rating':\r\n        filtered.sort((a, b) => b.rating - a.rating);\r\n        break;\r\n      case 'stars':\r\n        filtered.sort((a, b) => b.stars - a.stars);\r\n        break;\r\n      case 'distance':\r\n        filtered.sort((a, b) => (a.distanceKm || 999) - (b.distanceKm || 999));\r\n        break;\r\n      case 'recommended':\r\n      default:\r\n        // Smart scoring: rating (40%) + stars (30%) + popularity (20%) + value (10%)\r\n        filtered.sort((a, b) => {\r\n          const scoreA = (a.rating / 5 * 40) + (a.stars / 5 * 30) + \r\n                        (Math.min(a.reviewCount / 1000, 1) * 20) +\r\n                        (1 - (a.pricePerNight / 10000)) * 10;\r\n          const scoreB = (b.rating / 5 * 40) + (b.stars / 5 * 30) + \r\n                        (Math.min(b.reviewCount / 1000, 1) * 20) +\r\n                        (1 - (b.pricePerNight / 10000)) * 10;\r\n          return scoreB - scoreA;\r\n        });\r\n    }\r\n\r\n    return filtered;\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    setMinStars(0);\r\n    setMaxStars(5);\r\n    setMinRating(0);\r\n    setPropertyTypes([]);\r\n    setRequiredAmenities([]);\r\n    setFreeCancellation(false);\r\n    setBreakfastIncluded(false);\r\n    setMealPlanFilter('');\r\n    if (properties.length) {\r\n      const prices = properties.map(p => p.pricePerNight);\r\n      setPriceRange([Math.min(...properties.map(p => p.pricePerNight)), Math.max(...properties.map(p => p.pricePerNight))]);\r\n    }\r\n  };\r\n\r\n  const getActiveFilterCount = () => {\r\n    let count = 0;\r\n    if (minStars > 0) count++;\r\n    if (maxStars < 5) count++;\r\n    if (minRating > 0) count++;\r\n    if (propertyTypes.length > 0) count++;\r\n    if (requiredAmenities.length > 0) count++;\r\n    if (freeCancellation) count++;\r\n    if (breakfastIncluded) count++;\r\n    if (mealPlanFilter) count++;\r\n    return count;\r\n  };\r\n\r\n  const formatCurrency = (amount) => `R${amount.toLocaleString()}`;\r\n\r\n  const getRatingLabel = (rating) => {\r\n    if (rating >= 4.5) return 'Exceptional';\r\n    if (rating >= 4.0) return 'Excellent';\r\n    if (rating >= 3.5) return 'Very Good';\r\n    if (rating >= 3.0) return 'Good';\r\n    return 'Average';\r\n  };\r\n\r\n  const getMealPlanLabel = (plan) => {\r\n    const labels = {\r\n      'room_only': 'Room Only',\r\n      'breakfast': 'Bed & Breakfast',\r\n      'half_board': 'Half Board (B&B + Dinner)',\r\n      'full_board': 'Full Board (B, L & D)',\r\n      'all_inclusive': 'All Inclusive'\r\n    };\r\n    return labels[plan] || plan;\r\n  };\r\n\r\n  const getMealPlanPrice = (basePrice, plan) => {\r\n    const multipliers = {\r\n      'room_only': 1.0,\r\n      'breakfast': 1.15,\r\n      'half_board': 1.35,\r\n      'full_board': 1.55,\r\n      'all_inclusive': 1.85\r\n    };\r\n    return Math.round(basePrice * (multipliers[plan] || 1.0) / 50) * 50;\r\n  };\r\n\r\n  const getAmenityIcon = (amenity) => {\r\n    const lower = amenity.toLowerCase();\r\n    if (lower.includes('wifi')) return <Wifi className=\"h-3 w-3\" />;\r\n    if (lower.includes('pool')) return <Waves className=\"h-3 w-3\" />;\r\n    if (lower.includes('breakfast') || lower.includes('restaurant')) return <Utensils className=\"h-3 w-3\" />;\r\n    if (lower.includes('parking')) return <ParkingCircle className=\"h-3 w-3\" />;\r\n    if (lower.includes('gym')) return <Dumbbell className=\"h-3 w-3\" />;\r\n    if (lower.includes('coffee') || lower.includes('bar')) return <Coffee className=\"h-3 w-3\" />;\r\n    return <CheckCircle2 className=\"h-3 w-3\" />;\r\n  };\r\n\r\n  const filteredProperties = getFilteredAndSortedProperties();\r\n  const activeFilters = getActiveFilterCount();\r\n\r\n  const demoModeHint = (import.meta?.env?.VITE_DEMO_ACCOMMODATION ?? '1') === '1' && (\r\n    <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800\">\r\n      <Sparkles className=\"h-4 w-4 inline mr-2\" />\r\n      Demo mode active - showing sample properties\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 z-modal flex items-center justify-center p-4\">\r\n      <div className=\"bg-white rounded-xl shadow-2xl max-w-7xl w-full max-h-[90vh] flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"p-3 sm:p-6 border-b bg-gradient-to-r from-brand-orange to-orange-600\">\r\n          <div className=\"flex items-start justify-between mb-3\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-white mb-2\">Find Your Perfect Stay</h2>\r\n              <div className=\"flex flex-wrap items-center gap-4 text-white/90 text-sm\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <MapPin className=\"h-4 w-4\" />\r\n                  <span>{location}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Calendar className=\"h-4 w-4\" />\r\n                  <span>{checkIn} → {checkOut}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Users className=\"h-4 w-4\" />\r\n                  <span>{guests} guest{guests !== 1 ? 's' : ''}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={onCancel}\r\n              className=\"text-white/80 hover:text-white transition-colors\"\r\n              title=\"Close\"\r\n            >\r\n              <X className=\"h-6 w-6\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Toolbar */}\r\n        <div className=\"p-2 sm:p-4 border-b bg-gray-50\">\r\n          {/* First row: Filters and Sort */}\r\n          <div className=\"flex flex-wrap items-center justify-between gap-2 mb-2 sm:mb-3\">\r\n            <div className=\"flex items-center gap-2 sm:gap-3 flex-1\">\r\n              <button\r\n                onClick={() => setShowFilters(!showFilters)}\r\n                className={`flex items-center gap-2 px-3 sm:px-4 py-2 border-2 rounded-lg transition-all ${\r\n                showFilters || activeFilters > 0\r\n                  ? 'border-brand-orange bg-brand-orange text-white'\r\n                  : 'border-gray-300 bg-white hover:border-brand-orange'\r\n              }`}\r\n            >\r\n              <SlidersHorizontal className=\"h-4 w-4\" />\r\n              <span className=\"font-medium\">Filters</span>\r\n              {activeFilters > 0 && (\r\n                <span className=\"bg-white text-brand-orange px-2 py-0.5 rounded-full text-xs font-bold\">\r\n                  {activeFilters}\r\n                </span>\r\n              )}\r\n              </button>\r\n\r\n              <select\r\n                value={sortBy}\r\n                onChange={(e) => setSortBy(e.target.value)}\r\n                className=\"px-3 sm:px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-brand-orange focus:outline-none text-sm sm:text-base\"\r\n              >\r\n                <option value=\"recommended\">Recommended</option>\r\n                <option value=\"price_low\">Price: Low to High</option>\r\n                <option value=\"price_high\">Price: High to Low</option>\r\n                <option value=\"rating\">Highest Rated</option>\r\n                <option value=\"stars\">Most Stars</option>\r\n                <option value=\"distance\">Closest First</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Second row: View mode buttons and property count */}\r\n          <div className=\"flex items-center justify-between gap-2\">\r\n            <div className=\"flex items-center gap-1.5 sm:gap-2\">\r\n              <button\r\n                onClick={() => setViewMode('list')}\r\n                className={`p-2 rounded-lg transition-colors ${\r\n                  viewMode === 'list' ? 'bg-brand-orange text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                }`}\r\n                title=\"List view\"\r\n              >\r\n                <List className=\"h-5 w-5\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setViewMode('grid')}\r\n                className={`p-2 rounded-lg transition-colors ${\r\n                  viewMode === 'grid' ? 'bg-brand-orange text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                }`}\r\n                title=\"Grid view (Best for mobile)\"\r\n              >\r\n                <Home className=\"h-5 w-5\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setViewMode('map')}\r\n                className={`p-2 rounded-lg transition-colors ${\r\n                  viewMode === 'map' ? 'bg-brand-orange text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                }`}\r\n                title=\"Map view\"\r\n              >\r\n                <MapIcon className=\"h-5 w-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <span className=\"text-xs sm:text-sm text-gray-600\">\r\n              {filteredProperties.length} of {properties.length}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filters Panel */}\r\n        {showFilters && (\r\n          <div className=\"p-2 sm:p-4 border-b bg-cream/30\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              {/* Star Rating */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Star Rating</label>\r\n                <div className=\"flex gap-2\">\r\n                  {[3, 4, 5].map(star => (\r\n                    <button\r\n                      key={star}\r\n                      onClick={() => setMinStars(minStars === star ? 0 : star)}\r\n                      className={`px-3 py-2 rounded-lg border-2 transition-all ${\r\n                        minStars === star\r\n                          ? 'border-brand-orange bg-brand-orange text-white'\r\n                          : 'border-gray-300 bg-white hover:border-brand-orange'\r\n                      }`}\r\n                    >\r\n                      {star}+ ★\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Guest Rating */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Guest Rating</label>\r\n                <div className=\"flex gap-2\">\r\n                  {[0, 3.5, 4.0, 4.5].map(rating => (\r\n                    <button\r\n                      key={rating}\r\n                      onClick={() => setMinRating(minRating === rating ? 0 : rating)}\r\n                      className={`px-3 py-2 rounded-lg border-2 transition-all text-sm ${\r\n                        minRating === rating\r\n                          ? 'border-brand-orange bg-brand-orange text-white'\r\n                          : 'border-gray-300 bg-white hover:border-brand-orange'\r\n                      }`}\r\n                    >\r\n                      {rating === 0 ? 'Any' : `${rating}+`}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Property Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Property Type</label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {['Hotel', 'Resort', 'Guesthouse', 'B&B'].map(type => (\r\n                    <button\r\n                      key={type}\r\n                      onClick={() => setPropertyTypes(prev => \r\n                        prev.includes(type) ? prev.filter(t => t !== type) : [...prev, type]\r\n                      )}\r\n                      className={`px-3 py-1 rounded-full border text-sm transition-all ${\r\n                        propertyTypes.includes(type)\r\n                          ? 'border-brand-orange bg-brand-orange text-white'\r\n                          : 'border-gray-300 bg-white hover:border-brand-orange'\r\n                      }`}\r\n                    >\r\n                      {type}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Meal Plan Filter */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Meal Plan</label>\r\n                <select\r\n                  value={mealPlanFilter}\r\n                  onChange={e => setMealPlanFilter(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-brand-orange focus:outline-none text-sm\"\r\n                >\r\n                  <option value=\"\">Any Meal Plan</option>\r\n                  <option value=\"room_only\">Room Only</option>\r\n                  <option value=\"breakfast\">Bed & Breakfast</option>\r\n                  <option value=\"half_board\">Half Board (Breakfast + Dinner)</option>\r\n                  <option value=\"full_board\">Full Board (All Meals)</option>\r\n                  <option value=\"all_inclusive\">All Inclusive</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Quick Filters */}\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Quick Filters</label>\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={freeCancellation}\r\n                      onChange={e => setFreeCancellation(e.target.checked)}\r\n                      className=\"w-4 h-4 accent-brand-orange rounded\"\r\n                    />\r\n                    <span className=\"text-sm\">Free Cancellation</span>\r\n                  </label>\r\n                  <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={breakfastIncluded}\r\n                      onChange={e => setBreakfastIncluded(e.target.checked)}\r\n                      className=\"w-4 h-4 accent-brand-orange rounded\"\r\n                    />\r\n                    <span className=\"text-sm\">Breakfast Included</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Amenities */}\r\n            <div className=\"mt-4\">\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Amenities</label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {['Free WiFi', 'Pool', 'Breakfast', 'Parking', 'Gym', 'Spa', 'Restaurant', 'Beach Access'].map(amenity => (\r\n                  <button\r\n                    key={amenity}\r\n                    onClick={() => setRequiredAmenities(prev =>\r\n                      prev.includes(amenity) ? prev.filter(a => a !== amenity) : [...prev, amenity]\r\n                    )}\r\n                    className={`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm transition-all ${\r\n                      requiredAmenities.includes(amenity)\r\n                        ? 'border-brand-orange bg-brand-orange text-white'\r\n                        : 'border-gray-300 bg-white hover:border-brand-orange'\r\n                    }`}\r\n                  >\r\n                    {getAmenityIcon(amenity)}\r\n                    {amenity}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Price Range */}\r\n            <div className=\"mt-4\">\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Price per Night: {formatCurrency(priceRange[0])} - {formatCurrency(priceRange[1])}\r\n              </label>\r\n              <input\r\n                type=\"range\"\r\n                min={properties.length ? Math.min(...properties.map(p => p.pricePerNight)) : 0}\r\n                max={properties.length ? Math.max(...properties.map(p => p.pricePerNight)) : 10000}\r\n                value={priceRange[1]}\r\n                onChange={e => setPriceRange([priceRange[0], Number(e.target.value)])}\r\n                className=\"w-full accent-brand-orange\"\r\n              />\r\n            </div>\r\n\r\n            {activeFilters > 0 && (\r\n              <button\r\n                onClick={clearFilters}\r\n                className=\"mt-4 text-sm text-brand-orange hover:underline font-medium\"\r\n              >\r\n                Clear all filters\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Results */}\r\n        <div className=\"flex-1 overflow-y-auto p-2 sm:p-4 min-h-0\">\r\n          {demoModeHint}\r\n          \r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center py-20\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-brand-orange border-t-transparent\"></div>\r\n            </div>\r\n          ) : filteredProperties.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <Home className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\r\n              <h3 className=\"text-xl font-semibold text-gray-700 mb-2\">No properties found</h3>\r\n              <p className=\"text-gray-500 mb-4\">Try adjusting your filters or search criteria</p>\r\n              <div className=\"flex flex-wrap gap-3 justify-center\">\r\n                {activeFilters > 0 && (\r\n                  <button\r\n                    onClick={clearFilters}\r\n                    className=\"px-4 py-2 bg-brand-orange text-white rounded-lg hover:bg-orange-600\"\r\n                  >\r\n                    Clear Filters\r\n                  </button>\r\n                )}\r\n                {googleMapsAreaUrl && (\r\n                  <a\r\n                    href={googleMapsAreaUrl}\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                    className=\"px-4 py-2 border-2 border-brand-orange text-brand-orange rounded-lg hover:bg-orange-50\"\r\n                  >\r\n                    View on Google Maps\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : viewMode === 'map' ? (\r\n            <div className=\"h-full min-h-[600px] rounded-lg overflow-hidden border-2 border-gray-200\">\r\n              <iframe\r\n                src={`https://www.google.com/maps/embed/v1/search?key=${import.meta.env.VITE_GOOGLE_MAPS_API_KEY || 'demo'}&q=hotels+in+${encodeURIComponent(location)}&zoom=12`}\r\n                className=\"w-full h-full\"\r\n                style={{ border: 0, minHeight: '600px' }}\r\n                allowFullScreen\r\n                loading=\"lazy\"\r\n                referrerPolicy=\"no-referrer-when-downgrade\"\r\n                title=\"Property locations map\"\r\n              />\r\n              \r\n              {/* Map overlay with property cards */}\r\n              <div className=\"absolute bottom-4 left-0 right-0 px-4\">\r\n                <div className=\"bg-white rounded-lg shadow-2xl p-4 max-h-64 overflow-y-auto\">\r\n                  <h3 className=\"text-sm font-bold text-brand-brown mb-3 flex items-center gap-2\">\r\n                    <MapPin className=\"h-4 w-4 text-brand-orange\" />\r\n                    {filteredProperties.length} Properties on Map\r\n                  </h3>\r\n                  <div className=\"space-y-2\">\r\n                    {filteredProperties.slice(0, 5).map(property => (\r\n                      <div\r\n                        key={property.id}\r\n                        className={`p-3 border rounded-lg cursor-pointer transition-all ${\r\n                          selectedProperty?.id === property.id\r\n                            ? 'border-brand-orange bg-orange-50'\r\n                            : 'border-gray-200 hover:border-brand-orange hover:bg-gray-50'\r\n                        }`}\r\n                        onClick={() => setSelectedProperty(property)}\r\n                        onMouseEnter={() => setHoveredProperty(property.id)}\r\n                        onMouseLeave={() => setHoveredProperty(null)}\r\n                      >\r\n                        <div className=\"flex items-start justify-between gap-3\">\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <h4 className=\"font-semibold text-sm text-brand-brown truncate\">{property.name}</h4>\r\n                            <div className=\"flex items-center gap-2 mt-1\">\r\n                              <div className=\"flex items-center\">\r\n                                {Array.from({ length: property.stars }).map((_, i) => (\r\n                                  <Star key={i} className=\"h-3 w-3 text-yellow-500 fill-current\" />\r\n                                ))}\r\n                              </div>\r\n                              <span className=\"text-xs text-gray-500\">•</span>\r\n                              <div className=\"flex items-center gap-1 text-xs\">\r\n                                <span className=\"font-semibold text-brand-orange\">{property.rating.toFixed(1)}</span>\r\n                                <span className=\"text-gray-500\">({property.reviewCount})</span>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 mt-1 text-xs text-gray-600\">\r\n                              <MapPin className=\"h-3 w-3\" />\r\n                              <span>{property.distanceKm} km away</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-right flex-shrink-0\">\r\n                            <div className=\"text-lg font-bold text-brand-orange\">\r\n                              {formatCurrency(property.pricePerNight)}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500\">/night</div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    {filteredProperties.length > 5 && (\r\n                      <button\r\n                        onClick={() => setViewMode('list')}\r\n                        className=\"w-full text-center text-sm text-brand-orange hover:underline py-2\"\r\n                      >\r\n                        View all {filteredProperties.length} properties in list\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className={viewMode === 'grid' \r\n              ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'\r\n              : 'space-y-4'\r\n            }>\r\n              {filteredProperties.map((property, idx) => (\r\n                <div\r\n                  key={property.id}\r\n                  tabIndex={0}\r\n                  className={`border-2 rounded-xl bg-white transition-all cursor-pointer ${\r\n                    selectedProperty?.id === property.id\r\n                      ? 'border-brand-orange shadow-lg'\r\n                      : 'border-gray-200 hover:border-brand-orange hover:shadow-md'\r\n                  } ${viewMode === 'list' ? 'flex gap-4 p-4' : 'p-4'}`}\r\n                  onClick={() => setSelectedProperty(property)}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter' || e.key === ' ') {\r\n                      e.preventDefault();\r\n                      setSelectedProperty(property);\r\n                    }\r\n                  }}\r\n                >\r\n                  {/* Property Image Placeholder */}\r\n                  <div className={`bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg flex-shrink-0 ${\r\n                    viewMode === 'list' ? 'w-48 h-48' : 'w-full h-48 mb-3'\r\n                  }`}>\r\n                    <div className=\"w-full h-full flex items-center justify-center\">\r\n                      <Home className=\"h-12 w-12 text-gray-400\" />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Property Details */}\r\n                  <div className=\"flex-1 flex flex-col\">\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2 mb-1\">\r\n                          <h3 className=\"text-lg font-bold text-brand-brown\">{property.name}</h3>\r\n                          {property.isPremier && (\r\n                            <Award className=\"h-5 w-5 text-yellow-500\" title=\"Premier Property\" />\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-sm text-gray-600 mb-1\">{property.type}</p>\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <div className=\"flex items-center\">\r\n                            {Array.from({ length: property.stars }).map((_, i) => (\r\n                              <Star key={i} className=\"h-4 w-4 text-yellow-500 fill-current\" />\r\n                            ))}\r\n                          </div>\r\n                          <span className=\"text-xs text-gray-500\">|</span>\r\n                          <MapPin className=\"h-3 w-3 text-gray-500\" />\r\n                          <span className=\"text-xs text-gray-600\">{property.distanceKm} km from center</span>\r\n                        </div>\r\n                      </div>\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          toggleFavorite(property.id);\r\n                        }}\r\n                        className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n                      >\r\n                        <Heart\r\n                          className={`h-5 w-5 ${\r\n                            favoriteProperties.includes(property.id)\r\n                              ? 'fill-red-500 text-red-500'\r\n                              : 'text-gray-400'\r\n                          }`}\r\n                        />\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* Rating & Reviews */}\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                      <div className=\"flex items-center gap-2 px-2 py-1 bg-brand-orange text-white rounded-lg\">\r\n                        <span className=\"font-bold\">{property.rating.toFixed(1)}</span>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-sm font-semibold text-gray-900\">{getRatingLabel(property.rating)}</div>\r\n                        <div className=\"text-xs text-gray-500\">{property.reviewCount} reviews</div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Amenities */}\r\n                    <div className=\"flex flex-wrap gap-2 mb-3\">\r\n                      {property.amenities.slice(0, viewMode === 'list' ? 6 : 4).map((amenity, idx) => (\r\n                        <span\r\n                          key={idx}\r\n                          className=\"flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full\"\r\n                        >\r\n                          {getAmenityIcon(amenity)}\r\n                          {amenity}\r\n                        </span>\r\n                      ))}\r\n                      {property.amenities.length > (viewMode === 'list' ? 6 : 4) && (\r\n                        <span className=\"text-xs text-gray-500 px-2 py-1\">\r\n                          +{property.amenities.length - (viewMode === 'list' ? 6 : 4)} more\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Badges */}\r\n                    <div className=\"flex flex-wrap gap-2 mb-3\">\r\n                      {property.hasFreeCancellation && (\r\n                        <span className=\"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium\">\r\n                          Free Cancellation\r\n                        </span>\r\n                      )}\r\n                      {property.isPopular && (\r\n                        <span className=\"px-2 py-1 bg-orange-100 text-brand-orange text-xs rounded-full font-medium flex items-center gap-1\">\r\n                          <TrendingUp className=\"h-3 w-3\" />\r\n                          Popular\r\n                        </span>\r\n                      )}\r\n                      {property.ecoFriendly && (\r\n                        <span className=\"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium\">\r\n                          Eco-Friendly\r\n                        </span>\r\n                      )}\r\n                      {property.lastBookedMinutesAgo && (\r\n                        <span className=\"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full font-medium\">\r\n                          Booked {property.lastBookedMinutesAgo}m ago\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Meal Plan Selector */}\r\n                    {property.availableMealPlans && property.availableMealPlans.length > 1 && (\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"text-xs font-medium text-gray-700 mb-1 block\">Meal Plan</label>\r\n                        <select\r\n                          value={propertyMealPlans[property.id] || 'room_only'}\r\n                          onChange={(e) => {\r\n                            e.stopPropagation();\r\n                            setPropertyMealPlans({\r\n                              ...propertyMealPlans,\r\n                              [property.id]: e.target.value\r\n                            });\r\n                          }}\r\n                          onClick={(e) => e.stopPropagation()}\r\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-orange\"\r\n                        >\r\n                          {property.availableMealPlans.map(plan => {\r\n                            const planPrice = getMealPlanPrice(property.pricePerNight, plan);\r\n                            const planLabel = getMealPlanLabel(plan);\r\n                            return (\r\n                              <option key={plan} value={plan}>\r\n                                {planLabel} - {formatCurrency(planPrice)}/night\r\n                              </option>\r\n                            );\r\n                          })}\r\n                        </select>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Pricing */}\r\n                    <div className=\"mt-auto pt-3 border-t flex items-end justify-between\">\r\n                      <div>\r\n                        <div className=\"text-xs text-gray-500 mb-1\">{property.nights} night{property.nights !== 1 ? 's' : ''}</div>\r\n                        <div className=\"flex items-baseline gap-2\">\r\n                          <span className=\"text-2xl font-bold text-brand-orange\">\r\n                            {formatCurrency(getMealPlanPrice(property.pricePerNight, propertyMealPlans[property.id] || 'room_only'))}\r\n                          </span>\r\n                          <span className=\"text-sm text-gray-600\">/night</span>\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500\">\r\n                          Total: {formatCurrency(getMealPlanPrice(property.totalPrice, propertyMealPlans[property.id] || 'room_only'))}\r\n                        </div>\r\n                        {propertyMealPlans[property.id] && propertyMealPlans[property.id] !== 'room_only' && (\r\n                          <div className=\"text-xs text-brand-orange font-medium mt-1\">\r\n                            • {getMealPlanLabel(propertyMealPlans[property.id])}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      {property.availableRooms <= 2 && (\r\n                        <div className=\"text-xs text-red-600 font-medium\">\r\n                          Only {property.availableRooms} left!\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-2 sm:p-4 border-t bg-gray-50 flex flex-wrap justify-between items-center gap-2 sm:gap-3\">\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={onCancel}\r\n              className=\"px-4 py-2 border-2 border-gray-300 rounded-lg hover:bg-gray-100 transition-colors\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            {onSkip && (\r\n              <button\r\n                onClick={() => onSkip(properties)}\r\n                className=\"px-4 py-2 border-2 border-brand-orange text-brand-orange rounded-lg hover:bg-orange-50 transition-colors\"\r\n              >\r\n                Skip for now\r\n              </button>\r\n            )}\r\n          </div>\r\n          \r\n          <button\r\n            onClick={() => {\r\n              if (selectedProperty) {\r\n                const selectedMealPlan = propertyMealPlans[selectedProperty.id] || 'room_only';\r\n                const adjustedPrice = getMealPlanPrice(selectedProperty.pricePerNight, selectedMealPlan);\r\n                const adjustedTotal = getMealPlanPrice(selectedProperty.totalPrice, selectedMealPlan);\r\n                \r\n                onSelectProperty({\r\n                  ...selectedProperty,\r\n                  selectedMealPlan,\r\n                  pricePerNight: adjustedPrice,\r\n                  totalPrice: adjustedTotal\r\n                });\r\n              }\r\n            }}\r\n            disabled={!selectedProperty}\r\n            className=\"px-3 sm:px-6 py-2 sm:py-3 bg-brand-orange text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 font-semibold text-sm sm:text-base\"\r\n          >\r\n            <CheckCircle2 className=\"h-5 w-5\" />\r\n            {selectedProperty \r\n              ? `Book ${selectedProperty.name} - ${formatCurrency(getMealPlanPrice(selectedProperty.totalPrice, propertyMealPlans[selectedProperty.id] || 'room_only'))}`\r\n              : 'Select a Property'\r\n            }\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Plus, Trash2, ChevronDown } from 'lucide-react';\r\n\r\n/**\r\n * MealSelector Component\r\n * \r\n * Allows clients to:\r\n * 1. Select predefined meal packages (bed & breakfast, half board, full board, etc.)\r\n * 2. Choose à la carte items (breakfast, lunch, dinner, soft drinks, etc.)\r\n * 3. Create custom meal bundles (e.g., \"Dinner R300 + 2 soft drinks + lunch voucher\")\r\n * 4. View per-head/per-night pricing with total calculations\r\n */\r\nexport default function MealSelector({ \r\n  onMealsSelected, \r\n  headCount = 1, \r\n  nights = 1,\r\n  bookingType = 'FIT' \r\n}) {\r\n  const [mealItems, setMealItems] = useState({});\r\n  const [packages, setPackages] = useState({});\r\n  const [selectedMode, setSelectedMode] = useState('none'); // none, package, alacarte, custom\r\n  const [selectedPackage, setSelectedPackage] = useState(null);\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [customItems, setCustomItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [expandedCategory, setExpandedCategory] = useState(null);\r\n  const [pricing, setPricing] = useState(null);\r\n\r\n  // Load available meal items and packages on mount\r\n  useEffect(() => {\r\n    async function loadMealOptions() {\r\n      try {\r\n        const [itemsRes, packagesRes] = await Promise.all([\r\n          fetch('/api/meals/items'),\r\n          fetch('/api/meals/packages'),\r\n        ]);\r\n\r\n        if (itemsRes.ok && packagesRes.ok) {\r\n          const itemsData = await itemsRes.json();\r\n          const packagesData = await packagesRes.json();\r\n          setMealItems(itemsData);\r\n          setPackages(packagesData);\r\n        }\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Failed to load meal options:', err);\r\n        setError('Failed to load meal options');\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    loadMealOptions();\r\n  }, []);\r\n\r\n  // Calculate pricing when selections change\r\n  const calculatePricing = useCallback(async () => {\r\n    if (selectedMode === 'none') {\r\n      setPricing(null);\r\n      onMealsSelected([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let response;\r\n\r\n      if (selectedMode === 'package' && selectedPackage) {\r\n        response = await fetch('/api/meals/calculate-package', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            packageId: selectedPackage,\r\n            headCount: bookingType === 'Groups' ? headCount : 1,\r\n            nights,\r\n          }),\r\n        });\r\n      } else if (selectedMode === 'alacarte' && selectedItems.length > 0) {\r\n        response = await fetch('/api/meals/calculate-alacarte', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            itemIds: selectedItems,\r\n            headCount,\r\n          }),\r\n        });\r\n      } else if (selectedMode === 'custom' && customItems.length > 0) {\r\n        response = await fetch('/api/meals/calculate-custom', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            mealRequirements: customItems,\r\n            headCount,\r\n          }),\r\n        });\r\n      }\r\n\r\n      if (response?.ok) {\r\n        const data = await response.json();\r\n        setPricing(data);\r\n        onMealsSelected(data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to calculate pricing:', err);\r\n    }\r\n  }, [selectedMode, selectedPackage, selectedItems, customItems, headCount, nights, bookingType, onMealsSelected]);\r\n\r\n  useEffect(() => {\r\n    calculatePricing();\r\n  }, [calculatePricing]);\r\n\r\n  if (loading) {\r\n    return <div className=\"text-sm text-gray-500\">Loading meal options...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"text-sm text-red-500\">{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Mode Selection */}\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n        <h4 className=\"text-sm font-semibold text-brand-brown mb-3\">Meal Plan</h4>\r\n        <div className=\"space-y-2\">\r\n          <label className=\"flex items-center gap-3 cursor-pointer\">\r\n            <input\r\n              type=\"radio\"\r\n              name=\"mealMode\"\r\n              value=\"none\"\r\n              checked={selectedMode === 'none'}\r\n              onChange={e => {\r\n                setSelectedMode(e.target.value);\r\n                setSelectedPackage(null);\r\n                setSelectedItems([]);\r\n                setCustomItems([]);\r\n              }}\r\n              className=\"w-4 h-4\"\r\n            />\r\n            <span className=\"text-sm text-gray-700\">No meals (room only)</span>\r\n          </label>\r\n\r\n          {packages.accommodation && packages.accommodation.length > 0 && (\r\n            <>\r\n              <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"mealMode\"\r\n                  value=\"package\"\r\n                  checked={selectedMode === 'package'}\r\n                  onChange={e => setSelectedMode(e.target.value)}\r\n                  className=\"w-4 h-4\"\r\n                />\r\n                <span className=\"text-sm text-gray-700\">Meal packages</span>\r\n              </label>\r\n\r\n              {selectedMode === 'package' && (\r\n                <div className=\"ml-7 space-y-2 mt-2\">\r\n                  {packages.accommodation.map(pkg => (\r\n                    <label key={pkg.id} className=\"flex items-center gap-3 cursor-pointer\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"package\"\r\n                        value={pkg.id}\r\n                        checked={selectedPackage === pkg.id}\r\n                        onChange={e => setSelectedPackage(e.target.value)}\r\n                        className=\"w-4 h-4\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm font-medium text-brand-brown\">{pkg.name}</p>\r\n                        <p className=\"text-xs text-gray-600\">{pkg.description}</p>\r\n                      </div>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          <label className=\"flex items-center gap-3 cursor-pointer\">\r\n            <input\r\n              type=\"radio\"\r\n              name=\"mealMode\"\r\n              value=\"alacarte\"\r\n              checked={selectedMode === 'alacarte'}\r\n              onChange={e => setSelectedMode(e.target.value)}\r\n              className=\"w-4 h-4\"\r\n            />\r\n            <span className=\"text-sm text-gray-700\">À la carte items</span>\r\n          </label>\r\n\r\n          {selectedMode === 'alacarte' && (\r\n            <div className=\"ml-7 space-y-3 mt-2\">\r\n              {Object.entries(mealItems).map(([category, items]) => (\r\n                <div key={category}>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setExpandedCategory(expandedCategory === category ? null : category)}\r\n                    className=\"flex items-center gap-2 text-sm font-semibold text-brand-brown hover:text-orange-600\"\r\n                  >\r\n                    <ChevronDown\r\n                      className={`h-4 w-4 transition-transform ${\r\n                        expandedCategory === category ? 'rotate-180' : ''\r\n                      }`}\r\n                    />\r\n                    {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                  </button>\r\n\r\n                  {expandedCategory === category && (\r\n                    <div className=\"ml-6 space-y-2 mt-2\">\r\n                      {items.map(item => (\r\n                        <label key={item.id} className=\"flex items-center gap-3 cursor-pointer\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={selectedItems.includes(item.id)}\r\n                            onChange={e => {\r\n                              if (e.target.checked) {\r\n                                setSelectedItems([...selectedItems, item.id]);\r\n                              } else {\r\n                                setSelectedItems(selectedItems.filter(id => id !== item.id));\r\n                              }\r\n                            }}\r\n                            className=\"w-4 h-4\"\r\n                          />\r\n                          <div className=\"flex-1\">\r\n                            <p className=\"text-sm text-gray-700\">{item.name}</p>\r\n                            <p className=\"text-xs text-gray-500\">{item.description}</p>\r\n                          </div>\r\n                          <span className=\"text-xs font-semibold text-brand-orange whitespace-nowrap\">\r\n                            ZAR {item.pricePerHead || 0}/head\r\n                          </span>\r\n                        </label>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <label className=\"flex items-center gap-3 cursor-pointer\">\r\n            <input\r\n              type=\"radio\"\r\n              name=\"mealMode\"\r\n              value=\"custom\"\r\n              checked={selectedMode === 'custom'}\r\n              onChange={e => setSelectedMode(e.target.value)}\r\n              className=\"w-4 h-4\"\r\n            />\r\n            <span className=\"text-sm text-gray-700\">Custom meal bundle</span>\r\n          </label>\r\n\r\n          {selectedMode === 'custom' && (\r\n            <div className=\"ml-7 space-y-3 mt-2\">\r\n              {customItems.map((item, index) => (\r\n                <div key={index} className=\"flex gap-2 items-end\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Description (e.g., Dinner)\"\r\n                    value={item.description || ''}\r\n                    onChange={e => {\r\n                      const updated = [...customItems];\r\n                      updated[index].description = e.target.value;\r\n                      setCustomItems(updated);\r\n                    }}\r\n                    className=\"flex-1 text-sm border border-cream-border rounded px-2 py-1\"\r\n                  />\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    placeholder=\"Qty\"\r\n                    value={item.quantity || 1}\r\n                    onChange={e => {\r\n                      const updated = [...customItems];\r\n                      updated[index].quantity = Number(e.target.value);\r\n                      setCustomItems(updated);\r\n                    }}\r\n                    className=\"w-12 text-sm border border-cream-border rounded px-2 py-1\"\r\n                  />\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    placeholder=\"Price (ZAR)\"\r\n                    value={item.pricePerUnit || ''}\r\n                    onChange={e => {\r\n                      const updated = [...customItems];\r\n                      updated[index].pricePerUnit = Number(e.target.value);\r\n                      setCustomItems(updated);\r\n                    }}\r\n                    className=\"w-24 text-sm border border-cream-border rounded px-2 py-1\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setCustomItems(customItems.filter((_, i) => i !== index))}\r\n                    className=\"text-red-500 hover:text-red-700 p-1\"\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              ))}\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setCustomItems([...customItems, { description: '', quantity: 1, pricePerUnit: 0 }])}\r\n                className=\"flex items-center gap-1 text-xs text-brand-orange hover:text-orange-600 font-medium\"\r\n              >\r\n                <Plus className=\"h-3 w-3\" />\r\n                Add item\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pricing Summary */}\r\n      {pricing && (\r\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n          <h4 className=\"text-sm font-semibold text-brand-brown mb-3\">Meal Cost Summary</h4>\r\n          <div className=\"space-y-2 text-sm\">\r\n            {pricing.items?.map((item, index) => (\r\n              <div key={index} className=\"flex justify-between text-gray-700\">\r\n                <span>{item.name || item.description}</span>\r\n                <span className=\"font-medium\">ZAR {item.total.toFixed(2)}</span>\r\n              </div>\r\n            ))}\r\n            <div className=\"border-t pt-2 mt-2\">\r\n              <div className=\"flex justify-between font-semibold text-brand-orange\">\r\n                <span>Total:</span>\r\n                <span>ZAR {pricing.totalPrice.toFixed(2)}</span>\r\n              </div>\r\n            </div>\r\n            {pricing.headCount && pricing.headCount > 1 && (\r\n              <p className=\"text-xs text-gray-600 mt-2\">\r\n                {pricing.headCount} {pricing.type === 'a_la_carte' ? 'guests' : 'people'} × meal selections\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport BookingNav from '../components/BookingNav';\r\nimport AccommodationSelector from '../components/AccommodationSelector';\r\nimport MealSelector from '../components/MealSelector';\r\nimport Button from '../components/ui/Button.jsx';\r\nimport { Home, Clock, DollarSign } from 'lucide-react';\r\nimport { processBookingRewards } from '../utils/bookingIntegration';\r\n\r\nimport ErrorBoundary from '../components/ErrorBoundary';\r\n\r\nfunction AccommodationBookingInner(){\r\n  const [location, setLocation] = useState('');\r\n  const [checkIn, setCheckIn] = useState('');\r\n  const [checkOut, setCheckOut] = useState('');\r\n  const [guests, setGuests] = useState(2);\r\n  const [roomType, setRoomType] = useState('standard'); // standard, deluxe, suite\r\n  const [specialRequests, setSpecialRequests] = useState('');\r\n  const [showPropertySelector, setShowPropertySelector] = useState(false);\r\n  const [selectedProperty, setSelectedProperty] = useState(null);\r\n  const [propertyPending, setPropertyPending] = useState(false);\r\n  const [availableProperties, setAvailableProperties] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  \r\n  // Property selection (replaces direct supplier selection)\r\n  const [propertyId, setPropertyId] = useState(''); // property ID from search\r\n  const [properties, setProperties] = useState([]);\r\n  const [bookingType, setBookingType] = useState('FIT'); // FIT or Groups\r\n  const [mealPricing, setMealPricing] = useState(null); // Store meal pricing from MealSelector\r\n  \r\n  // Search properties when location changes\r\n  useEffect(() => {\r\n    async function searchProperties() {\r\n      if (!location || location.length < 3) return;\r\n      \r\n      try {\r\n        const response = await fetch(`/api/properties/search?location=${encodeURIComponent(location)}`);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setProperties(data);\r\n          // Auto-select first property if available\r\n          if (data.length > 0 && !propertyId) {\r\n            setPropertyId(data[0].id);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to search properties:', error);\r\n      }\r\n    }\r\n    \r\n    const timer = setTimeout(searchProperties, 300); // Debounce\r\n    return () => clearTimeout(timer);\r\n  }, [location, propertyId]);\r\n  \r\n  React.useEffect(() => {\r\n    if (typeof window !== 'undefined' && typeof window.scrollTo === 'function') {\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    }\r\n    \r\n    // Add print styles\r\n    const style = document.createElement('style');\r\n    // Use textContent to avoid inserting HTML or scripts via innerHTML\r\n    style.textContent = `\r\n      @media print {\r\n        @page { margin: 1cm; }\r\n        body * { visibility: hidden; }\r\n        #booking-confirmation, #booking-confirmation * { visibility: visible; }\r\n        #booking-confirmation { \r\n          position: absolute; \r\n          left: 0; \r\n          top: 0; \r\n          width: 100%;\r\n          box-shadow: none !important;\r\n        }\r\n        #booking-confirmation button { display: none !important; }\r\n        .no-print { display: none !important; }\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n    return () => document.head.removeChild(style);\r\n  }, []);\r\n\r\n  // Set minimum check-in date to today\r\n  const today = new Date().toISOString().split('T')[0];\r\n  \r\n  // Set minimum check-out date to check-in + 1 day\r\n  const minCheckOut = checkIn ? new Date(new Date(checkIn).getTime() + 86400000).toISOString().split('T')[0] : today;\r\n\r\n  const handleSkipPropertySelection = useCallback((properties) => {\r\n    setAvailableProperties(properties);\r\n    setShowPropertySelector(false);\r\n    setPropertyPending(true);\r\n    setSelectedProperty(null);\r\n  }, []);\r\n  const confirmPropertySelection = useCallback(async (property) => {\r\n    setSelectedProperty(property);\r\n    setShowPropertySelector(false);\r\n    setPropertyPending(false);\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Get selected property details to derive supplier\r\n      const selectedProp = properties.find(p => p.id === propertyId);\r\n      if (!selectedProp) {\r\n        throw new Error('Please select a property first');\r\n      }\r\n      \r\n      // Calculate booking details\r\n      const checkInDate = new Date(checkIn);\r\n      const checkOutDate = new Date(checkOut);\r\n      const nights = Math.ceil((checkOutDate - checkInDate) / (1000 * 60 * 60 * 24));\r\n      const basePrice = property.pricePerNight || selectedProp.basePrice;\r\n      const retailPrice = basePrice; // No markup for now\r\n      \r\n      // Build line items array\r\n      const lineItems = [\r\n        {\r\n          serviceType: 'accommodation',\r\n          description: `${selectedProp.name} - ${roomType} room`,\r\n          basePrice,\r\n          retailPrice,\r\n          quantity: 1, // 1 room\r\n          nights\r\n        }\r\n      ];\r\n      \r\n      // Add meal selections from MealSelector if present\r\n      if (mealPricing && mealPricing.items && mealPricing.items.length > 0) {\r\n        mealPricing.items.forEach(mealItem => {\r\n          lineItems.push({\r\n            serviceType: 'meal',\r\n            description: mealItem.name || mealItem.description,\r\n            basePrice: mealItem.total / (mealItem.quantity || 1), // Back-calculate per-unit price\r\n            retailPrice: mealItem.total / (mealItem.quantity || 1),\r\n            quantity: mealItem.quantity || 1,\r\n            nights: 1 // Meals are per-head, not per-night\r\n          });\r\n        });\r\n      }\r\n      \r\n      // Create booking via API\r\n      const userId = localStorage.getItem('colleco.user.id') || 'guest_' + Date.now();\r\n      const bookingData = {\r\n        propertyId: selectedProp.id,\r\n        supplierId: selectedProp.supplierId, // Derived from property mapping\r\n        userId,\r\n        bookingType,\r\n        checkInDate: checkIn,\r\n        checkOutDate: checkOut,\r\n        lineItems,\r\n        metadata: {\r\n          propertyId: property.id,\r\n          propertyName: property.name,\r\n          location,\r\n          guests,\r\n          roomType,\r\n          specialRequests: specialRequests || undefined\r\n        }\r\n      };\r\n      \r\n      const response = await fetch('/api/bookings', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(bookingData)\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Booking failed: ${response.statusText}`);\r\n      }\r\n      \r\n      const booking = await response.json();\r\n      \r\n      // Process loyalty rewards\r\n      const _loyaltyResult = processBookingRewards({\r\n        id: booking.id,\r\n        type: 'accommodation',\r\n        amount: booking.pricing.total,\r\n        userId,\r\n        checkInDate,\r\n        propertyId: property.id,\r\n        propertyName: property.name,\r\n        nights,\r\n        guests\r\n      });\r\n      \r\n      // Redirect to payment\r\n      const paymentUrl = `/checkout?bookingId=${booking.id}`;\r\n      window.location.href = paymentUrl;\r\n      \r\n    } catch (error) {\r\n      console.error('Booking failed:', error);\r\n      alert(`Booking failed: ${error.message}\\n\\nPlease try again or contact support.`);\r\n      setLoading(false);\r\n    }\r\n  }, [properties, propertyId, checkIn, checkOut, roomType, mealPricing, bookingType, guests, location, specialRequests]);\r\n\r\n  const autoAssignCheapestProperty = useCallback(async () => {\r\n    if (!availableProperties || availableProperties.length === 0) {\r\n      alert('No available properties to assign. Please try again.');\r\n      return;\r\n    }\r\n\r\n    const cheapestProperty = availableProperties.reduce((min, property) => \r\n      property.pricePerNight < min.pricePerNight ? property : min\r\n    );\r\n    await confirmPropertySelection(cheapestProperty);\r\n  }, [availableProperties, confirmPropertySelection]);\r\n\r\n  const reopenPropertySelector = useCallback(() => {\r\n    setPropertyPending(false);\r\n    setShowPropertySelector(true);\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // Validate form\r\n    const errors = {};\r\n    if (!location || location.length < 3) errors.location = 'Please enter a valid location';\r\n    if (!checkIn) errors.checkIn = 'Please select check-in date';\r\n    if (!checkOut) errors.checkOut = 'Please select check-out date';\r\n    if (checkOut && checkIn && new Date(checkOut) <= new Date(checkIn)) {\r\n      errors.checkOut = 'Check-out must be after check-in';\r\n    }\r\n    if (guests < 1 || guests > 20) errors.guests = 'Guests must be between 1 and 20';\r\n    \r\n    if (Object.keys(errors).length > 0) {\r\n      setFormErrors(errors);\r\n      return;\r\n    }\r\n    \r\n    setFormErrors({});\r\n    setShowPropertySelector(true);\r\n  }, [location, checkIn, checkOut, guests]);\r\n\r\n  return (\r\n    <div className=\"bg-cream min-h-screen overflow-x-hidden\">\r\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 py-8\">\r\n        <BookingNav />\r\n        \r\n        {/* Hero */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl sm:text-4xl font-bold tracking-tight text-brand-brown\">Accommodation Booking</h1>\r\n          <p className=\"mt-2 text-sm sm:text-base text-brand-russty max-w-prose\">\r\n            Find your perfect stay with our smart property selection and best price guarantee.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Booking Form */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-cream-border p-6 mb-6\">\r\n          <h2 className=\"text-lg font-bold text-brand-brown mb-4\">Search Accommodation</h2>\r\n          \r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {/* Location */}\r\n            <div>\r\n              <label className=\"block mb-2 text-sm font-semibold text-brand-brown\">\r\n                Location *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={location}\r\n                onChange={e => setLocation(e.target.value)}\r\n                required\r\n                className=\"w-full border-2 border-cream-border rounded-lg px-3 py-2 focus:border-brand-orange focus:outline-none transition-colors\"\r\n                placeholder=\"e.g., Durban, Umhlanga, Ballito\"\r\n              />\r\n              {formErrors.location && (\r\n                <p className=\"text-red-500 text-xs mt-1\">{formErrors.location}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Property Selection */}\r\n            {properties.length > 0 && (\r\n              <div>\r\n                <label className=\"block mb-2 text-sm font-semibold text-brand-brown\">\r\n                  Select Property *\r\n                </label>\r\n                <div className=\"space-y-2\">\r\n                  {properties.map(prop => (\r\n                    <label\r\n                      key={prop.id}\r\n                      className={`flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors ${\r\n                        propertyId === prop.id\r\n                          ? 'border-brand-orange bg-orange-50'\r\n                          : 'border-cream-border hover:border-brand-orange'\r\n                      }`}\r\n                    >\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"property\"\r\n                        value={prop.id}\r\n                        checked={propertyId === prop.id}\r\n                        onChange={e => setPropertyId(e.target.value)}\r\n                        className=\"mt-1\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"font-semibold text-brand-brown\">{prop.name}</p>\r\n                        <p className=\"text-xs text-gray-600\">{prop.type} • {prop.location} • {prop.stars}⭐</p>\r\n                        <p className=\"text-xs text-gray-500 mt-1\">{prop.description}</p>\r\n                        <p className=\"text-sm font-semibold text-brand-orange mt-2\">\r\n                          From ZAR {prop.basePrice}/night\r\n                        </p>\r\n                      </div>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Booking Type */}\r\n            <div>\r\n              <label className=\"block mb-2 text-sm font-semibold text-brand-brown\">\r\n                Booking Type *\r\n              </label>\r\n              <select\r\n                value={bookingType}\r\n                onChange={e => setBookingType(e.target.value)}\r\n                required\r\n                className=\"w-full border-2 border-cream-border rounded-lg px-3 py-2 focus:border-brand-orange focus:outline-none transition-colors\"\r\n              >\r\n                <option value=\"FIT\">Individual Booking</option>\r\n                <option value=\"Groups\">Group Booking (10+ guests)</option>\r\n              </select>\r\n              <p className=\"text-xs text-gray-500 mt-1\">\r\n                {bookingType === 'FIT' \r\n                  ? 'Full payment due 7 days before check-in' \r\n                  : '25% deposit due now, balance 30 days before check-in'}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Dates */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block mb-2 text-sm font-semibold text-brand-brown\">\r\n                  Check-in Date *\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={checkIn}\r\n                  onChange={e => setCheckIn(e.target.value)}\r\n                  min={today}\r\n                  required\r\n                  className=\"w-full border-2 border-cream-border rounded-lg px-3 py-2 focus:border-brand-orange focus:outline-none transition-colors\"\r\n                />\r\n                {formErrors.checkIn && (\r\n                  <p className=\"text-red-500 text-xs mt-1\">{formErrors.checkIn}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block mb-2 text-sm font-semibold text-brand-brown\">\r\n                  Check-out Date *\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={checkOut}\r\n                  onChange={e => setCheckOut(e.target.value)}\r\n                  min={minCheckOut}\r\n                  required\r\n                  className=\"w-full border-2 border-cream-border rounded-lg px-3 py-2 focus:border-brand-orange focus:outline-none transition-colors\"\r\n                />\r\n                {formErrors.checkOut && (\r\n                  <p className=\"text-red-500 text-xs mt-1\">{formErrors.checkOut}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Guests & Room Type */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"guests\" className=\"block mb-2 text-sm font-semibold text-brand-brown\">\r\n                  Number of Guests *\r\n                </label>\r\n                <input\r\n                  id=\"guests\"\r\n                  type=\"number\"\r\n                  min={1}\r\n                  max={20}\r\n                  value={guests}\r\n                  onChange={e => setGuests(Number(e.target.value))}\r\n                  required\r\n                  className=\"w-full border-2 border-cream-border rounded-lg px-3 py-2 focus:border-brand-orange focus:outline-none transition-colors\"\r\n                />\r\n                {formErrors.guests && (\r\n                  <p className=\"text-red-500 text-xs mt-1\">{formErrors.guests}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"roomType\" className=\"block mb-2 text-sm font-semibold text-brand-brown\">\r\n                  Room Type\r\n                </label>\r\n                <select\r\n                  id=\"roomType\"\r\n                  value={roomType}\r\n                  onChange={e => setRoomType(e.target.value)}\r\n                  className=\"w-full border-2 border-cream-border rounded-lg px-3 py-2 focus:border-brand-orange focus:outline-none transition-colors\"\r\n                >\r\n                  <option value=\"standard\">Standard Room</option>\r\n                  <option value=\"deluxe\">Deluxe Room</option>\r\n                  <option value=\"suite\">Suite</option>\r\n                  <option value=\"family\">Family Room</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Special Requests */}\r\n            <div>\r\n              <label htmlFor=\"specialRequests\" className=\"block mb-2 text-sm font-semibold text-brand-brown\">\r\n                Special Requests <span className=\"text-gray-500 text-xs\">(optional)</span>\r\n              </label>\r\n              <textarea\r\n                id=\"specialRequests\"\r\n                value={specialRequests}\r\n                onChange={e => setSpecialRequests(e.target.value)}\r\n                placeholder=\"Early check-in, late check-out, accessible room, etc.\"\r\n                rows={3}\r\n                maxLength={200}\r\n                className=\"w-full border-2 border-cream-border rounded-lg px-3 py-2 focus:border-brand-orange focus:outline-none transition-colors resize-none\"\r\n              />\r\n              <p className=\"text-xs text-gray-500 mt-1\">{specialRequests.length}/200 characters</p>\r\n            </div>\r\n\r\n            {/* Meal Selection */}\r\n            <div className=\"border-t pt-4\">\r\n              <h3 className=\"text-sm font-semibold text-brand-brown mb-3\">Meal Plans (Optional)</h3>\r\n              <MealSelector \r\n                onMealsSelected={setMealPricing}\r\n                headCount={guests}\r\n                nights={Math.ceil((new Date(checkOut) - new Date(checkIn)) / (1000 * 60 * 60 * 24)) || 1}\r\n                bookingType={bookingType}\r\n              />\r\n            </div>\r\n\r\n            <Button type=\"submit\" fullWidth disabled={loading}>\r\n              {loading ? 'Processing...' : 'Search Properties'}\r\n            </Button>\r\n          </form>\r\n        </div>\r\n\r\n        {/* Pending Property Selection */}\r\n        {propertyPending && !loading && (\r\n          <div className=\"p-6 border-2 border-brand-orange rounded-lg bg-orange-50 shadow-sm\">\r\n            <div className=\"flex items-start gap-3 mb-4\">\r\n              <div className=\"w-10 h-10 rounded-full bg-brand-orange flex items-center justify-center flex-shrink-0\">\r\n                <Clock className=\"h-5 w-5 text-white\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h2 className=\"font-bold text-lg text-brand-brown mb-1\">\r\n                  Booking Pending - Choose Your Property\r\n                </h2>\r\n                <p className=\"text-sm text-brand-russty\">\r\n                  Your search details are saved. Select your preferred property to proceed.\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Booking Summary */}\r\n            <div className=\"bg-white rounded-lg p-4 mb-4 border border-cream-border\">\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm\">\r\n                <div>\r\n                  <p className=\"text-xs text-gray-500 mb-1\">Location</p>\r\n                  <p className=\"font-semibold text-brand-brown\">{location}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-gray-500 mb-1\">Guests</p>\r\n                  <p className=\"font-semibold text-brand-brown\">{guests} guest{guests !== 1 ? 's' : ''}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-gray-500 mb-1\">Check-in</p>\r\n                  <p className=\"font-semibold text-brand-brown\">{checkIn}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs text-gray-500 mb-1\">Check-out</p>\r\n                  <p className=\"font-semibold text-brand-brown\">{checkOut}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"space-y-3\">\r\n              <Button\r\n                fullWidth\r\n                onClick={reopenPropertySelector}\r\n                className=\"flex items-center justify-center gap-2\"\r\n              >\r\n                <Home className=\"h-4 w-4\" />\r\n                Pick My Property\r\n              </Button>\r\n              \r\n              <Button\r\n                fullWidth\r\n                variant=\"outline\"\r\n                onClick={autoAssignCheapestProperty}\r\n                className=\"flex items-center justify-center gap-2 border-brand-orange text-brand-orange hover:bg-orange-50\"\r\n              >\r\n                <DollarSign className=\"h-4 w-4\" />\r\n                Auto-assign Cheapest Property\r\n              </Button>\r\n              \r\n              <p className=\"text-xs text-center text-gray-600 mt-2\">\r\n                You can also proceed with other bookings and finalize this later.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Selected Property Confirmation */}\r\n        {selectedProperty && !loading && (\r\n          <div className=\"bg-white rounded-xl shadow-sm border border-cream-border\" id=\"booking-confirmation\">\r\n            {/* Header */}\r\n            <div className=\"p-6 border-b bg-gradient-to-r from-green-50 to-emerald-50\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-brand-brown mb-1\">Booking Confirmed</h2>\r\n                  <p className=\"text-sm text-gray-600\">Confirmation ID: ACC-{Date.now().toString().slice(-8)}</p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => {\r\n                      const email = prompt('Enter your email address:');\r\n                      if (email) {\r\n                        alert(`Booking confirmation will be sent to ${email}\\n\\nNote: Email functionality requires backend integration.`);\r\n                      }\r\n                    }}\r\n                    className=\"px-3 py-2 bg-brand-orange text-white rounded-lg hover:bg-orange-600 transition-colors text-sm flex items-center gap-2\"\r\n                  >\r\n                    <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                    </svg>\r\n                    Email\r\n                  </button>\r\n                  <button\r\n                    onClick={() => window.print()}\r\n                    className=\"px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm flex items-center gap-2\"\r\n                  >\r\n                    <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z\" />\r\n                    </svg>\r\n                    Print\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Booking Details */}\r\n            <div className=\"p-6 space-y-6\">\r\n              {/* Property Information */}\r\n              <div>\r\n                <h3 className=\"text-lg font-bold text-brand-brown mb-3\">Property Details</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-600\">Property Name</p>\r\n                    <p className=\"font-semibold text-brand-brown\">{selectedProperty.name}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-600\">Type & Rating</p>\r\n                    <p className=\"font-semibold text-brand-brown\">{selectedProperty.type} • {selectedProperty.stars} ⭐</p>\r\n                  </div>\r\n                  <div className=\"md:col-span-2\">\r\n                    <p className=\"text-sm text-gray-600\">Address</p>\r\n                    <div className=\"space-y-2\">\r\n                      <p className=\"font-semibold text-brand-brown flex items-center gap-2\">\r\n                        <svg className=\"h-4 w-4 text-brand-orange\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                        </svg>\r\n                        {selectedProperty.address || location}\r\n                      </p>\r\n                      \r\n                      {/* CollEco Travel info box */}\r\n                      <div className=\"mb-3 p-3 bg-brand-orange/10 border-l-4 border-brand-orange rounded\">\r\n                        <strong className=\"text-brand-orange\">CollEco Travel Tip:</strong>\r\n                        <span className=\"ml-2 text-sm text-brand-brown\">Map shows approximate property location. Complete your booking here with CollEco Travel for exclusive rates and support!</span>\r\n                      </div>\r\n                      \r\n                      {/* Static Location Map - No API key required */}\r\n                      <div className=\"relative rounded-lg overflow-hidden border-2 border-brand-orange mb-4 bg-gradient-to-br from-blue-50 to-green-50\">\r\n                        <div className=\"w-full h-64 flex flex-col items-center justify-center p-6\">\r\n                          <svg className=\"h-16 w-16 text-brand-orange mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                          </svg>\r\n                          <p className=\"text-lg font-semibold text-brand-brown mb-1\">{selectedProperty.name}</p>\r\n                          <p className=\"text-sm text-gray-600 text-center\">{selectedProperty.address || location}</p>\r\n                          {selectedProperty.distanceKm && (\r\n                            <p className=\"text-xs text-gray-500 mt-2\">{selectedProperty.distanceKm} km from city center</p>\r\n                          )}\r\n                        </div>\r\n                        {/* Overlay badge */}\r\n                        <div className=\"absolute top-2 left-2 bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-lg shadow-md\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <svg className=\"h-4 w-4 text-brand-orange\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                            </svg>\r\n                            <span className=\"text-xs font-semibold text-brand-brown\">Property Location</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-600\">Guest Rating</p>\r\n                    <p className=\"font-semibold text-brand-brown\">{selectedProperty.rating?.toFixed(1) || 'N/A'}/5.0 ({selectedProperty.reviewCount || 0} reviews)</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Stay Information */}\r\n              <div className=\"border-t pt-6\">\r\n                <h3 className=\"text-lg font-bold text-brand-brown mb-3\">Stay Information</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-600\">Check-in</p>\r\n                    <p className=\"font-semibold text-brand-brown\">{new Date(checkIn).toLocaleDateString('en-ZA', { weekday: 'short', day: 'numeric', month: 'short', year: 'numeric' })}</p>\r\n                    <p className=\"text-xs text-gray-500\">After 2:00 PM</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-600\">Check-out</p>\r\n                    <p className=\"font-semibold text-brand-brown\">{new Date(checkOut).toLocaleDateString('en-ZA', { weekday: 'short', day: 'numeric', month: 'short', year: 'numeric' })}</p>\r\n                    <p className=\"text-xs text-gray-500\">Before 11:00 AM</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-600\">Duration</p>\r\n                    <p className=\"font-semibold text-brand-brown\">\r\n                      {(() => {\r\n                        const checkInDate = new Date(checkIn);\r\n                        const checkOutDate = new Date(checkOut);\r\n                        const diffTime = Math.abs(checkOutDate - checkInDate);\r\n                        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                        const nights = Math.max(1, diffDays);\r\n                        return `${nights} night${nights !== 1 ? 's' : ''}`;\r\n                      })()}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">{guests} guest{guests !== 1 ? 's' : ''}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Amenities */}\r\n              {selectedProperty.amenities && selectedProperty.amenities.length > 0 && (\r\n                <div className=\"border-t pt-6\">\r\n                  <h3 className=\"text-lg font-bold text-brand-brown mb-3\">Property Amenities</h3>\r\n                  \r\n                  {/* Show selected amenities first if any */}\r\n                  {selectedProperty.requiredAmenities && selectedProperty.requiredAmenities.length > 0 && (\r\n                    <div className=\"mb-4\">\r\n                      <p className=\"text-sm font-medium text-gray-700 mb-2\">✓ Your Selected Amenities:</p>\r\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n                        {selectedProperty.requiredAmenities.map((amenity, idx) => (\r\n                          <div key={idx} className=\"flex items-center gap-2 text-sm bg-green-50 border border-green-200 rounded px-3 py-2\">\r\n                            <svg className=\"h-4 w-4 text-green-600 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                            </svg>\r\n                            <span className=\"font-medium text-green-800\">{amenity}</span>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {/* Show all property amenities */}\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-700 mb-2\">All Available Amenities:</p>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                      {selectedProperty.amenities.map((amenity, idx) => (\r\n                        <div key={idx} className=\"flex items-center gap-2 text-sm text-gray-700\">\r\n                          <svg className=\"h-4 w-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                          </svg>\r\n                          {amenity}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Meal Plan */}\r\n              <div className=\"border-t pt-6\">\r\n                <h3 className=\"text-lg font-bold text-brand-brown mb-3\">Meal Plan</h3>\r\n                <div className={`border rounded-lg p-4 ${\r\n                  selectedProperty.selectedMealPlan && selectedProperty.selectedMealPlan !== 'room_only' \r\n                    ? 'bg-green-50 border-green-200' \r\n                    : 'bg-gray-50 border-gray-200'\r\n                }`}>\r\n                  <p className={`font-semibold ${\r\n                    selectedProperty.selectedMealPlan && selectedProperty.selectedMealPlan !== 'room_only'\r\n                      ? 'text-green-800'\r\n                      : 'text-gray-700'\r\n                  }`}>\r\n                    {!selectedProperty.selectedMealPlan || selectedProperty.selectedMealPlan === 'room_only' ? '🏨 Room Only' :\r\n                     selectedProperty.selectedMealPlan === 'breakfast' ? '🍳 Bed & Breakfast' : \r\n                     selectedProperty.selectedMealPlan === 'half_board' ? '🍽️ Half Board (Breakfast & Dinner)' : \r\n                     selectedProperty.selectedMealPlan === 'full_board' ? '🍽️ Full Board (All Meals)' :\r\n                     selectedProperty.selectedMealPlan === 'all_inclusive' ? '🍹 All Inclusive' : '🏨 Room Only'}\r\n                  </p>\r\n                  <p className={`text-sm mt-1 ${\r\n                    selectedProperty.selectedMealPlan && selectedProperty.selectedMealPlan !== 'room_only'\r\n                      ? 'text-green-700'\r\n                      : 'text-gray-600'\r\n                  }`}>\r\n                    {!selectedProperty.selectedMealPlan || selectedProperty.selectedMealPlan === 'room_only' ? 'No meals included - Room accommodation only' :\r\n                     selectedProperty.selectedMealPlan === 'breakfast' ? 'Daily breakfast included in your rate' : \r\n                     selectedProperty.selectedMealPlan === 'half_board' ? 'Breakfast and dinner included daily' : \r\n                     selectedProperty.selectedMealPlan === 'full_board' ? 'Breakfast, lunch, and dinner included daily' :\r\n                     selectedProperty.selectedMealPlan === 'all_inclusive' ? 'All meals, drinks, and activities included' : 'No meals included'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Pricing */}\r\n              <div className=\"border-t pt-6\">\r\n                <h3 className=\"text-lg font-bold text-brand-brown mb-3\">Pricing Breakdown</h3>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex justify-between text-sm\">\r\n                    <span className=\"text-gray-600\">R{selectedProperty.pricePerNight.toLocaleString()} × {(() => {\r\n                      const checkInDate = new Date(checkIn);\r\n                      const checkOutDate = new Date(checkOut);\r\n                      const diffTime = Math.abs(checkOutDate - checkInDate);\r\n                      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                      return Math.max(1, diffDays);\r\n                    })()} night(s)</span>\r\n                    <span className=\"font-semibold\">R{(selectedProperty.pricePerNight * (() => {\r\n                      const checkInDate = new Date(checkIn);\r\n                      const checkOutDate = new Date(checkOut);\r\n                      const diffTime = Math.abs(checkOutDate - checkInDate);\r\n                      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                      return Math.max(1, diffDays);\r\n                    })()).toLocaleString()}</span>\r\n                  </div>\r\n                  {selectedProperty.selectedMealPlan && selectedProperty.selectedMealPlan !== 'room_only' && (\r\n                    <div className=\"flex justify-between text-sm text-brand-orange\">\r\n                      <span>Meal Plan: {(() => {\r\n                        if (selectedProperty.selectedMealPlan === 'breakfast') return 'Bed & Breakfast';\r\n                        if (selectedProperty.selectedMealPlan === 'half_board') return 'Half Board';\r\n                        if (selectedProperty.selectedMealPlan === 'full_board') return 'Full Board';\r\n                        if (selectedProperty.selectedMealPlan === 'all_inclusive') return 'All Inclusive';\r\n                        return '';\r\n                      })()}</span>\r\n                      <span className=\"font-medium\">Included in price</span>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"flex justify-between text-sm border-t pt-2\">\r\n                    <span className=\"font-bold text-brand-brown\">Total Amount</span>\r\n                    <span className=\"text-2xl font-bold text-brand-orange\">R{(selectedProperty.totalPrice || (selectedProperty.pricePerNight * (() => {\r\n                      const checkInDate = new Date(checkIn);\r\n                      const checkOutDate = new Date(checkOut);\r\n                      const diffTime = Math.abs(checkOutDate - checkInDate);\r\n                      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                      return Math.max(1, diffDays);\r\n                    })())).toLocaleString()}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Terms & Conditions */}\r\n              <div className=\"border-t pt-6\">\r\n                <h3 className=\"text-lg font-bold text-brand-brown mb-3\">Terms & Conditions</h3>\r\n                <div className=\"bg-gray-50 rounded-lg p-4 space-y-3 text-sm text-gray-700\">\r\n                  <div>\r\n                    <p className=\"font-semibold text-brand-brown mb-1\">Cancellation Policy</p>\r\n                    <ul className=\"list-disc list-inside space-y-1 text-xs\">\r\n                      <li>Free cancellation up to 48 hours before check-in</li>\r\n                      <li>50% refund for cancellations 24-48 hours before check-in</li>\r\n                      <li>No refund for cancellations within 24 hours of check-in</li>\r\n                    </ul>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-semibold text-brand-brown mb-1\">Payment Terms</p>\r\n                    <ul className=\"list-disc list-inside space-y-1 text-xs\">\r\n                      <li>Full payment required at time of booking</li>\r\n                      <li>Credit card details may be required for incidentals</li>\r\n                      <li>Prices include VAT where applicable</li>\r\n                    </ul>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-semibold text-brand-brown mb-1\">Property Policies</p>\r\n                    <ul className=\"list-disc list-inside space-y-1 text-xs\">\r\n                      <li>Valid photo ID and credit card required at check-in</li>\r\n                      <li>Minimum age to check-in: 18 years</li>\r\n                      <li>Pets: Contact property for pet policy</li>\r\n                      <li>Children: All ages welcome (extra charges may apply)</li>\r\n                    </ul>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-semibold text-brand-brown mb-1\">Important Information</p>\r\n                    <ul className=\"list-disc list-inside space-y-1 text-xs\">\r\n                      <li>Please inform the property of your estimated arrival time</li>\r\n                      <li>Special requests are subject to availability and may incur additional charges</li>\r\n                      <li>This is a smoke-free property</li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Contact Information - Separated by Purpose */}\r\n              <div className=\"border-t pt-6\">\r\n                <h3 className=\"text-lg font-bold text-brand-brown mb-3\">Need Assistance?</h3>\r\n                \r\n                {/* Property Contact - For Stay-Related Questions */}\r\n                <div className=\"mb-4 bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <svg className=\"h-5 w-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\r\n                    </svg>\r\n                    <h4 className=\"font-semibold text-green-900\">During Your Stay - Contact Property Directly</h4>\r\n                  </div>\r\n                  <p className=\"text-sm text-green-800 mb-3\">For check-in, room requests, amenities, or on-site assistance:</p>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\r\n                    {selectedProperty.phone && (\r\n                      <div>\r\n                        <p className=\"text-green-700 font-medium\">Property Phone</p>\r\n                        <p className=\"font-semibold text-green-900\">{selectedProperty.phone}</p>\r\n                      </div>\r\n                    )}\r\n                    {selectedProperty.email && (\r\n                      <div>\r\n                        <p className=\"text-green-700 font-medium\">Property Email</p>\r\n                        <p className=\"font-semibold text-green-900\">{selectedProperty.email}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Zola - Primary Support */}\r\n                <div className=\"bg-orange-50 border-2 border-brand-orange rounded-lg p-4 mb-4\">\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <svg className=\"h-6 w-6 text-brand-orange\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                    </svg>\r\n                    <h4 className=\"font-semibold text-brand-brown text-lg\">Zola - 24/7 Instant Help</h4>\r\n                  </div>\r\n                  <p className=\"text-sm text-brand-brown mb-3\">\r\n                    Get instant answers about your booking, changes, cancellations, refunds, payment issues, and recommendations. \r\n                    Zola handles most requests immediately and routes complex issues to the right specialist.\r\n                  </p>\r\n                  <button \r\n                    onClick={() => {\r\n                      // Trigger AIAgent to open via custom event\r\n                      window.dispatchEvent(new CustomEvent('openAIAgent'));\r\n                      // Smooth scroll to bottom-right where AIAgent is positioned\r\n                      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });\r\n                    }}\r\n                    className=\"w-full bg-brand-orange text-white font-semibold py-3 px-4 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center gap-2\"\r\n                  >\r\n                    <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\r\n                    </svg>\r\n                    Chat with Zola Now\r\n                  </button>\r\n                  <p className=\"text-xs text-gray-600 mt-2 text-center\">\r\n                    Available 24/7 • Instant responses • Handles booking changes, queries & recommendations\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Human Support - Backup */}\r\n                <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <svg className=\"h-5 w-5 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z\" />\r\n                    </svg>\r\n                    <h4 className=\"font-medium text-gray-700 text-sm\">Need to Speak to a Specialist?</h4>\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-600 mb-3\">If Zola can&apos;t resolve your issue, you&apos;ll be connected to our team:</p>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs\">\r\n                    <div>\r\n                      <p className=\"text-gray-500\">Email Support</p>\r\n                      <p className=\"font-semibold text-gray-700\">support@colleco.co.za</p>\r\n                      <p className=\"text-xs text-gray-400\">Zola routes to specialist</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-gray-500\">Phone (Escalations)</p>\r\n                      <p className=\"font-semibold text-gray-700\">+27 31 123 4567</p>\r\n                      <p className=\"text-xs text-gray-400\">Mon-Fri: 9AM-5PM</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Property Selector Modal */}\r\n      {showPropertySelector && (\r\n        <AccommodationSelector\r\n          location={location}\r\n          checkIn={checkIn}\r\n          checkOut={checkOut}\r\n          guests={guests}\r\n          onSelectProperty={confirmPropertySelection}\r\n          onSkip={handleSkipPropertySelection}\r\n          onCancel={() => setShowPropertySelector(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n    export default function AccommodationBooking() {\r\n      return (\r\n        <ErrorBoundary>\r\n          <AccommodationBookingInner />\r\n        </ErrorBoundary>\r\n      );\r\n    }\r\n\r\n"],"names":["useState","useEffect","propertyTypes","jsx","jsxs","MapIcon","idx","useCallback","Fragment","properties"],"mappings":";;;;;;;;AA+BA,SAAwB,sBAAsB,EAAE,kBAAkB,QAAQ,UAAU,UAAU,SAAS,UAAU,UAAU;AAEzH,QAAM,CAAC,YAAY,aAAa,IAAIA,aAAAA,SAAS,CAAA,CAAE;AAC/C,QAAM,CAAC,SAAS,UAAU,IAAIA,aAAAA,SAAS,KAAK;AAC5C,QAAM,CAAC,QAAQ,SAAS,IAAIA,aAAAA,SAAS,aAAa;AAClD,QAAM,CAAC,oBAAoB,qBAAqB,IAAIA,aAAAA,SAAS,CAAA,CAAE;AAC/D,QAAM,CAAC,kBAAkB,mBAAmB,IAAIA,aAAAA,SAAS,IAAI;AAG7D,QAAM,CAAC,UAAU,WAAW,IAAIA,aAAAA,SAAS,CAAC;AAC1C,QAAM,CAAC,UAAU,WAAW,IAAIA,aAAAA,SAAS,CAAC;AAC1C,QAAM,CAAC,YAAY,aAAa,IAAIA,aAAAA,SAAS,CAAC,GAAG,GAAK,CAAC;AACvD,QAAM,CAAC,WAAW,YAAY,IAAIA,aAAAA,SAAS,CAAC;AAC5C,QAAM,CAAC,eAAe,gBAAgB,IAAIA,aAAAA,SAAS,CAAA,CAAE;AACrD,QAAM,CAAC,mBAAmB,oBAAoB,IAAIA,aAAAA,SAAS,CAAA,CAAE;AAC7D,QAAM,CAAC,kBAAkB,mBAAmB,IAAIA,aAAAA,SAAS,KAAK;AAC9D,QAAM,CAAC,mBAAmB,oBAAoB,IAAIA,aAAAA,SAAS,KAAK;AAChE,QAAM,CAAC,gBAAgB,iBAAiB,IAAIA,aAAAA,SAAS,EAAE;AACvD,QAAM,CAAC,mBAAmB,oBAAoB,IAAIA,aAAAA,SAAS,CAAA,CAAE;AAC7D,QAAM,CAAC,aAAa,cAAc,IAAIA,aAAAA,SAAS,KAAK;AAEpD,QAAM,WAAW,OAAO,aAAa;AACrC,QAAM,CAAC,UAAU,WAAW,IAAIA,aAAAA,SAAS,WAAW,SAAS,MAAM;AACnE,QAAM,CAAC,iBAAiB,kBAAkB,IAAIA,aAAAA,SAAS,IAAI;AAG3D,QAAM,oBAAoB,WACtB,wEAAwE,mBAAmB,QAAQ,CAAC,KACpG;AAEJC,eAAAA,UAAU,MAAM;AACd,UAAM,QAAQ,aAAa,QAAQ,4BAA4B;AAC/D,QAAI,OAAO;AACT,UAAI;AACF,8BAAsB,KAAK,MAAM,KAAK,CAAC;AAAA,MACzC,SAAS,GAAG;AACV,gBAAQ,MAAM,4BAA4B,CAAC;AAAA,MAC7C;AAAA,IACF;AAAA,EACF,GAAG,CAAA,CAAE;AAELA,eAAAA,UAAU,MAAM;AACd,QAAI,CAAC,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,OAAQ;AACnD,eAAW,IAAI;AAEf,UAAM,yBAAyB,MAAM;AACnC,YAAMC,iBAAgB,CAAC,SAAS,cAAc,OAAO,SAAS,UAAU,WAAW;AACnF,YAAM,gBAAgB;AAAA,QACpB;AAAA,QAAkB;AAAA,QAAuB;AAAA,QAAgB;AAAA,QACzD;AAAA,QAAgB;AAAA,QAAiB;AAAA,QAAc;AAAA,QAC/C;AAAA,QAAuB;AAAA,QAAkB;AAAA,QAAiB;AAAA,QAC1D;AAAA,QAAgB;AAAA,QAAoB;AAAA,MAAA;AAEtC,YAAM,YAAY;AAAA,QAChB;AAAA,QAA0B;AAAA,QAAqB;AAAA,QAC/C;AAAA,QAAgB;AAAA,QAAgB;AAAA,QAChC;AAAA,QAAqB;AAAA,QAAoB;AAAA,MAAA;AAE3C,YAAM,gBAAgB;AAAA,QACpB,CAAC,aAAa,QAAQ,aAAa,WAAW,cAAc,OAAO,OAAO,cAAc;AAAA,QACxF,CAAC,aAAa,QAAQ,aAAa,WAAW,OAAO,cAAc;AAAA,QACnE,CAAC,aAAa,aAAa,WAAW,UAAU,KAAK;AAAA,QACrD,CAAC,aAAa,QAAQ,aAAa,WAAW,cAAc,OAAO,cAAc;AAAA,QACjF,CAAC,aAAa,QAAQ,aAAa,WAAW,mBAAmB,iBAAiB;AAAA,QAClF,CAAC,aAAa,aAAa,WAAW,gBAAgB,WAAW,SAAS;AAAA,QAC1E,CAAC,aAAa,QAAQ,OAAO,cAAc,OAAO,gBAAgB,cAAc;AAAA,MAAA;AAGlF,YAAM,YAAY;AAClB,YAAM,cAAc,IAAI,KAAK,OAAO;AACpC,YAAM,eAAe,IAAI,KAAK,QAAQ;AACtC,YAAM,SAAS,KAAK,IAAI,GAAG,KAAK,MAAM,eAAe,gBAAgB,MAAO,KAAK,KAAK,GAAG,CAAC;AAC1F,YAAM,gBAAgB,KAAK,KAAK,MAAM,KAAK,OAAA,IAAW,CAAC;AAEvD,aAAO,MAAM,KAAK,EAAE,QAAQ,iBAAiB,CAAC,GAAG,UAAU;AACzD,cAAM,QAAQ,IAAI,KAAK,MAAM,KAAK,OAAA,IAAW,CAAC;AAC9C,cAAM,OAAOA,eAAc,QAAQA,eAAc,MAAM;AACvD,cAAM,OAAO,cAAc,QAAQ,cAAc,MAAM;AACvD,cAAM,UAAU,UAAU,QAAQ,UAAU,MAAM;AAClD,cAAM,YAAY,cAAc,QAAQ,cAAc,MAAM;AAE5D,YAAI,kBAAkB,MAAO,QAAQ,IAAK;AAC1C,YAAI,SAAS,YAAY,SAAS,QAAS,oBAAmB;AAC9D,YAAI,UAAU,SAAS,KAAK,EAAG,oBAAmB;AAClD,YAAI,UAAU,SAAS,cAAc,EAAG,oBAAmB;AAC3D,2BAAoB,KAAK,OAAA,IAAW,MAAM;AAE1C,cAAM,gBAAgB,KAAK,MAAM,YAAY,kBAAkB,EAAE,IAAI;AACrE,cAAM,aAAa,gBAAgB;AACnC,cAAM,SAAS,MAAM,KAAK,OAAA,IAAW;AACrC,cAAM,cAAc,KAAK,KAAK,MAAM,KAAK,OAAA,IAAW,GAAG;AACvD,cAAM,aAAa,MAAM,KAAK,OAAA,IAAW;AAEzC,cAAM,YAAY,UAAU,KAAK,UAAU;AAC3C,cAAM,cAAc,KAAK,OAAA,IAAW;AACpC,cAAM,YAAY,cAAc,OAAO,UAAU;AACjD,cAAM,sBAAsB,KAAK,OAAA,IAAW;AAC5C,cAAM,eAAe,UAAU,SAAS,WAAW;AAGnD,cAAM,qBAAqB,CAAC,WAAW;AACvC,YAAI,SAAS,EAAG,oBAAmB,KAAK,WAAW;AACnD,YAAI,SAAS,MAAM,SAAS,WAAW,SAAS,YAAY,SAAS,UAAU;AAC7E,6BAAmB,KAAK,YAAY;AAAA,QACtC;AACA,YAAI,SAAS,MAAM,SAAS,WAAW,SAAS,WAAW;AACzD,6BAAmB,KAAK,YAAY;AAAA,QACtC;AACA,YAAI,UAAU,KAAK,SAAS,UAAU;AACpC,6BAAmB,KAAK,eAAe;AAAA,QACzC;AAGA,cAAM,aAAa,EAAE,KAAK,UAAU,KAAK,QAAA;AACzC,cAAM,aAAa,KAAK,OAAA,IAAW,OAAO;AAC1C,cAAM,aAAa,KAAK,OAAA,IAAW,OAAO;AAE1C,eAAO;AAAA,UACL,IAAI,QAAQ,KAAK,IAAA,CAAK,IAAI,KAAK;AAAA,UAC/B;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA,QAAQ,OAAO,OAAO,QAAQ,CAAC,CAAC;AAAA,UAChC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA,YAAY,OAAO,WAAW,QAAQ,CAAC,CAAC;AAAA,UACxC,UAAU;AAAA,UACV;AAAA,UACA;AAAA,UACA;AAAA,UACA,gBAAgB,IAAI,KAAK,MAAM,KAAK,OAAA,IAAW,CAAC;AAAA,UAChD,sBAAsB,KAAK,OAAA,IAAW,MAAM,KAAK,MAAM,KAAK,WAAW,GAAG,IAAI;AAAA,UAC9E,aAAa;AAAA,YACX,KAAK,WAAW,MAAM;AAAA,YACtB,KAAK,WAAW,MAAM;AAAA,UAAA;AAAA,QACxB;AAAA,MAEJ,CAAC;AAAA,IACH;AAEA,UAAM,WAAW,0BAAkB,2BAA2B,SAAS;AAEvE,UAAM,2CAA2C;AAAA,MAC/C,QAAQ;AAAA,MACR,SAAS,EAAE,gBAAgB,mBAAA;AAAA,MAC3B,MAAM,KAAK,UAAU,EAAE,UAAU,SAAS,UAAU,QAAQ;AAAA,IAAA,CAC7D,EACE,KAAK,SAAO,IAAI,KAAK,IAAI,KAAA,IAAS,QAAQ,OAAO,IAAI,MAAM,YAAY,CAAC,CAAC,EACzE,KAAK,CAAA,SAAQ;AACZ,YAAM,QAAQ,KAAK,cAAc,CAAA;AACjC,YAAM,aAAa,MAAM,SAAS,QAAS,UAAU,uBAAA,IAA2B,CAAA;AAChF,oBAAc,UAAU;AAExB,UAAI,WAAW,QAAQ;AACrB,cAAM,SAAS,WAAW,IAAI,CAAA,MAAK,EAAE,aAAa;AAClD,sBAAc,CAAC,KAAK,IAAI,GAAG,MAAM,GAAG,KAAK,IAAI,GAAG,MAAM,CAAC,CAAC;AAAA,MAC1D;AAAA,IACF,CAAC,EACA,MAAM,MAAM;AACX,YAAM,YAAY,UAAU,uBAAA,IAA2B,CAAA;AACvD,oBAAc,SAAS;AACvB,UAAI,UAAU,QAAQ;AACpB,cAAM,SAAS,UAAU,IAAI,CAAA,MAAK,EAAE,aAAa;AACjD,sBAAc,CAAC,KAAK,IAAI,GAAG,MAAM,GAAG,KAAK,IAAI,GAAG,MAAM,CAAC,CAAC;AAAA,MAC1D;AAAA,IACF,CAAC,EACA,QAAQ,MAAM,WAAW,KAAK,CAAC;AAAA,EACpC,GAAG,CAAC,UAAU,SAAS,UAAU,MAAM,CAAC;AAExC,QAAM,iBAAiB,CAAC,eAAe;AACrC,UAAM,UAAU,mBAAmB,SAAS,UAAU,IAClD,mBAAmB,OAAO,CAAA,OAAM,OAAO,UAAU,IACjD,CAAC,GAAG,oBAAoB,UAAU;AACtC,0BAAsB,OAAO;AAC7B,iBAAa,QAAQ,8BAA8B,KAAK,UAAU,OAAO,CAAC;AAAA,EAC5E;AAEA,QAAM,iCAAiC,MAAM;AAC3C,QAAI,WAAW,CAAC,GAAG,UAAU;AAG7B,QAAI,WAAW,EAAG,YAAW,SAAS,OAAO,CAAA,MAAK,EAAE,SAAS,QAAQ;AACrE,QAAI,WAAW,EAAG,YAAW,SAAS,OAAO,CAAA,MAAK,EAAE,SAAS,QAAQ;AACrE,QAAI,YAAY,EAAG,YAAW,SAAS,OAAO,CAAA,MAAK,EAAE,UAAU,SAAS;AACxE,QAAI,cAAc,SAAS,EAAG,YAAW,SAAS,OAAO,CAAA,MAAK,cAAc,SAAS,EAAE,IAAI,CAAC;AAC5F,QAAI,kBAAkB,SAAS,GAAG;AAChC,iBAAW,SAAS;AAAA,QAAO,CAAA,MACzB,kBAAkB,MAAM,CAAA,OAAM,EAAE,aAAa,CAAA,GAAI,SAAS,CAAC,CAAC;AAAA,MAAA;AAAA,IAEhE;AACA,QAAI,iBAAkB,YAAW,SAAS,OAAO,CAAA,MAAK,EAAE,mBAAmB;AAC3E,QAAI,kBAAmB,YAAW,SAAS,OAAO,CAAA,MAAK,EAAE,YAAY;AACrE,QAAI,gBAAgB;AAClB,iBAAW,SAAS;AAAA,QAAO,OACzB,EAAE,sBAAsB,EAAE,mBAAmB,SAAS,cAAc;AAAA,MAAA;AAAA,IAExE;AAGA,eAAW,SAAS;AAAA,MAAO,CAAA,MACzB,EAAE,iBAAiB,WAAW,CAAC,KAAK,EAAE,iBAAiB,WAAW,CAAC;AAAA,IAAA;AAIrE,YAAQ,QAAA;AAAA,MACN,KAAK;AACH,iBAAS,KAAK,CAAC,GAAG,MAAM,EAAE,gBAAgB,EAAE,aAAa;AACzD;AAAA,MACF,KAAK;AACH,iBAAS,KAAK,CAAC,GAAG,MAAM,EAAE,gBAAgB,EAAE,aAAa;AACzD;AAAA,MACF,KAAK;AACH,iBAAS,KAAK,CAAC,GAAG,MAAM,EAAE,SAAS,EAAE,MAAM;AAC3C;AAAA,MACF,KAAK;AACH,iBAAS,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AACzC;AAAA,MACF,KAAK;AACH,iBAAS,KAAK,CAAC,GAAG,OAAO,EAAE,cAAc,QAAQ,EAAE,cAAc,IAAI;AACrE;AAAA,MACF,KAAK;AAAA,MACL;AAEE,iBAAS,KAAK,CAAC,GAAG,MAAM;AACtB,gBAAM,SAAU,EAAE,SAAS,IAAI,KAAO,EAAE,QAAQ,IAAI,KACrC,KAAK,IAAI,EAAE,cAAc,KAAM,CAAC,IAAI,MACpC,IAAK,EAAE,gBAAgB,OAAU;AAChD,gBAAM,SAAU,EAAE,SAAS,IAAI,KAAO,EAAE,QAAQ,IAAI,KACrC,KAAK,IAAI,EAAE,cAAc,KAAM,CAAC,IAAI,MACpC,IAAK,EAAE,gBAAgB,OAAU;AAChD,iBAAO,SAAS;AAAA,QAClB,CAAC;AAAA,IAAA;AAGL,WAAO;AAAA,EACT;AAEA,QAAM,eAAe,MAAM;AACzB,gBAAY,CAAC;AACb,gBAAY,CAAC;AACb,iBAAa,CAAC;AACd,qBAAiB,CAAA,CAAE;AACnB,yBAAqB,CAAA,CAAE;AACvB,wBAAoB,KAAK;AACzB,yBAAqB,KAAK;AAC1B,sBAAkB,EAAE;AACpB,QAAI,WAAW,QAAQ;AACN,iBAAW,IAAI,CAAA,MAAK,EAAE,aAAa;AAClD,oBAAc,CAAC,KAAK,IAAI,GAAG,WAAW,IAAI,CAAA,MAAK,EAAE,aAAa,CAAC,GAAG,KAAK,IAAI,GAAG,WAAW,IAAI,OAAK,EAAE,aAAa,CAAC,CAAC,CAAC;AAAA,IACtH;AAAA,EACF;AAEA,QAAM,uBAAuB,MAAM;AACjC,QAAI,QAAQ;AACZ,QAAI,WAAW,EAAG;AAClB,QAAI,WAAW,EAAG;AAClB,QAAI,YAAY,EAAG;AACnB,QAAI,cAAc,SAAS,EAAG;AAC9B,QAAI,kBAAkB,SAAS,EAAG;AAClC,QAAI,iBAAkB;AACtB,QAAI,kBAAmB;AACvB,QAAI,eAAgB;AACpB,WAAO;AAAA,EACT;AAEA,QAAM,iBAAiB,CAAC,WAAW,IAAI,OAAO,gBAAgB;AAE9D,QAAM,iBAAiB,CAAC,WAAW;AACjC,QAAI,UAAU,IAAK,QAAO;AAC1B,QAAI,UAAU,EAAK,QAAO;AAC1B,QAAI,UAAU,IAAK,QAAO;AAC1B,QAAI,UAAU,EAAK,QAAO;AAC1B,WAAO;AAAA,EACT;AAEA,QAAM,mBAAmB,CAAC,SAAS;AACjC,UAAM,SAAS;AAAA,MACb,aAAa;AAAA,MACb,aAAa;AAAA,MACb,cAAc;AAAA,MACd,cAAc;AAAA,MACd,iBAAiB;AAAA,IAAA;AAEnB,WAAO,OAAO,IAAI,KAAK;AAAA,EACzB;AAEA,QAAM,mBAAmB,CAAC,WAAW,SAAS;AAC5C,UAAM,cAAc;AAAA,MAClB,aAAa;AAAA,MACb,aAAa;AAAA,MACb,cAAc;AAAA,MACd,cAAc;AAAA,MACd,iBAAiB;AAAA,IAAA;AAEnB,WAAO,KAAK,MAAM,aAAa,YAAY,IAAI,KAAK,KAAO,EAAE,IAAI;AAAA,EACnE;AAEA,QAAM,iBAAiB,CAAC,YAAY;AAClC,UAAM,QAAQ,QAAQ,YAAA;AACtB,QAAI,MAAM,SAAS,MAAM,gDAAW,MAAA,EAAK,WAAU,WAAU;AAC7D,QAAI,MAAM,SAAS,MAAM,gDAAW,OAAA,EAAM,WAAU,WAAU;AAC9D,QAAI,MAAM,SAAS,WAAW,KAAK,MAAM,SAAS,YAAY,EAAG,QAAOC,kCAAAA,IAAC,UAAA,EAAS,WAAU,WAAU;AACtG,QAAI,MAAM,SAAS,SAAS,gDAAW,eAAA,EAAc,WAAU,WAAU;AACzE,QAAI,MAAM,SAAS,KAAK,gDAAW,UAAA,EAAS,WAAU,WAAU;AAChE,QAAI,MAAM,SAAS,QAAQ,KAAK,MAAM,SAAS,KAAK,EAAG,QAAOA,kCAAAA,IAAC,QAAA,EAAO,WAAU,WAAU;AAC1F,WAAOA,kCAAAA,IAAC,cAAA,EAAa,WAAU,WAAU;AAAA,EAC3C;AAEA,QAAM,qBAAqB,+BAAA;AAC3B,QAAM,gBAAgB,qBAAA;AAEtB,QAAM,gBAAgB,0BAAkB,2BAA2B,SAAS,8CACzE,OAAA,EAAI,WAAU,+EACb,UAAA;AAAA,IAAAA,kCAAAA,IAAC,UAAA,EAAS,WAAU,uBAAsB;AAAA,IAAE;AAAA,EAAA,GAE9C;AAGF,+CACG,OAAA,EAAI,WAAU,0EACb,UAAAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,8EAEb,UAAA;AAAA,IAAAD,kCAAAA,IAAC,SAAI,WAAU,wEACb,UAAAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,yCACb,UAAA;AAAA,MAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,8CAAC,MAAA,EAAG,WAAU,sCAAqC,UAAA,0BAAsB;AAAA,QACzEA,kCAAAA,KAAC,OAAA,EAAI,WAAU,2DACb,UAAA;AAAA,UAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,QAAA,EAAO,WAAU,WAAU;AAAA,YAC5BA,kCAAAA,IAAC,UAAM,UAAA,UAAS;AAAA,UAAA,GAClB;AAAA,UACAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,UAAA,EAAS,WAAU,WAAU;AAAA,mDAC7B,QAAA,EAAM,UAAA;AAAA,cAAA;AAAA,cAAQ;AAAA,cAAI;AAAA,YAAA,GAAS;AAAA,UAAA,GAC9B;AAAA,UACAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,OAAA,EAAM,WAAU,WAAU;AAAA,mDAC1B,QAAA,EAAM,UAAA;AAAA,cAAA;AAAA,cAAO;AAAA,cAAO,WAAW,IAAI,MAAM;AAAA,YAAA,GAAG;AAAA,UAAA,GAC/C;AAAA,QAAA,GACF;AAAA,MAAA,GACF;AAAA,MACAA,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UACC,SAAS;AAAA,UACT,WAAU;AAAA,UACV,OAAM;AAAA,UAEN,UAAAA,kCAAAA,IAAC,GAAA,EAAE,WAAU,WAAU;AAAA,QAAA;AAAA,MAAA;AAAA,IACzB,EAAA,CACF,EAAA,CACF;AAAA,IAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,kCAEb,UAAA;AAAA,MAAAD,kCAAAA,IAAC,SAAI,WAAU,kEACb,UAAAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,2CACb,UAAA;AAAA,QAAAA,kCAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS,MAAM,eAAe,CAAC,WAAW;AAAA,YAC1C,WAAW,gFACX,eAAe,gBAAgB,IAC3B,mDACA,oDACN;AAAA,YAEA,UAAA;AAAA,cAAAD,kCAAAA,IAAC,mBAAA,EAAkB,WAAU,WAAU;AAAA,oDACtC,QAAA,EAAK,WAAU,eAAc,UAAA,WAAO;AAAA,cACpC,gBAAgB,KACfA,kCAAAA,IAAC,QAAA,EAAK,WAAU,yEACb,UAAA,cAAA,CACH;AAAA,YAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAIFC,kCAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,YACP,UAAU,CAAC,MAAM,UAAU,EAAE,OAAO,KAAK;AAAA,YACzC,WAAU;AAAA,YAEV,UAAA;AAAA,oDAAC,UAAA,EAAO,OAAM,eAAc,UAAA,eAAW;AAAA,oDACtC,UAAA,EAAO,OAAM,aAAY,UAAA,sBAAkB;AAAA,oDAC3C,UAAA,EAAO,OAAM,cAAa,UAAA,sBAAkB;AAAA,oDAC5C,UAAA,EAAO,OAAM,UAAS,UAAA,iBAAa;AAAA,oDACnC,UAAA,EAAO,OAAM,SAAQ,UAAA,cAAU;AAAA,oDAC/B,UAAA,EAAO,OAAM,YAAW,UAAA,iBAAa;AAAA,YAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MACxC,EAAA,CACF,EAAA,CACF;AAAA,MAGAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,2CACb,UAAA;AAAA,QAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,sCACb,UAAA;AAAA,UAAAD,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,SAAS,MAAM,YAAY,MAAM;AAAA,cACjC,WAAW,oCACT,aAAa,SAAS,+BAA+B,6CACvD;AAAA,cACA,OAAM;AAAA,cAEN,UAAAA,kCAAAA,IAAC,MAAA,EAAK,WAAU,WAAU;AAAA,YAAA;AAAA,UAAA;AAAA,UAE5BA,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,SAAS,MAAM,YAAY,MAAM;AAAA,cACjC,WAAW,oCACT,aAAa,SAAS,+BAA+B,6CACvD;AAAA,cACA,OAAM;AAAA,cAEN,UAAAA,kCAAAA,IAAC,MAAA,EAAK,WAAU,WAAU;AAAA,YAAA;AAAA,UAAA;AAAA,UAE5BA,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,SAAS,MAAM,YAAY,KAAK;AAAA,cAChC,WAAW,oCACT,aAAa,QAAQ,+BAA+B,6CACtD;AAAA,cACA,OAAM;AAAA,cAEN,UAAAA,kCAAAA,IAACE,KAAA,EAAQ,WAAU,WAAU;AAAA,YAAA;AAAA,UAAA;AAAA,QAC/B,GACF;AAAA,QAEAD,kCAAAA,KAAC,QAAA,EAAK,WAAU,oCACb,UAAA;AAAA,UAAA,mBAAmB;AAAA,UAAO;AAAA,UAAK,WAAW;AAAA,QAAA,GAC7C;AAAA,MAAA,GACF;AAAA,IAAA,GACF;AAAA,IAGC,eACCA,kCAAAA,KAAC,OAAA,EAAI,WAAU,mCACb,UAAA;AAAA,MAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,wDAEb,UAAA;AAAA,QAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,gDAAC,SAAA,EAAM,WAAU,kDAAiD,UAAA,eAAW;AAAA,UAC7ED,kCAAAA,IAAC,OAAA,EAAI,WAAU,cACZ,UAAA,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,CAAA,SACbC,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cAEC,SAAS,MAAM,YAAY,aAAa,OAAO,IAAI,IAAI;AAAA,cACvD,WAAW,gDACT,aAAa,OACT,mDACA,oDACN;AAAA,cAEC,UAAA;AAAA,gBAAA;AAAA,gBAAK;AAAA,cAAA;AAAA,YAAA;AAAA,YARD;AAAA,UAAA,CAUR,GACH;AAAA,QAAA,GACF;AAAA,+CAGC,OAAA,EACC,UAAA;AAAA,gDAAC,SAAA,EAAM,WAAU,kDAAiD,UAAA,gBAAY;AAAA,UAC9ED,kCAAAA,IAAC,OAAA,EAAI,WAAU,cACZ,UAAA,CAAC,GAAG,KAAK,GAAK,GAAG,EAAE,IAAI,CAAA,WACtBA,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cAEC,SAAS,MAAM,aAAa,cAAc,SAAS,IAAI,MAAM;AAAA,cAC7D,WAAW,wDACT,cAAc,SACV,mDACA,oDACN;AAAA,cAEC,UAAA,WAAW,IAAI,QAAQ,GAAG,MAAM;AAAA,YAAA;AAAA,YAR5B;AAAA,UAAA,CAUR,GACH;AAAA,QAAA,GACF;AAAA,+CAGC,OAAA,EACC,UAAA;AAAA,gDAAC,SAAA,EAAM,WAAU,kDAAiD,UAAA,iBAAa;AAAA,UAC/EA,kCAAAA,IAAC,OAAA,EAAI,WAAU,wBACZ,UAAA,CAAC,SAAS,UAAU,cAAc,KAAK,EAAE,IAAI,CAAA,SAC5CA,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cAEC,SAAS,MAAM;AAAA,gBAAiB,CAAA,SAC9B,KAAK,SAAS,IAAI,IAAI,KAAK,OAAO,CAAA,MAAK,MAAM,IAAI,IAAI,CAAC,GAAG,MAAM,IAAI;AAAA,cAAA;AAAA,cAErE,WAAW,wDACT,cAAc,SAAS,IAAI,IACvB,mDACA,oDACN;AAAA,cAEC,UAAA;AAAA,YAAA;AAAA,YAVI;AAAA,UAAA,CAYR,GACH;AAAA,QAAA,GACF;AAAA,+CAGC,OAAA,EACC,UAAA;AAAA,gDAAC,SAAA,EAAM,WAAU,kDAAiD,UAAA,aAAS;AAAA,UAC3EC,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,CAAA,MAAK,kBAAkB,EAAE,OAAO,KAAK;AAAA,cAC/C,WAAU;AAAA,cAEV,UAAA;AAAA,sDAAC,UAAA,EAAO,OAAM,IAAG,UAAA,iBAAa;AAAA,sDAC7B,UAAA,EAAO,OAAM,aAAY,UAAA,aAAS;AAAA,sDAClC,UAAA,EAAO,OAAM,aAAY,UAAA,mBAAe;AAAA,sDACxC,UAAA,EAAO,OAAM,cAAa,UAAA,mCAA+B;AAAA,sDACzD,UAAA,EAAO,OAAM,cAAa,UAAA,0BAAsB;AAAA,sDAChD,UAAA,EAAO,OAAM,iBAAgB,UAAA,iBAAa;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,QAC7C,GACF;AAAA,+CAGC,OAAA,EACC,UAAA;AAAA,gDAAC,SAAA,EAAM,WAAU,kDAAiD,UAAA,iBAAa;AAAA,UAC/EA,kCAAAA,KAAC,OAAA,EAAI,WAAU,aACb,UAAA;AAAA,YAAAA,kCAAAA,KAAC,SAAA,EAAM,WAAU,0CACf,UAAA;AAAA,cAAAD,kCAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,MAAK;AAAA,kBACL,SAAS;AAAA,kBACT,UAAU,CAAA,MAAK,oBAAoB,EAAE,OAAO,OAAO;AAAA,kBACnD,WAAU;AAAA,gBAAA;AAAA,cAAA;AAAA,oDAEX,QAAA,EAAK,WAAU,WAAU,UAAA,qBAAiB;AAAA,YAAA,GAC7C;AAAA,YACAC,kCAAAA,KAAC,SAAA,EAAM,WAAU,0CACf,UAAA;AAAA,cAAAD,kCAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,MAAK;AAAA,kBACL,SAAS;AAAA,kBACT,UAAU,CAAA,MAAK,qBAAqB,EAAE,OAAO,OAAO;AAAA,kBACpD,WAAU;AAAA,gBAAA;AAAA,cAAA;AAAA,oDAEX,QAAA,EAAK,WAAU,WAAU,UAAA,sBAAkB;AAAA,YAAA,GAC9C;AAAA,UAAA,GACF;AAAA,QAAA,GACF;AAAA,MAAA,GACF;AAAA,MAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,QACb,UAAA;AAAA,8CAAC,SAAA,EAAM,WAAU,kDAAiD,UAAA,aAAS;AAAA,8CAC1E,OAAA,EAAI,WAAU,wBACZ,WAAC,aAAa,QAAQ,aAAa,WAAW,OAAO,OAAO,cAAc,cAAc,EAAE,IAAI,CAAA,YAC7FA,kCAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YAEC,SAAS,MAAM;AAAA,cAAqB,CAAA,SAClC,KAAK,SAAS,OAAO,IAAI,KAAK,OAAO,CAAA,MAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM,OAAO;AAAA,YAAA;AAAA,YAE9E,WAAW,8EACT,kBAAkB,SAAS,OAAO,IAC9B,mDACA,oDACN;AAAA,YAEC,UAAA;AAAA,cAAA,eAAe,OAAO;AAAA,cACtB;AAAA,YAAA;AAAA,UAAA;AAAA,UAXI;AAAA,QAAA,CAaR,GACH;AAAA,MAAA,GACF;AAAA,MAGAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,QACb,UAAA;AAAA,QAAAA,kCAAAA,KAAC,SAAA,EAAM,WAAU,kDAAiD,UAAA;AAAA,UAAA;AAAA,UAC9C,eAAe,WAAW,CAAC,CAAC;AAAA,UAAE;AAAA,UAAI,eAAe,WAAW,CAAC,CAAC;AAAA,QAAA,GAClF;AAAA,QACAD,kCAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,KAAK,WAAW,SAAS,KAAK,IAAI,GAAG,WAAW,IAAI,CAAA,MAAK,EAAE,aAAa,CAAC,IAAI;AAAA,YAC7E,KAAK,WAAW,SAAS,KAAK,IAAI,GAAG,WAAW,IAAI,CAAA,MAAK,EAAE,aAAa,CAAC,IAAI;AAAA,YAC7E,OAAO,WAAW,CAAC;AAAA,YACnB,UAAU,CAAA,MAAK,cAAc,CAAC,WAAW,CAAC,GAAG,OAAO,EAAE,OAAO,KAAK,CAAC,CAAC;AAAA,YACpE,WAAU;AAAA,UAAA;AAAA,QAAA;AAAA,MACZ,GACF;AAAA,MAEC,gBAAgB,KACfA,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UACC,SAAS;AAAA,UACT,WAAU;AAAA,UACX,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,IAED,GAEJ;AAAA,IAIFC,kCAAAA,KAAC,OAAA,EAAI,WAAU,6CACZ,UAAA;AAAA,MAAA;AAAA,MAEA,UACCD,kCAAAA,IAAC,OAAA,EAAI,WAAU,0CACb,gDAAC,OAAA,EAAI,WAAU,wFAAA,CAAwF,GACzG,IACE,mBAAmB,WAAW,2CAC/B,OAAA,EAAI,WAAU,qBACb,UAAA;AAAA,QAAAA,kCAAAA,IAAC,MAAA,EAAK,WAAU,wCAAuC;AAAA,8CACtD,MAAA,EAAG,WAAU,4CAA2C,UAAA,uBAAmB;AAAA,8CAC3E,KAAA,EAAE,WAAU,sBAAqB,UAAA,iDAA6C;AAAA,QAC/EC,kCAAAA,KAAC,OAAA,EAAI,WAAU,uCACZ,UAAA;AAAA,UAAA,gBAAgB,KACfD,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,SAAS;AAAA,cACT,WAAU;AAAA,cACX,UAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAIF,qBACCA,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAM;AAAA,cACN,QAAO;AAAA,cACP,KAAI;AAAA,cACJ,WAAU;AAAA,cACX,UAAA;AAAA,YAAA;AAAA,UAAA;AAAA,QAED,GAEJ;AAAA,MAAA,GACF,IACE,aAAa,+CACd,OAAA,EAAI,WAAU,4EACb,UAAA;AAAA,QAAAA,kCAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,KAAK,mDAA+F,MAAM,gBAAgB,mBAAmB,QAAQ,CAAC;AAAA,YACtJ,WAAU;AAAA,YACV,OAAO,EAAE,QAAQ,GAAG,WAAW,QAAA;AAAA,YAC/B,iBAAe;AAAA,YACf,SAAQ;AAAA,YACR,gBAAe;AAAA,YACf,OAAM;AAAA,UAAA;AAAA,QAAA;AAAA,8CAIP,OAAA,EAAI,WAAU,yCACb,UAAAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,+DACb,UAAA;AAAA,UAAAA,kCAAAA,KAAC,MAAA,EAAG,WAAU,mEACZ,UAAA;AAAA,YAAAD,kCAAAA,IAAC,QAAA,EAAO,WAAU,6BAA4B;AAAA,YAC7C,mBAAmB;AAAA,YAAO;AAAA,UAAA,GAC7B;AAAA,UACAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,aACZ,UAAA;AAAA,YAAA,mBAAmB,MAAM,GAAG,CAAC,EAAE,IAAI,CAAA,aAClCD,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBAEC,WAAW,uDACT,kBAAkB,OAAO,SAAS,KAC9B,qCACA,4DACN;AAAA,gBACA,SAAS,MAAM,oBAAoB,QAAQ;AAAA,gBAC3C,cAAc,MAAM,mBAAmB,SAAS,EAAE;AAAA,gBAClD,cAAc,MAAM,mBAAmB,IAAI;AAAA,gBAE3C,UAAAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,0CACb,UAAA;AAAA,kBAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,kBACb,UAAA;AAAA,oBAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,mDAAmD,UAAA,SAAS,MAAK;AAAA,oBAC/EC,kCAAAA,KAAC,OAAA,EAAI,WAAU,gCACb,UAAA;AAAA,sBAAAD,kCAAAA,IAAC,OAAA,EAAI,WAAU,qBACZ,UAAA,MAAM,KAAK,EAAE,QAAQ,SAAS,MAAA,CAAO,EAAE,IAAI,CAAC,GAAG,MAC9CA,sCAAC,QAAa,WAAU,uCAAA,GAAb,CAAoD,CAChE,EAAA,CACH;AAAA,4DACC,QAAA,EAAK,WAAU,yBAAwB,UAAA,KAAC;AAAA,sBACzCC,kCAAAA,KAAC,OAAA,EAAI,WAAU,mCACb,UAAA;AAAA,wBAAAD,kCAAAA,IAAC,UAAK,WAAU,mCAAmC,mBAAS,OAAO,QAAQ,CAAC,GAAE;AAAA,wBAC9EC,kCAAAA,KAAC,QAAA,EAAK,WAAU,iBAAgB,UAAA;AAAA,0BAAA;AAAA,0BAAE,SAAS;AAAA,0BAAY;AAAA,wBAAA,GAAC;AAAA,sBAAA,GAC1D;AAAA,oBAAA,GACF;AAAA,oBACAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,sDACb,UAAA;AAAA,sBAAAD,kCAAAA,IAAC,QAAA,EAAO,WAAU,WAAU;AAAA,6DAC3B,QAAA,EAAM,UAAA;AAAA,wBAAA,SAAS;AAAA,wBAAW;AAAA,sBAAA,GAAQ;AAAA,oBAAA,GACrC;AAAA,kBAAA,GACF;AAAA,kBACAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,4BACb,UAAA;AAAA,oBAAAD,sCAAC,SAAI,WAAU,uCACZ,UAAA,eAAe,SAAS,aAAa,GACxC;AAAA,0DACC,OAAA,EAAI,WAAU,yBAAwB,UAAA,UAAM;AAAA,kBAAA,GAC/C;AAAA,gBAAA,GACF;AAAA,cAAA;AAAA,cApCK,SAAS;AAAA,YAAA,CAsCjB;AAAA,YACA,mBAAmB,SAAS,KAC3BC,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,SAAS,MAAM,YAAY,MAAM;AAAA,gBACjC,WAAU;AAAA,gBACX,UAAA;AAAA,kBAAA;AAAA,kBACW,mBAAmB;AAAA,kBAAO;AAAA,gBAAA;AAAA,cAAA;AAAA,YAAA;AAAA,UACtC,GAEJ;AAAA,QAAA,EAAA,CACF,EAAA,CACF;AAAA,MAAA,GACF,IAEAD,kCAAAA,IAAC,OAAA,EAAI,WAAW,aAAa,SACzB,yDACA,aAED,UAAA,mBAAmB,IAAI,CAAC,UAAU,QACjCC,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UAEC,UAAU;AAAA,UACV,WAAW,8DACT,kBAAkB,OAAO,SAAS,KAC9B,kCACA,2DACN,IAAI,aAAa,SAAS,mBAAmB,KAAK;AAAA,UAClD,SAAS,MAAM,oBAAoB,QAAQ;AAAA,UAC3C,WAAW,CAAC,MAAM;AAChB,gBAAI,EAAE,QAAQ,WAAW,EAAE,QAAQ,KAAK;AACtC,gBAAE,eAAA;AACF,kCAAoB,QAAQ;AAAA,YAC9B;AAAA,UACF;AAAA,UAGA,UAAA;AAAA,YAAAD,kCAAAA,IAAC,SAAI,WAAW,wEACd,aAAa,SAAS,cAAc,kBACtC,IACE,UAAAA,kCAAAA,IAAC,OAAA,EAAI,WAAU,kDACb,UAAAA,kCAAAA,IAAC,QAAK,WAAU,2BAA0B,EAAA,CAC5C,EAAA,CACF;AAAA,YAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,wBACb,UAAA;AAAA,cAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,yCACb,UAAA;AAAA,gBAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,UACb,UAAA;AAAA,kBAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,gCACb,UAAA;AAAA,oBAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,sCAAsC,UAAA,SAAS,MAAK;AAAA,oBACjE,SAAS,aACRA,kCAAAA,IAAC,SAAM,WAAU,2BAA0B,OAAM,mBAAA,CAAmB;AAAA,kBAAA,GAExE;AAAA,kBACAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA8B,mBAAS,MAAK;AAAA,kBACzDC,kCAAAA,KAAC,OAAA,EAAI,WAAU,gCACb,UAAA;AAAA,oBAAAD,kCAAAA,IAAC,OAAA,EAAI,WAAU,qBACZ,UAAA,MAAM,KAAK,EAAE,QAAQ,SAAS,MAAA,CAAO,EAAE,IAAI,CAAC,GAAG,MAC9CA,sCAAC,QAAa,WAAU,uCAAA,GAAb,CAAoD,CAChE,EAAA,CACH;AAAA,0DACC,QAAA,EAAK,WAAU,yBAAwB,UAAA,KAAC;AAAA,oBACzCA,kCAAAA,IAAC,QAAA,EAAO,WAAU,yBAAwB;AAAA,oBAC1CC,kCAAAA,KAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA;AAAA,sBAAA,SAAS;AAAA,sBAAW;AAAA,oBAAA,GAAe;AAAA,kBAAA,GAC9E;AAAA,gBAAA,GACF;AAAA,gBACAD,kCAAAA;AAAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,SAAS,CAAC,MAAM;AACd,wBAAE,gBAAA;AACF,qCAAe,SAAS,EAAE;AAAA,oBAC5B;AAAA,oBACA,WAAU;AAAA,oBAEV,UAAAA,kCAAAA;AAAAA,sBAAC;AAAA,sBAAA;AAAA,wBACC,WAAW,WACT,mBAAmB,SAAS,SAAS,EAAE,IACnC,8BACA,eACN;AAAA,sBAAA;AAAA,oBAAA;AAAA,kBACF;AAAA,gBAAA;AAAA,cACF,GACF;AAAA,cAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,gCACb,UAAA;AAAA,sDAAC,OAAA,EAAI,WAAU,2EACb,gDAAC,QAAA,EAAK,WAAU,aAAa,UAAA,SAAS,OAAO,QAAQ,CAAC,EAAA,CAAE,GAC1D;AAAA,uDACC,OAAA,EACC,UAAA;AAAA,kBAAAD,sCAAC,SAAI,WAAU,uCAAuC,UAAA,eAAe,SAAS,MAAM,GAAE;AAAA,kBACtFC,kCAAAA,KAAC,OAAA,EAAI,WAAU,yBAAyB,UAAA;AAAA,oBAAA,SAAS;AAAA,oBAAY;AAAA,kBAAA,GAAQ;AAAA,gBAAA,GACvE;AAAA,cAAA,GACF;AAAA,cAGAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,6BACZ,UAAA;AAAA,gBAAA,SAAS,UAAU,MAAM,GAAG,aAAa,SAAS,IAAI,CAAC,EAAE,IAAI,CAAC,SAASE,SACtEF,kCAAAA;AAAAA,kBAAC;AAAA,kBAAA;AAAA,oBAEC,WAAU;AAAA,oBAET,UAAA;AAAA,sBAAA,eAAe,OAAO;AAAA,sBACtB;AAAA,oBAAA;AAAA,kBAAA;AAAA,kBAJIE;AAAAA,gBAAAA,CAMR;AAAA,gBACA,SAAS,UAAU,UAAU,aAAa,SAAS,IAAI,MACtDF,kCAAAA,KAAC,QAAA,EAAK,WAAU,mCAAkC,UAAA;AAAA,kBAAA;AAAA,kBAC9C,SAAS,UAAU,UAAU,aAAa,SAAS,IAAI;AAAA,kBAAG;AAAA,gBAAA,GAC9D;AAAA,cAAA,GAEJ;AAAA,cAGAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,6BACZ,UAAA;AAAA,gBAAA,SAAS,uBACRD,kCAAAA,IAAC,QAAA,EAAK,WAAU,0EAAyE,UAAA,qBAEzF;AAAA,gBAED,SAAS,aACRC,uCAAC,QAAA,EAAK,WAAU,sGACd,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,YAAA,EAAW,WAAU,WAAU;AAAA,kBAAE;AAAA,gBAAA,GAEpC;AAAA,gBAED,SAAS,eACRA,kCAAAA,IAAC,QAAA,EAAK,WAAU,wEAAuE,UAAA,gBAEvF;AAAA,gBAED,SAAS,wBACRC,uCAAC,QAAA,EAAK,WAAU,sEAAqE,UAAA;AAAA,kBAAA;AAAA,kBAC3E,SAAS;AAAA,kBAAqB;AAAA,gBAAA,GACxC;AAAA,cAAA,GAEJ;AAAA,cAGC,SAAS,sBAAsB,SAAS,mBAAmB,SAAS,KACnEA,kCAAAA,KAAC,OAAA,EAAI,WAAU,QACb,UAAA;AAAA,sDAAC,SAAA,EAAM,WAAU,gDAA+C,UAAA,aAAS;AAAA,gBACzED,kCAAAA;AAAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,OAAO,kBAAkB,SAAS,EAAE,KAAK;AAAA,oBACzC,UAAU,CAAC,MAAM;AACf,wBAAE,gBAAA;AACF,2CAAqB;AAAA,wBACnB,GAAG;AAAA,wBACH,CAAC,SAAS,EAAE,GAAG,EAAE,OAAO;AAAA,sBAAA,CACzB;AAAA,oBACH;AAAA,oBACA,SAAS,CAAC,MAAM,EAAE,gBAAA;AAAA,oBAClB,WAAU;AAAA,oBAET,UAAA,SAAS,mBAAmB,IAAI,CAAA,SAAQ;AACvC,4BAAM,YAAY,iBAAiB,SAAS,eAAe,IAAI;AAC/D,4BAAM,YAAY,iBAAiB,IAAI;AACvC,6BACEC,kCAAAA,KAAC,UAAA,EAAkB,OAAO,MACvB,UAAA;AAAA,wBAAA;AAAA,wBAAU;AAAA,wBAAI,eAAe,SAAS;AAAA,wBAAE;AAAA,sBAAA,EAAA,GAD9B,IAEb;AAAA,oBAEJ,CAAC;AAAA,kBAAA;AAAA,gBAAA;AAAA,cACH,GACF;AAAA,cAIFA,kCAAAA,KAAC,OAAA,EAAI,WAAU,wDACb,UAAA;AAAA,gBAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,kBAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,8BAA8B,UAAA;AAAA,oBAAA,SAAS;AAAA,oBAAO;AAAA,oBAAO,SAAS,WAAW,IAAI,MAAM;AAAA,kBAAA,GAAG;AAAA,kBACrGA,kCAAAA,KAAC,OAAA,EAAI,WAAU,6BACb,UAAA;AAAA,0DAAC,QAAA,EAAK,WAAU,wCACb,UAAA,eAAe,iBAAiB,SAAS,eAAe,kBAAkB,SAAS,EAAE,KAAK,WAAW,CAAC,GACzG;AAAA,0DACC,QAAA,EAAK,WAAU,yBAAwB,UAAA,UAAM;AAAA,kBAAA,GAChD;AAAA,kBACAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,yBAAwB,UAAA;AAAA,oBAAA;AAAA,oBAC7B,eAAe,iBAAiB,SAAS,YAAY,kBAAkB,SAAS,EAAE,KAAK,WAAW,CAAC;AAAA,kBAAA,GAC7G;AAAA,kBACC,kBAAkB,SAAS,EAAE,KAAK,kBAAkB,SAAS,EAAE,MAAM,eACpEA,kCAAAA,KAAC,OAAA,EAAI,WAAU,8CAA6C,UAAA;AAAA,oBAAA;AAAA,oBACvD,iBAAiB,kBAAkB,SAAS,EAAE,CAAC;AAAA,kBAAA,GACpD;AAAA,gBAAA,GAEJ;AAAA,gBACC,SAAS,kBAAkB,KAC1BA,kCAAAA,KAAC,OAAA,EAAI,WAAU,oCAAmC,UAAA;AAAA,kBAAA;AAAA,kBAC1C,SAAS;AAAA,kBAAe;AAAA,gBAAA,GAChC;AAAA,cAAA,GAEJ;AAAA,YAAA,GACF;AAAA,UAAA;AAAA,QAAA;AAAA,QA3KK,SAAS;AAAA,MAAA,CA6KjB,GACH;AAAA,IAAA,GAEJ;AAAA,IAGAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,6FACb,UAAA;AAAA,MAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,cACb,UAAA;AAAA,QAAAD,kCAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,WAAU;AAAA,YACX,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAGA,UACCA,kCAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS,MAAM,OAAO,UAAU;AAAA,YAChC,WAAU;AAAA,YACX,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAED,GAEJ;AAAA,MAEAC,kCAAAA;AAAAA,QAAC;AAAA,QAAA;AAAA,UACC,SAAS,MAAM;AACb,gBAAI,kBAAkB;AACpB,oBAAM,mBAAmB,kBAAkB,iBAAiB,EAAE,KAAK;AACnE,oBAAM,gBAAgB,iBAAiB,iBAAiB,eAAe,gBAAgB;AACvF,oBAAM,gBAAgB,iBAAiB,iBAAiB,YAAY,gBAAgB;AAEpF,+BAAiB;AAAA,gBACf,GAAG;AAAA,gBACH;AAAA,gBACA,eAAe;AAAA,gBACf,YAAY;AAAA,cAAA,CACb;AAAA,YACH;AAAA,UACF;AAAA,UACA,UAAU,CAAC;AAAA,UACX,WAAU;AAAA,UAEV,UAAA;AAAA,YAAAD,kCAAAA,IAAC,cAAA,EAAa,WAAU,WAAU;AAAA,YACjC,mBACG,QAAQ,iBAAiB,IAAI,MAAM,eAAe,iBAAiB,iBAAiB,YAAY,kBAAkB,iBAAiB,EAAE,KAAK,WAAW,CAAC,CAAC,KACvJ;AAAA,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,IAEN,GACF;AAAA,EAAA,EAAA,CACF,EAAA,CACF;AAEJ;ACv7BA,SAAwB,aAAa;AAAA,EACnC;AAAA,EACA,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,cAAc;AAChB,GAAG;AACD,QAAM,CAAC,WAAW,YAAY,IAAIH,aAAAA,SAAS,CAAA,CAAE;AAC7C,QAAM,CAAC,UAAU,WAAW,IAAIA,aAAAA,SAAS,CAAA,CAAE;AAC3C,QAAM,CAAC,cAAc,eAAe,IAAIA,aAAAA,SAAS,MAAM;AACvD,QAAM,CAAC,iBAAiB,kBAAkB,IAAIA,aAAAA,SAAS,IAAI;AAC3D,QAAM,CAAC,eAAe,gBAAgB,IAAIA,aAAAA,SAAS,CAAA,CAAE;AACrD,QAAM,CAAC,aAAa,cAAc,IAAIA,aAAAA,SAAS,CAAA,CAAE;AACjD,QAAM,CAAC,SAAS,UAAU,IAAIA,aAAAA,SAAS,IAAI;AAC3C,QAAM,CAAC,OAAO,QAAQ,IAAIA,aAAAA,SAAS,IAAI;AACvC,QAAM,CAAC,kBAAkB,mBAAmB,IAAIA,aAAAA,SAAS,IAAI;AAC7D,QAAM,CAAC,SAAS,UAAU,IAAIA,aAAAA,SAAS,IAAI;AAG3CC,eAAAA,UAAU,MAAM;AACd,mBAAe,kBAAkB;AAC/B,UAAI;AACF,cAAM,CAAC,UAAU,WAAW,IAAI,MAAM,QAAQ,IAAI;AAAA,UAChD,MAAM,kBAAkB;AAAA,UACxB,MAAM,qBAAqB;AAAA,QAAA,CAC5B;AAED,YAAI,SAAS,MAAM,YAAY,IAAI;AACjC,gBAAM,YAAY,MAAM,SAAS,KAAA;AACjC,gBAAM,eAAe,MAAM,YAAY,KAAA;AACvC,uBAAa,SAAS;AACtB,sBAAY,YAAY;AAAA,QAC1B;AACA,mBAAW,KAAK;AAAA,MAClB,SAAS,KAAK;AACZ,gBAAQ,MAAM,gCAAgC,GAAG;AACjD,iBAAS,6BAA6B;AACtC,mBAAW,KAAK;AAAA,MAClB;AAAA,IACF;AAEA,oBAAA;AAAA,EACF,GAAG,CAAA,CAAE;AAGL,QAAM,mBAAmBM,aAAAA,YAAY,YAAY;AAC/C,QAAI,iBAAiB,QAAQ;AAC3B,iBAAW,IAAI;AACf,sBAAgB,CAAA,CAAE;AAClB;AAAA,IACF;AAEA,QAAI;AACF,UAAI;AAEJ,UAAI,iBAAiB,aAAa,iBAAiB;AACjD,mBAAW,MAAM,MAAM,gCAAgC;AAAA,UACrD,QAAQ;AAAA,UACR,SAAS,EAAE,gBAAgB,mBAAA;AAAA,UAC3B,MAAM,KAAK,UAAU;AAAA,YACnB,WAAW;AAAA,YACX,WAAW,gBAAgB,WAAW,YAAY;AAAA,YAClD;AAAA,UAAA,CACD;AAAA,QAAA,CACF;AAAA,MACH,WAAW,iBAAiB,cAAc,cAAc,SAAS,GAAG;AAClE,mBAAW,MAAM,MAAM,iCAAiC;AAAA,UACtD,QAAQ;AAAA,UACR,SAAS,EAAE,gBAAgB,mBAAA;AAAA,UAC3B,MAAM,KAAK,UAAU;AAAA,YACnB,SAAS;AAAA,YACT;AAAA,UAAA,CACD;AAAA,QAAA,CACF;AAAA,MACH,WAAW,iBAAiB,YAAY,YAAY,SAAS,GAAG;AAC9D,mBAAW,MAAM,MAAM,+BAA+B;AAAA,UACpD,QAAQ;AAAA,UACR,SAAS,EAAE,gBAAgB,mBAAA;AAAA,UAC3B,MAAM,KAAK,UAAU;AAAA,YACnB,kBAAkB;AAAA,YAClB;AAAA,UAAA,CACD;AAAA,QAAA,CACF;AAAA,MACH;AAEA,UAAI,UAAU,IAAI;AAChB,cAAM,OAAO,MAAM,SAAS,KAAA;AAC5B,mBAAW,IAAI;AACf,wBAAgB,IAAI;AAAA,MACtB;AAAA,IACF,SAAS,KAAK;AACZ,cAAQ,MAAM,gCAAgC,GAAG;AAAA,IACnD;AAAA,EACF,GAAG,CAAC,cAAc,iBAAiB,eAAe,aAAa,WAAW,QAAQ,aAAa,eAAe,CAAC;AAE/GN,eAAAA,UAAU,MAAM;AACd,qBAAA;AAAA,EACF,GAAG,CAAC,gBAAgB,CAAC;AAErB,MAAI,SAAS;AACX,WAAOE,kCAAAA,IAAC,OAAA,EAAI,WAAU,yBAAwB,UAAA,2BAAuB;AAAA,EACvE;AAEA,MAAI,OAAO;AACT,WAAOA,kCAAAA,IAAC,OAAA,EAAI,WAAU,wBAAwB,UAAA,OAAM;AAAA,EACtD;AAEA,SACEC,kCAAAA,KAAC,OAAA,EAAI,WAAU,aAEb,UAAA;AAAA,IAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,oDACb,UAAA;AAAA,MAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,+CAA8C,UAAA,aAAS;AAAA,MACrEC,kCAAAA,KAAC,OAAA,EAAI,WAAU,aACb,UAAA;AAAA,QAAAA,kCAAAA,KAAC,SAAA,EAAM,WAAU,0CACf,UAAA;AAAA,UAAAD,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,MAAK;AAAA,cACL,OAAM;AAAA,cACN,SAAS,iBAAiB;AAAA,cAC1B,UAAU,CAAA,MAAK;AACb,gCAAgB,EAAE,OAAO,KAAK;AAC9B,mCAAmB,IAAI;AACvB,iCAAiB,CAAA,CAAE;AACnB,+BAAe,CAAA,CAAE;AAAA,cACnB;AAAA,cACA,WAAU;AAAA,YAAA;AAAA,UAAA;AAAA,UAEZA,kCAAAA,IAAC,QAAA,EAAK,WAAU,yBAAwB,UAAA,uBAAA,CAAoB;AAAA,QAAA,GAC9D;AAAA,QAEC,SAAS,iBAAiB,SAAS,cAAc,SAAS,KACzDC,kCAAAA,KAAAI,4BAAA,EACE,UAAA;AAAA,UAAAJ,kCAAAA,KAAC,SAAA,EAAM,WAAU,0CACf,UAAA;AAAA,YAAAD,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,MAAK;AAAA,gBACL,OAAM;AAAA,gBACN,SAAS,iBAAiB;AAAA,gBAC1B,UAAU,CAAA,MAAK,gBAAgB,EAAE,OAAO,KAAK;AAAA,gBAC7C,WAAU;AAAA,cAAA;AAAA,YAAA;AAAA,YAEZA,kCAAAA,IAAC,QAAA,EAAK,WAAU,yBAAwB,UAAA,gBAAA,CAAa;AAAA,UAAA,GACvD;AAAA,UAEC,iBAAiB,aAChBA,sCAAC,OAAA,EAAI,WAAU,uBACZ,UAAA,SAAS,cAAc,IAAI,CAAA,QAC1BC,kCAAAA,KAAC,SAAA,EAAmB,WAAU,0CAC5B,UAAA;AAAA,YAAAD,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,MAAK;AAAA,gBACL,OAAO,IAAI;AAAA,gBACX,SAAS,oBAAoB,IAAI;AAAA,gBACjC,UAAU,CAAA,MAAK,mBAAmB,EAAE,OAAO,KAAK;AAAA,gBAChD,WAAU;AAAA,cAAA;AAAA,YAAA;AAAA,YAEZC,kCAAAA,KAAC,OAAA,EAAI,WAAU,UACb,UAAA;AAAA,cAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,wCAAwC,UAAA,IAAI,MAAK;AAAA,cAC9DA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAyB,cAAI,YAAA,CAAY;AAAA,YAAA,EAAA,CACxD;AAAA,UAAA,KAZU,IAAI,EAahB,CACD,EAAA,CACH;AAAA,QAAA,GAEJ;AAAA,QAGFC,kCAAAA,KAAC,SAAA,EAAM,WAAU,0CACf,UAAA;AAAA,UAAAD,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,MAAK;AAAA,cACL,OAAM;AAAA,cACN,SAAS,iBAAiB;AAAA,cAC1B,UAAU,CAAA,MAAK,gBAAgB,EAAE,OAAO,KAAK;AAAA,cAC7C,WAAU;AAAA,YAAA;AAAA,UAAA;AAAA,UAEZA,kCAAAA,IAAC,QAAA,EAAK,WAAU,yBAAwB,UAAA,mBAAA,CAAgB;AAAA,QAAA,GAC1D;AAAA,QAEC,iBAAiB,cAChBA,kCAAAA,IAAC,OAAA,EAAI,WAAU,uBACZ,UAAA,OAAO,QAAQ,SAAS,EAAE,IAAI,CAAC,CAAC,UAAU,KAAK,6CAC7C,OAAA,EACC,UAAA;AAAA,UAAAC,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,SAAS,MAAM,oBAAoB,qBAAqB,WAAW,OAAO,QAAQ;AAAA,cAClF,WAAU;AAAA,cAEV,UAAA;AAAA,gBAAAD,kCAAAA;AAAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,WAAW,gCACT,qBAAqB,WAAW,eAAe,EACjD;AAAA,kBAAA;AAAA,gBAAA;AAAA,gBAED,SAAS,OAAO,CAAC,EAAE,gBAAgB,SAAS,MAAM,CAAC;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAGrD,qBAAqB,YACpBA,sCAAC,OAAA,EAAI,WAAU,uBACZ,UAAA,MAAM,IAAI,CAAA,SACTC,uCAAC,SAAA,EAAoB,WAAU,0CAC7B,UAAA;AAAA,YAAAD,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,SAAS,cAAc,SAAS,KAAK,EAAE;AAAA,gBACvC,UAAU,CAAA,MAAK;AACb,sBAAI,EAAE,OAAO,SAAS;AACpB,qCAAiB,CAAC,GAAG,eAAe,KAAK,EAAE,CAAC;AAAA,kBAC9C,OAAO;AACL,qCAAiB,cAAc,OAAO,CAAA,OAAM,OAAO,KAAK,EAAE,CAAC;AAAA,kBAC7D;AAAA,gBACF;AAAA,gBACA,WAAU;AAAA,cAAA;AAAA,YAAA;AAAA,YAEZC,kCAAAA,KAAC,OAAA,EAAI,WAAU,UACb,UAAA;AAAA,cAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAyB,UAAA,KAAK,MAAK;AAAA,cAChDA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAyB,eAAK,YAAA,CAAY;AAAA,YAAA,GACzD;AAAA,YACAC,kCAAAA,KAAC,QAAA,EAAK,WAAU,6DAA4D,UAAA;AAAA,cAAA;AAAA,cACrE,KAAK,gBAAgB;AAAA,cAAE;AAAA,YAAA,EAAA,CAC9B;AAAA,UAAA,KAnBU,KAAK,EAoBjB,CACD,EAAA,CACH;AAAA,QAAA,KAvCM,QAyCV,CACD,GACH;AAAA,QAGFA,kCAAAA,KAAC,SAAA,EAAM,WAAU,0CACf,UAAA;AAAA,UAAAD,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,MAAK;AAAA,cACL,OAAM;AAAA,cACN,SAAS,iBAAiB;AAAA,cAC1B,UAAU,CAAA,MAAK,gBAAgB,EAAE,OAAO,KAAK;AAAA,cAC7C,WAAU;AAAA,YAAA;AAAA,UAAA;AAAA,UAEZA,kCAAAA,IAAC,QAAA,EAAK,WAAU,yBAAwB,UAAA,qBAAA,CAAkB;AAAA,QAAA,GAC5D;AAAA,QAEC,iBAAiB,YAChBC,uCAAC,OAAA,EAAI,WAAU,uBACZ,UAAA;AAAA,UAAA,YAAY,IAAI,CAAC,MAAM,UACtBA,uCAAC,OAAA,EAAgB,WAAU,wBACzB,UAAA;AAAA,YAAAD,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,aAAY;AAAA,gBACZ,OAAO,KAAK,eAAe;AAAA,gBAC3B,UAAU,CAAA,MAAK;AACb,wBAAM,UAAU,CAAC,GAAG,WAAW;AAC/B,0BAAQ,KAAK,EAAE,cAAc,EAAE,OAAO;AACtC,iCAAe,OAAO;AAAA,gBACxB;AAAA,gBACA,WAAU;AAAA,cAAA;AAAA,YAAA;AAAA,YAEZA,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,KAAI;AAAA,gBACJ,aAAY;AAAA,gBACZ,OAAO,KAAK,YAAY;AAAA,gBACxB,UAAU,CAAA,MAAK;AACb,wBAAM,UAAU,CAAC,GAAG,WAAW;AAC/B,0BAAQ,KAAK,EAAE,WAAW,OAAO,EAAE,OAAO,KAAK;AAC/C,iCAAe,OAAO;AAAA,gBACxB;AAAA,gBACA,WAAU;AAAA,cAAA;AAAA,YAAA;AAAA,YAEZA,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,KAAI;AAAA,gBACJ,MAAK;AAAA,gBACL,aAAY;AAAA,gBACZ,OAAO,KAAK,gBAAgB;AAAA,gBAC5B,UAAU,CAAA,MAAK;AACb,wBAAM,UAAU,CAAC,GAAG,WAAW;AAC/B,0BAAQ,KAAK,EAAE,eAAe,OAAO,EAAE,OAAO,KAAK;AACnD,iCAAe,OAAO;AAAA,gBACxB;AAAA,gBACA,WAAU;AAAA,cAAA;AAAA,YAAA;AAAA,YAEZA,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,SAAS,MAAM,eAAe,YAAY,OAAO,CAAC,GAAG,MAAM,MAAM,KAAK,CAAC;AAAA,gBACvE,WAAU;AAAA,gBAEV,UAAAA,kCAAAA,IAAC,QAAA,EAAO,WAAU,UAAA,CAAU;AAAA,cAAA;AAAA,YAAA;AAAA,UAC9B,EAAA,GA3CQ,KA4CV,CACD;AAAA,UAEDC,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,SAAS,MAAM,eAAe,CAAC,GAAG,aAAa,EAAE,aAAa,IAAI,UAAU,GAAG,cAAc,EAAA,CAAG,CAAC;AAAA,cACjG,WAAU;AAAA,cAEV,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,MAAA,EAAK,WAAU,UAAA,CAAU;AAAA,gBAAE;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,QAE9B,EAAA,CACF;AAAA,MAAA,EAAA,CAEJ;AAAA,IAAA,GACF;AAAA,IAGC,WACCC,kCAAAA,KAAC,OAAA,EAAI,WAAU,sDACb,UAAA;AAAA,MAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,+CAA8C,UAAA,qBAAiB;AAAA,MAC7EC,kCAAAA,KAAC,OAAA,EAAI,WAAU,qBACZ,UAAA;AAAA,QAAA,QAAQ,OAAO,IAAI,CAAC,MAAM,UACzBA,kCAAAA,KAAC,OAAA,EAAgB,WAAU,sCACzB,UAAA;AAAA,UAAAD,kCAAAA,IAAC,QAAA,EAAM,UAAA,KAAK,QAAQ,KAAK,aAAY;AAAA,UACrCC,kCAAAA,KAAC,QAAA,EAAK,WAAU,eAAc,UAAA;AAAA,YAAA;AAAA,YAAK,KAAK,MAAM,QAAQ,CAAC;AAAA,UAAA,EAAA,CAAE;AAAA,QAAA,EAAA,GAFjD,KAGV,CACD;AAAA,8CACA,OAAA,EAAI,WAAU,sBACb,UAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,wDACb,UAAA;AAAA,UAAAD,kCAAAA,IAAC,UAAK,UAAA,SAAA,CAAM;AAAA,iDACX,QAAA,EAAK,UAAA;AAAA,YAAA;AAAA,YAAK,QAAQ,WAAW,QAAQ,CAAC;AAAA,UAAA,EAAA,CAAE;AAAA,QAAA,EAAA,CAC3C,EAAA,CACF;AAAA,QACC,QAAQ,aAAa,QAAQ,YAAY,KACxCC,uCAAC,KAAA,EAAE,WAAU,8BACV,UAAA;AAAA,UAAA,QAAQ;AAAA,UAAU;AAAA,UAAE,QAAQ,SAAS,eAAe,WAAW;AAAA,UAAS;AAAA,QAAA,EAAA,CAC3E;AAAA,MAAA,EAAA,CAEJ;AAAA,IAAA,EAAA,CACF;AAAA,EAAA,GAEJ;AAEJ;AC3UA,SAAS,4BAA2B;AAClC,QAAM,CAAC,UAAU,WAAW,IAAIJ,aAAAA,SAAS,EAAE;AAC3C,QAAM,CAAC,SAAS,UAAU,IAAIA,aAAAA,SAAS,EAAE;AACzC,QAAM,CAAC,UAAU,WAAW,IAAIA,aAAAA,SAAS,EAAE;AAC3C,QAAM,CAAC,QAAQ,SAAS,IAAIA,aAAAA,SAAS,CAAC;AACtC,QAAM,CAAC,UAAU,WAAW,IAAIA,aAAAA,SAAS,UAAU;AACnD,QAAM,CAAC,iBAAiB,kBAAkB,IAAIA,aAAAA,SAAS,EAAE;AACzD,QAAM,CAAC,sBAAsB,uBAAuB,IAAIA,aAAAA,SAAS,KAAK;AACtE,QAAM,CAAC,kBAAkB,mBAAmB,IAAIA,aAAAA,SAAS,IAAI;AAC7D,QAAM,CAAC,iBAAiB,kBAAkB,IAAIA,aAAAA,SAAS,KAAK;AAC5D,QAAM,CAAC,qBAAqB,sBAAsB,IAAIA,aAAAA,SAAS,CAAA,CAAE;AACjE,QAAM,CAAC,SAAS,UAAU,IAAIA,aAAAA,SAAS,KAAK;AAC5C,QAAM,CAAC,YAAY,aAAa,IAAIA,aAAAA,SAAS,CAAA,CAAE;AAG/C,QAAM,CAAC,YAAY,aAAa,IAAIA,aAAAA,SAAS,EAAE;AAC/C,QAAM,CAAC,YAAY,aAAa,IAAIA,aAAAA,SAAS,CAAA,CAAE;AAC/C,QAAM,CAAC,aAAa,cAAc,IAAIA,aAAAA,SAAS,KAAK;AACpD,QAAM,CAAC,aAAa,cAAc,IAAIA,aAAAA,SAAS,IAAI;AAGnDC,eAAAA,UAAU,MAAM;AACd,mBAAe,mBAAmB;AAChC,UAAI,CAAC,YAAY,SAAS,SAAS,EAAG;AAEtC,UAAI;AACF,cAAM,WAAW,MAAM,MAAM,mCAAmC,mBAAmB,QAAQ,CAAC,EAAE;AAC9F,YAAI,SAAS,IAAI;AACf,gBAAM,OAAO,MAAM,SAAS,KAAA;AAC5B,wBAAc,IAAI;AAElB,cAAI,KAAK,SAAS,KAAK,CAAC,YAAY;AAClC,0BAAc,KAAK,CAAC,EAAE,EAAE;AAAA,UAC1B;AAAA,QACF;AAAA,MACF,SAAS,OAAO;AACd,gBAAQ,MAAM,gCAAgC,KAAK;AAAA,MACrD;AAAA,IACF;AAEA,UAAM,QAAQ,WAAW,kBAAkB,GAAG;AAC9C,WAAO,MAAM,aAAa,KAAK;AAAA,EACjC,GAAG,CAAC,UAAU,UAAU,CAAC;AAEzB,QAAM,UAAU,MAAM;AACpB,QAAI,OAAO,WAAW,eAAe,OAAO,OAAO,aAAa,YAAY;AAC1E,aAAO,SAAS,EAAE,KAAK,GAAG,UAAU,UAAU;AAAA,IAChD;AAGA,UAAM,QAAQ,SAAS,cAAc,OAAO;AAE5C,UAAM,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBpB,aAAS,KAAK,YAAY,KAAK;AAC/B,WAAO,MAAM,SAAS,KAAK,YAAY,KAAK;AAAA,EAC9C,GAAG,CAAA,CAAE;AAGL,QAAM,6BAAY,KAAA,GAAO,cAAc,MAAM,GAAG,EAAE,CAAC;AAGnD,QAAM,cAAc,UAAU,IAAI,KAAK,IAAI,KAAK,OAAO,EAAE,QAAA,IAAY,KAAQ,EAAE,cAAc,MAAM,GAAG,EAAE,CAAC,IAAI;AAE7G,QAAM,8BAA8BM,yBAAY,CAACE,gBAAe;AAC9D,2BAAuBA,WAAU;AACjC,4BAAwB,KAAK;AAC7B,uBAAmB,IAAI;AACvB,wBAAoB,IAAI;AAAA,EAC1B,GAAG,CAAA,CAAE;AACL,QAAM,2BAA2BF,yBAAY,OAAO,aAAa;AAC/D,wBAAoB,QAAQ;AAC5B,4BAAwB,KAAK;AAC7B,uBAAmB,KAAK;AACxB,eAAW,IAAI;AAEf,QAAI;AAEF,YAAM,eAAe,WAAW,KAAK,CAAA,MAAK,EAAE,OAAO,UAAU;AAC7D,UAAI,CAAC,cAAc;AACjB,cAAM,IAAI,MAAM,gCAAgC;AAAA,MAClD;AAGA,YAAM,cAAc,IAAI,KAAK,OAAO;AACpC,YAAM,eAAe,IAAI,KAAK,QAAQ;AACtC,YAAM,SAAS,KAAK,MAAM,eAAe,gBAAgB,MAAO,KAAK,KAAK,GAAG;AAC7E,YAAM,YAAY,SAAS,iBAAiB,aAAa;AACzD,YAAM,cAAc;AAGpB,YAAM,YAAY;AAAA,QAChB;AAAA,UACE,aAAa;AAAA,UACb,aAAa,GAAG,aAAa,IAAI,MAAM,QAAQ;AAAA,UAC/C;AAAA,UACA;AAAA,UACA,UAAU;AAAA;AAAA,UACV;AAAA,QAAA;AAAA,MACF;AAIF,UAAI,eAAe,YAAY,SAAS,YAAY,MAAM,SAAS,GAAG;AACpE,oBAAY,MAAM,QAAQ,CAAA,aAAY;AACpC,oBAAU,KAAK;AAAA,YACb,aAAa;AAAA,YACb,aAAa,SAAS,QAAQ,SAAS;AAAA,YACvC,WAAW,SAAS,SAAS,SAAS,YAAY;AAAA;AAAA,YAClD,aAAa,SAAS,SAAS,SAAS,YAAY;AAAA,YACpD,UAAU,SAAS,YAAY;AAAA,YAC/B,QAAQ;AAAA;AAAA,UAAA,CACT;AAAA,QACH,CAAC;AAAA,MACH;AAGA,YAAM,SAAS,aAAa,QAAQ,iBAAiB,KAAK,WAAW,KAAK,IAAA;AAC1E,YAAM,cAAc;AAAA,QAClB,YAAY,aAAa;AAAA,QACzB,YAAY,aAAa;AAAA;AAAA,QACzB;AAAA,QACA;AAAA,QACA,aAAa;AAAA,QACb,cAAc;AAAA,QACd;AAAA,QACA,UAAU;AAAA,UACR,YAAY,SAAS;AAAA,UACrB,cAAc,SAAS;AAAA,UACvB;AAAA,UACA;AAAA,UACA;AAAA,UACA,iBAAiB,mBAAmB;AAAA,QAAA;AAAA,MACtC;AAGF,YAAM,WAAW,MAAM,MAAM,iBAAiB;AAAA,QAC5C,QAAQ;AAAA,QACR,SAAS,EAAE,gBAAgB,mBAAA;AAAA,QAC3B,MAAM,KAAK,UAAU,WAAW;AAAA,MAAA,CACjC;AAED,UAAI,CAAC,SAAS,IAAI;AAChB,cAAM,IAAI,MAAM,mBAAmB,SAAS,UAAU,EAAE;AAAA,MAC1D;AAEA,YAAM,UAAU,MAAM,SAAS,KAAA;AAG/B,YAAM,iBAAiB,sBAAsB;AAAA,QAC3C,IAAI,QAAQ;AAAA,QACZ,MAAM;AAAA,QACN,QAAQ,QAAQ,QAAQ;AAAA,QACxB;AAAA,QACA;AAAA,QACA,YAAY,SAAS;AAAA,QACrB,cAAc,SAAS;AAAA,QACvB;AAAA,QACA;AAAA,MAAA,CACD;AAGD,YAAM,aAAa,uBAAuB,QAAQ,EAAE;AACpD,aAAO,SAAS,OAAO;AAAA,IAEzB,SAAS,OAAO;AACd,cAAQ,MAAM,mBAAmB,KAAK;AACtC,YAAM,mBAAmB,MAAM,OAAO;AAAA;AAAA,qCAA0C;AAChF,iBAAW,KAAK;AAAA,IAClB;AAAA,EACF,GAAG,CAAC,YAAY,YAAY,SAAS,UAAU,UAAU,aAAa,aAAa,QAAQ,UAAU,eAAe,CAAC;AAErH,QAAM,6BAA6BA,aAAAA,YAAY,YAAY;AACzD,QAAI,CAAC,uBAAuB,oBAAoB,WAAW,GAAG;AAC5D,YAAM,sDAAsD;AAC5D;AAAA,IACF;AAEA,UAAM,mBAAmB,oBAAoB;AAAA,MAAO,CAAC,KAAK,aACxD,SAAS,gBAAgB,IAAI,gBAAgB,WAAW;AAAA,IAAA;AAE1D,UAAM,yBAAyB,gBAAgB;AAAA,EACjD,GAAG,CAAC,qBAAqB,wBAAwB,CAAC;AAElD,QAAM,yBAAyBA,aAAAA,YAAY,MAAM;AAC/C,uBAAmB,KAAK;AACxB,4BAAwB,IAAI;AAAA,EAC9B,GAAG,CAAA,CAAE;AAEL,QAAM,eAAeA,yBAAY,OAAO,MAAM;AAC5C,MAAE,eAAA;AAGF,UAAM,SAAS,CAAA;AACf,QAAI,CAAC,YAAY,SAAS,SAAS,UAAU,WAAW;AACxD,QAAI,CAAC,QAAS,QAAO,UAAU;AAC/B,QAAI,CAAC,SAAU,QAAO,WAAW;AACjC,QAAI,YAAY,WAAW,IAAI,KAAK,QAAQ,KAAK,IAAI,KAAK,OAAO,GAAG;AAClE,aAAO,WAAW;AAAA,IACpB;AACA,QAAI,SAAS,KAAK,SAAS,WAAW,SAAS;AAE/C,QAAI,OAAO,KAAK,MAAM,EAAE,SAAS,GAAG;AAClC,oBAAc,MAAM;AACpB;AAAA,IACF;AAEA,kBAAc,CAAA,CAAE;AAChB,4BAAwB,IAAI;AAAA,EAC9B,GAAG,CAAC,UAAU,SAAS,UAAU,MAAM,CAAC;AAExC,SACEH,kCAAAA,KAAC,OAAA,EAAI,WAAU,2CACb,UAAA;AAAA,IAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,uCACb,UAAA;AAAA,MAAAD,kCAAAA,IAAC,YAAA,EAAW;AAAA,MAGZC,kCAAAA,KAAC,OAAA,EAAI,WAAU,QACb,UAAA;AAAA,QAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,kEAAiE,UAAA,yBAAqB;AAAA,QACpGA,kCAAAA,IAAC,KAAA,EAAE,WAAU,2DAA0D,UAAA,qFAAA,CAEvE;AAAA,MAAA,GACF;AAAA,MAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,qEACb,UAAA;AAAA,QAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,wBAAoB;AAAA,QAE5EC,kCAAAA,KAAC,QAAA,EAAK,UAAU,cAAc,WAAU,aAEtC,UAAA;AAAA,UAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,YAAAD,kCAAAA,IAAC,SAAA,EAAM,WAAU,qDAAoD,UAAA,cAErE;AAAA,YACAA,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,OAAO;AAAA,gBACP,UAAU,CAAA,MAAK,YAAY,EAAE,OAAO,KAAK;AAAA,gBACzC,UAAQ;AAAA,gBACR,WAAU;AAAA,gBACV,aAAY;AAAA,cAAA;AAAA,YAAA;AAAA,YAEb,WAAW,YACVA,kCAAAA,IAAC,OAAE,WAAU,6BAA6B,qBAAW,SAAA,CAAS;AAAA,UAAA,GAElE;AAAA,UAGC,WAAW,SAAS,KACnBC,kCAAAA,KAAC,OAAA,EACC,UAAA;AAAA,YAAAD,kCAAAA,IAAC,SAAA,EAAM,WAAU,qDAAoD,UAAA,qBAErE;AAAA,kDACC,OAAA,EAAI,WAAU,aACZ,UAAA,WAAW,IAAI,CAAA,SACdC,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBAEC,WAAW,mFACT,eAAe,KAAK,KAChB,qCACA,+CACN;AAAA,gBAEA,UAAA;AAAA,kBAAAD,kCAAAA;AAAAA,oBAAC;AAAA,oBAAA;AAAA,sBACC,MAAK;AAAA,sBACL,MAAK;AAAA,sBACL,OAAO,KAAK;AAAA,sBACZ,SAAS,eAAe,KAAK;AAAA,sBAC7B,UAAU,CAAA,MAAK,cAAc,EAAE,OAAO,KAAK;AAAA,sBAC3C,WAAU;AAAA,oBAAA;AAAA,kBAAA;AAAA,kBAEZC,kCAAAA,KAAC,OAAA,EAAI,WAAU,UACb,UAAA;AAAA,oBAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,kCAAkC,UAAA,KAAK,MAAK;AAAA,oBACzDC,kCAAAA,KAAC,KAAA,EAAE,WAAU,yBAAyB,UAAA;AAAA,sBAAA,KAAK;AAAA,sBAAK;AAAA,sBAAI,KAAK;AAAA,sBAAS;AAAA,sBAAI,KAAK;AAAA,sBAAM;AAAA,oBAAA,GAAC;AAAA,oBAClFD,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA8B,eAAK,aAAY;AAAA,oBAC5DC,kCAAAA,KAAC,KAAA,EAAE,WAAU,gDAA+C,UAAA;AAAA,sBAAA;AAAA,sBAChD,KAAK;AAAA,sBAAU;AAAA,oBAAA,EAAA,CAC3B;AAAA,kBAAA,EAAA,CACF;AAAA,gBAAA;AAAA,cAAA;AAAA,cAtBK,KAAK;AAAA,YAAA,CAwBb,EAAA,CACH;AAAA,UAAA,GACF;AAAA,iDAID,OAAA,EACC,UAAA;AAAA,YAAAD,kCAAAA,IAAC,SAAA,EAAM,WAAU,qDAAoD,UAAA,kBAErE;AAAA,YACAC,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAA,MAAK,eAAe,EAAE,OAAO,KAAK;AAAA,gBAC5C,UAAQ;AAAA,gBACR,WAAU;AAAA,gBAEV,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,UAAA,EAAO,OAAM,OAAM,UAAA,sBAAkB;AAAA,kBACtCA,kCAAAA,IAAC,UAAA,EAAO,OAAM,UAAS,UAAA,6BAAA,CAA0B;AAAA,gBAAA;AAAA,cAAA;AAAA,YAAA;AAAA,kDAElD,KAAA,EAAE,WAAU,8BACV,UAAA,gBAAgB,QACb,4CACA,uDAAA,CACN;AAAA,UAAA,GACF;AAAA,UAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,yCACb,UAAA;AAAA,YAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,cAAAD,kCAAAA,IAAC,SAAA,EAAM,WAAU,qDAAoD,UAAA,mBAErE;AAAA,cACAA,kCAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,MAAK;AAAA,kBACL,OAAO;AAAA,kBACP,UAAU,CAAA,MAAK,WAAW,EAAE,OAAO,KAAK;AAAA,kBACxC,KAAK;AAAA,kBACL,UAAQ;AAAA,kBACR,WAAU;AAAA,gBAAA;AAAA,cAAA;AAAA,cAEX,WAAW,WACVA,kCAAAA,IAAC,OAAE,WAAU,6BAA6B,qBAAW,QAAA,CAAQ;AAAA,YAAA,GAEjE;AAAA,mDAEC,OAAA,EACC,UAAA;AAAA,cAAAA,kCAAAA,IAAC,SAAA,EAAM,WAAU,qDAAoD,UAAA,oBAErE;AAAA,cACAA,kCAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,MAAK;AAAA,kBACL,OAAO;AAAA,kBACP,UAAU,CAAA,MAAK,YAAY,EAAE,OAAO,KAAK;AAAA,kBACzC,KAAK;AAAA,kBACL,UAAQ;AAAA,kBACR,WAAU;AAAA,gBAAA;AAAA,cAAA;AAAA,cAEX,WAAW,YACVA,kCAAAA,IAAC,OAAE,WAAU,6BAA6B,qBAAW,SAAA,CAAS;AAAA,YAAA,EAAA,CAElE;AAAA,UAAA,GACF;AAAA,UAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,yCACb,UAAA;AAAA,YAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,cAAAD,sCAAC,SAAA,EAAM,SAAQ,UAAS,WAAU,qDAAoD,UAAA,sBAEtF;AAAA,cACAA,kCAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,IAAG;AAAA,kBACH,MAAK;AAAA,kBACL,KAAK;AAAA,kBACL,KAAK;AAAA,kBACL,OAAO;AAAA,kBACP,UAAU,CAAA,MAAK,UAAU,OAAO,EAAE,OAAO,KAAK,CAAC;AAAA,kBAC/C,UAAQ;AAAA,kBACR,WAAU;AAAA,gBAAA;AAAA,cAAA;AAAA,cAEX,WAAW,UACVA,kCAAAA,IAAC,OAAE,WAAU,6BAA6B,qBAAW,OAAA,CAAO;AAAA,YAAA,GAEhE;AAAA,mDAEC,OAAA,EACC,UAAA;AAAA,cAAAA,sCAAC,SAAA,EAAM,SAAQ,YAAW,WAAU,qDAAoD,UAAA,aAExF;AAAA,cACAC,kCAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,IAAG;AAAA,kBACH,OAAO;AAAA,kBACP,UAAU,CAAA,MAAK,YAAY,EAAE,OAAO,KAAK;AAAA,kBACzC,WAAU;AAAA,kBAEV,UAAA;AAAA,oBAAAD,kCAAAA,IAAC,UAAA,EAAO,OAAM,YAAW,UAAA,iBAAa;AAAA,oBACtCA,kCAAAA,IAAC,UAAA,EAAO,OAAM,UAAS,UAAA,eAAW;AAAA,oBAClCA,kCAAAA,IAAC,UAAA,EAAO,OAAM,SAAQ,UAAA,SAAK;AAAA,oBAC3BA,kCAAAA,IAAC,UAAA,EAAO,OAAM,UAAS,UAAA,cAAA,CAAW;AAAA,kBAAA;AAAA,gBAAA;AAAA,cAAA;AAAA,YACpC,EAAA,CACF;AAAA,UAAA,GACF;AAAA,iDAGC,OAAA,EACC,UAAA;AAAA,YAAAC,kCAAAA,KAAC,SAAA,EAAM,SAAQ,mBAAkB,WAAU,qDAAoD,UAAA;AAAA,cAAA;AAAA,cAC5ED,kCAAAA,IAAC,QAAA,EAAK,WAAU,yBAAwB,UAAA,aAAA,CAAU;AAAA,YAAA,GACrE;AAAA,YACAA,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,IAAG;AAAA,gBACH,OAAO;AAAA,gBACP,UAAU,CAAA,MAAK,mBAAmB,EAAE,OAAO,KAAK;AAAA,gBAChD,aAAY;AAAA,gBACZ,MAAM;AAAA,gBACN,WAAW;AAAA,gBACX,WAAU;AAAA,cAAA;AAAA,YAAA;AAAA,YAEZC,kCAAAA,KAAC,KAAA,EAAE,WAAU,8BAA8B,UAAA;AAAA,cAAA,gBAAgB;AAAA,cAAO;AAAA,YAAA,EAAA,CAAe;AAAA,UAAA,GACnF;AAAA,UAGAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,+CAA8C,UAAA,yBAAqB;AAAA,YACjFA,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,iBAAiB;AAAA,gBACjB,WAAW;AAAA,gBACX,QAAQ,KAAK,MAAM,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,OAAO,MAAM,MAAO,KAAK,KAAK,GAAG,KAAK;AAAA,gBACvF;AAAA,cAAA;AAAA,YAAA;AAAA,UACF,GACF;AAAA,UAEAA,kCAAAA,IAAC,QAAA,EAAO,MAAK,UAAS,WAAS,MAAC,UAAU,SACvC,UAAA,UAAU,kBAAkB,oBAAA,CAC/B;AAAA,QAAA,EAAA,CACF;AAAA,MAAA,GACF;AAAA,MAGC,mBAAmB,CAAC,WACnBC,kCAAAA,KAAC,OAAA,EAAI,WAAU,sEACb,UAAA;AAAA,QAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,+BACb,UAAA;AAAA,UAAAD,kCAAAA,IAAC,SAAI,WAAU,yFACb,gDAAC,OAAA,EAAM,WAAU,sBAAqB,EAAA,CACxC;AAAA,UACAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,UACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,0CAExD;AAAA,YACAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,6BAA4B,UAAA,4EAAA,CAEzC;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,GACF;AAAA,8CAGC,OAAA,EAAI,WAAU,2DACb,UAAAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iDACb,UAAA;AAAA,UAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,YAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,YAAQ;AAAA,YAClDA,kCAAAA,IAAC,KAAA,EAAE,WAAU,kCAAkC,UAAA,SAAA,CAAS;AAAA,UAAA,GAC1D;AAAA,iDACC,OAAA,EACC,UAAA;AAAA,YAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,UAAM;AAAA,YAChDC,kCAAAA,KAAC,KAAA,EAAE,WAAU,kCAAkC,UAAA;AAAA,cAAA;AAAA,cAAO;AAAA,cAAO,WAAW,IAAI,MAAM;AAAA,YAAA,EAAA,CAAG;AAAA,UAAA,GACvF;AAAA,iDACC,OAAA,EACC,UAAA;AAAA,YAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,YAAQ;AAAA,YAClDA,kCAAAA,IAAC,KAAA,EAAE,WAAU,kCAAkC,UAAA,QAAA,CAAQ;AAAA,UAAA,GACzD;AAAA,iDACC,OAAA,EACC,UAAA;AAAA,YAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,aAAS;AAAA,YACnDA,kCAAAA,IAAC,KAAA,EAAE,WAAU,kCAAkC,UAAA,SAAA,CAAS;AAAA,UAAA,EAAA,CAC1D;AAAA,QAAA,EAAA,CACF,EAAA,CACF;AAAA,QAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,aACb,UAAA;AAAA,UAAAA,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAS;AAAA,cACT,SAAS;AAAA,cACT,WAAU;AAAA,cAEV,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,MAAA,EAAK,WAAU,UAAA,CAAU;AAAA,gBAAE;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAI9BC,kCAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAS;AAAA,cACT,SAAQ;AAAA,cACR,SAAS;AAAA,cACT,WAAU;AAAA,cAEV,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,YAAA,EAAW,WAAU,UAAA,CAAU;AAAA,gBAAE;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAIpCA,kCAAAA,IAAC,KAAA,EAAE,WAAU,0CAAyC,UAAA,oEAAA,CAEtD;AAAA,QAAA,EAAA,CACF;AAAA,MAAA,GACF;AAAA,MAID,oBAAoB,CAAC,WACpBC,kCAAAA,KAAC,SAAI,WAAU,4DAA2D,IAAG,wBAE3E,UAAA;AAAA,QAAAD,kCAAAA,IAAC,SAAI,WAAU,6DACb,UAAAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,oCACb,UAAA;AAAA,UAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,4CAA2C,UAAA,qBAAiB;AAAA,YAC1EC,kCAAAA,KAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA;AAAA,cAAA;AAAA,cAAsB,KAAK,IAAA,EAAM,SAAA,EAAW,MAAM,EAAE;AAAA,YAAA,EAAA,CAAE;AAAA,UAAA,GAC7F;AAAA,UACAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,cACb,UAAA;AAAA,YAAAA,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,SAAS,MAAM;AACb,wBAAM,QAAQ,OAAO,2BAA2B;AAChD,sBAAI,OAAO;AACT,0BAAM,wCAAwC,KAAK;AAAA;AAAA,wDAA6D;AAAA,kBAClH;AAAA,gBACF;AAAA,gBACA,WAAU;AAAA,gBAEV,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,SAAI,WAAU,WAAU,MAAK,QAAO,QAAO,gBAAe,SAAQ,aACjE,gDAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,wGAAuG,EAAA,CAC9K;AAAA,kBAAM;AAAA,gBAAA;AAAA,cAAA;AAAA,YAAA;AAAA,YAGRC,kCAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACC,SAAS,MAAM,OAAO,MAAA;AAAA,gBACtB,WAAU;AAAA,gBAEV,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,SAAI,WAAU,WAAU,MAAK,QAAO,QAAO,gBAAe,SAAQ,aACjE,gDAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,gLAA+K,EAAA,CACtP;AAAA,kBAAM;AAAA,gBAAA;AAAA,cAAA;AAAA,YAAA;AAAA,UAER,EAAA,CACF;AAAA,QAAA,EAAA,CACF,EAAA,CACF;AAAA,QAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBAEb,UAAA;AAAA,UAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,oBAAgB;AAAA,YACxEC,kCAAAA,KAAC,OAAA,EAAI,WAAU,yCACb,UAAA;AAAA,cAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,iBAAa;AAAA,gBAClDA,kCAAAA,IAAC,KAAA,EAAE,WAAU,kCAAkC,2BAAiB,KAAA,CAAK;AAAA,cAAA,GACvE;AAAA,qDACC,OAAA,EACC,UAAA;AAAA,gBAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,iBAAa;AAAA,gBAClDC,kCAAAA,KAAC,KAAA,EAAE,WAAU,kCAAkC,UAAA;AAAA,kBAAA,iBAAiB;AAAA,kBAAK;AAAA,kBAAI,iBAAiB;AAAA,kBAAM;AAAA,gBAAA,EAAA,CAAE;AAAA,cAAA,GACpG;AAAA,cACAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACb,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,WAAO;AAAA,gBAC5CC,kCAAAA,KAAC,OAAA,EAAI,WAAU,aACb,UAAA;AAAA,kBAAAA,kCAAAA,KAAC,KAAA,EAAE,WAAU,0DACX,UAAA;AAAA,oBAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,6BAA4B,MAAK,QAAO,QAAO,gBAAe,SAAQ,aACnF,UAAA;AAAA,sBAAAD,kCAAAA,IAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,qFAAA,CAAqF;AAAA,sBAC1JA,kCAAAA,IAAC,UAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,mCAAA,CAAmC;AAAA,oBAAA,GAC1G;AAAA,oBACC,iBAAiB,WAAW;AAAA,kBAAA,GAC/B;AAAA,kBAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,sEACb,UAAA;AAAA,oBAAAD,kCAAAA,IAAC,UAAA,EAAO,WAAU,qBAAoB,UAAA,uBAAmB;AAAA,oBACzDA,kCAAAA,IAAC,QAAA,EAAK,WAAU,iCAAgC,UAAA,2HAAA,CAAwH;AAAA,kBAAA,GAC1K;AAAA,kBAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,oHACb,UAAA;AAAA,oBAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,6DACb,UAAA;AAAA,sBAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,oCAAmC,MAAK,QAAO,QAAO,gBAAe,SAAQ,aAC1F,UAAA;AAAA,wBAAAD,kCAAAA,IAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,qFAAA,CAAqF;AAAA,wBAC1JA,kCAAAA,IAAC,UAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,mCAAA,CAAmC;AAAA,sBAAA,GAC1G;AAAA,sBACAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,+CAA+C,2BAAiB,MAAK;AAAA,4DACjF,KAAA,EAAE,WAAU,qCAAqC,UAAA,iBAAiB,WAAW,UAAS;AAAA,sBACtF,iBAAiB,cAChBC,uCAAC,KAAA,EAAE,WAAU,8BAA8B,UAAA;AAAA,wBAAA,iBAAiB;AAAA,wBAAW;AAAA,sBAAA,EAAA,CAAoB;AAAA,oBAAA,GAE/F;AAAA,0DAEC,OAAA,EAAI,WAAU,uFACb,UAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,sBAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,6BAA4B,MAAK,QAAO,QAAO,gBAAe,SAAQ,aACnF,UAAA;AAAA,wBAAAD,kCAAAA,IAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,qFAAA,CAAqF;AAAA,wBAC1JA,kCAAAA,IAAC,UAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,mCAAA,CAAmC;AAAA,sBAAA,GAC1G;AAAA,sBACAA,kCAAAA,IAAC,QAAA,EAAK,WAAU,0CAAyC,UAAA,oBAAA,CAAiB;AAAA,oBAAA,EAAA,CAC5E,EAAA,CACF;AAAA,kBAAA,EAAA,CACF;AAAA,gBAAA,EAAA,CACF;AAAA,cAAA,GACF;AAAA,qDACC,OAAA,EACC,UAAA;AAAA,gBAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,gBAAY;AAAA,gBACjDC,kCAAAA,KAAC,KAAA,EAAE,WAAU,kCAAkC,UAAA;AAAA,kBAAA,iBAAiB,QAAQ,QAAQ,CAAC,KAAK;AAAA,kBAAM;AAAA,kBAAO,iBAAiB,eAAe;AAAA,kBAAE;AAAA,gBAAA,EAAA,CAAS;AAAA,cAAA,EAAA,CAChJ;AAAA,YAAA,EAAA,CACF;AAAA,UAAA,GACF;AAAA,UAGAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,oBAAgB;AAAA,YACxEC,kCAAAA,KAAC,OAAA,EAAI,WAAU,yCACb,UAAA;AAAA,cAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,YAAQ;AAAA,gBAC7CA,sCAAC,OAAE,WAAU,kCAAkC,cAAI,KAAK,OAAO,EAAE,mBAAmB,SAAS,EAAE,SAAS,SAAS,KAAK,WAAW,OAAO,SAAS,MAAM,UAAA,CAAW,GAAE;AAAA,gBACpKA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,gBAAA,CAAa;AAAA,cAAA,GACpD;AAAA,qDACC,OAAA,EACC,UAAA;AAAA,gBAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,aAAS;AAAA,gBAC9CA,sCAAC,OAAE,WAAU,kCAAkC,cAAI,KAAK,QAAQ,EAAE,mBAAmB,SAAS,EAAE,SAAS,SAAS,KAAK,WAAW,OAAO,SAAS,MAAM,UAAA,CAAW,GAAE;AAAA,gBACrKA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,kBAAA,CAAe;AAAA,cAAA,GACtD;AAAA,qDACC,OAAA,EACC,UAAA;AAAA,gBAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,YAAQ;AAAA,gBAC7CA,kCAAAA,IAAC,KAAA,EAAE,WAAU,kCACT,WAAA,MAAM;AACN,wBAAM,cAAc,IAAI,KAAK,OAAO;AACpC,wBAAM,eAAe,IAAI,KAAK,QAAQ;AACtC,wBAAM,WAAW,KAAK,IAAI,eAAe,WAAW;AACpD,wBAAM,WAAW,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AAC3D,wBAAM,SAAS,KAAK,IAAI,GAAG,QAAQ;AACnC,yBAAO,GAAG,MAAM,SAAS,WAAW,IAAI,MAAM,EAAE;AAAA,gBAClD,KAAG,CACL;AAAA,gBACAC,kCAAAA,KAAC,KAAA,EAAE,WAAU,yBAAyB,UAAA;AAAA,kBAAA;AAAA,kBAAO;AAAA,kBAAO,WAAW,IAAI,MAAM;AAAA,gBAAA,EAAA,CAAG;AAAA,cAAA,EAAA,CAC9E;AAAA,YAAA,EAAA,CACF;AAAA,UAAA,GACF;AAAA,UAGC,iBAAiB,aAAa,iBAAiB,UAAU,SAAS,KACjEA,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,sBAAkB;AAAA,YAGzE,iBAAiB,qBAAqB,iBAAiB,kBAAkB,SAAS,KACjFC,kCAAAA,KAAC,OAAA,EAAI,WAAU,QACb,UAAA;AAAA,cAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,0CAAyC,UAAA,8BAA0B;AAAA,cAChFA,kCAAAA,IAAC,OAAA,EAAI,WAAU,yCACZ,UAAA,iBAAiB,kBAAkB,IAAI,CAAC,SAAS,QAChDC,uCAAC,OAAA,EAAc,WAAU,yFACvB,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,SAAI,WAAU,wCAAuC,MAAK,QAAO,QAAO,gBAAe,SAAQ,aAC9F,gDAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,kBAAiB,EAAA,CACxF;AAAA,gBACAA,kCAAAA,IAAC,QAAA,EAAK,WAAU,8BAA8B,UAAA,QAAA,CAAQ;AAAA,cAAA,EAAA,GAJ9C,GAKV,CACD,EAAA,CACH;AAAA,YAAA,GACF;AAAA,mDAID,OAAA,EACC,UAAA;AAAA,cAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,0CAAyC,UAAA,4BAAwB;AAAA,cAC9EA,kCAAAA,IAAC,OAAA,EAAI,WAAU,yCACZ,UAAA,iBAAiB,UAAU,IAAI,CAAC,SAAS,QACxCC,uCAAC,OAAA,EAAc,WAAU,iDACvB,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,SAAI,WAAU,yBAAwB,MAAK,QAAO,QAAO,gBAAe,SAAQ,aAC/E,gDAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,kBAAiB,EAAA,CACxF;AAAA,gBACC;AAAA,cAAA,EAAA,GAJO,GAKV,CACD,EAAA,CACH;AAAA,YAAA,EAAA,CACF;AAAA,UAAA,GACF;AAAA,UAIFC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,aAAS;AAAA,YACjEC,kCAAAA,KAAC,OAAA,EAAI,WAAW,yBACd,iBAAiB,oBAAoB,iBAAiB,qBAAqB,cACvE,iCACA,4BACN,IACE,UAAA;AAAA,cAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAW,iBACZ,iBAAiB,oBAAoB,iBAAiB,qBAAqB,cACvE,mBACA,eACN,IACG,UAAA,CAAC,iBAAiB,oBAAoB,iBAAiB,qBAAqB,cAAc,iBAC1F,iBAAiB,qBAAqB,cAAc,uBACpD,iBAAiB,qBAAqB,eAAe,wCACrD,iBAAiB,qBAAqB,eAAe,+BACrD,iBAAiB,qBAAqB,kBAAkB,qBAAqB,gBAChF;AAAA,cACAA,kCAAAA,IAAC,KAAA,EAAE,WAAW,gBACZ,iBAAiB,oBAAoB,iBAAiB,qBAAqB,cACvE,mBACA,eACN,IACG,UAAA,CAAC,iBAAiB,oBAAoB,iBAAiB,qBAAqB,cAAc,gDAC1F,iBAAiB,qBAAqB,cAAc,0CACpD,iBAAiB,qBAAqB,eAAe,wCACrD,iBAAiB,qBAAqB,eAAe,gDACrD,iBAAiB,qBAAqB,kBAAkB,+CAA+C,oBAAA,CAC1G;AAAA,YAAA,EAAA,CACF;AAAA,UAAA,GACF;AAAA,UAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,qBAAiB;AAAA,YACzEC,kCAAAA,KAAC,OAAA,EAAI,WAAU,aACb,UAAA;AAAA,cAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,gCACb,UAAA;AAAA,gBAAAA,kCAAAA,KAAC,QAAA,EAAK,WAAU,iBAAgB,UAAA;AAAA,kBAAA;AAAA,kBAAE,iBAAiB,cAAc,eAAA;AAAA,kBAAiB;AAAA,mBAAK,MAAM;AAC3F,0BAAM,cAAc,IAAI,KAAK,OAAO;AACpC,0BAAM,eAAe,IAAI,KAAK,QAAQ;AACtC,0BAAM,WAAW,KAAK,IAAI,eAAe,WAAW;AACpD,0BAAM,WAAW,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AAC3D,2BAAO,KAAK,IAAI,GAAG,QAAQ;AAAA,kBAC7B,GAAA;AAAA,kBAAK;AAAA,gBAAA,GAAS;AAAA,gBACdA,kCAAAA,KAAC,QAAA,EAAK,WAAU,iBAAgB,UAAA;AAAA,kBAAA;AAAA,mBAAG,iBAAiB,iBAAiB,MAAM;AACzE,0BAAM,cAAc,IAAI,KAAK,OAAO;AACpC,0BAAM,eAAe,IAAI,KAAK,QAAQ;AACtC,0BAAM,WAAW,KAAK,IAAI,eAAe,WAAW;AACpD,0BAAM,WAAW,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AAC3D,2BAAO,KAAK,IAAI,GAAG,QAAQ;AAAA,kBAC7B,GAAA,GAAM,eAAA;AAAA,gBAAe,EAAA,CAAE;AAAA,cAAA,GACzB;AAAA,cACC,iBAAiB,oBAAoB,iBAAiB,qBAAqB,eAC1EA,uCAAC,OAAA,EAAI,WAAU,kDACb,UAAA;AAAA,gBAAAA,uCAAC,QAAA,EAAK,UAAA;AAAA,kBAAA;AAAA,mBAAa,MAAM;AACvB,wBAAI,iBAAiB,qBAAqB,YAAa,QAAO;AAC9D,wBAAI,iBAAiB,qBAAqB,aAAc,QAAO;AAC/D,wBAAI,iBAAiB,qBAAqB,aAAc,QAAO;AAC/D,wBAAI,iBAAiB,qBAAqB,gBAAiB,QAAO;AAClE,2BAAO;AAAA,kBACT,GAAA;AAAA,gBAAG,GAAE;AAAA,gBACLD,kCAAAA,IAAC,QAAA,EAAK,WAAU,eAAc,UAAA,oBAAA,CAAiB;AAAA,cAAA,GACjD;AAAA,cAEFC,kCAAAA,KAAC,OAAA,EAAI,WAAU,8CACb,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,QAAA,EAAK,WAAU,8BAA6B,UAAA,gBAAY;AAAA,gBACzDC,kCAAAA,KAAC,QAAA,EAAK,WAAU,wCAAuC,UAAA;AAAA,kBAAA;AAAA,mBAAG,iBAAiB,cAAe,iBAAiB,iBAAiB,MAAM;AAChI,0BAAM,cAAc,IAAI,KAAK,OAAO;AACpC,0BAAM,eAAe,IAAI,KAAK,QAAQ;AACtC,0BAAM,WAAW,KAAK,IAAI,eAAe,WAAW;AACpD,0BAAM,WAAW,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AAC3D,2BAAO,KAAK,IAAI,GAAG,QAAQ;AAAA,kBAC7B,GAAA,GAAO,eAAA;AAAA,gBAAe,EAAA,CAAE;AAAA,cAAA,EAAA,CAC1B;AAAA,YAAA,EAAA,CACF;AAAA,UAAA,GACF;AAAA,UAGAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,sBAAkB;AAAA,YAC1EC,kCAAAA,KAAC,OAAA,EAAI,WAAU,6DACb,UAAA;AAAA,cAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,uCAAsC,UAAA,uBAAmB;AAAA,gBACtEC,kCAAAA,KAAC,MAAA,EAAG,WAAU,2CACZ,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,QAAG,UAAA,mDAAA,CAAgD;AAAA,kBACpDA,kCAAAA,IAAC,QAAG,UAAA,2DAAA,CAAwD;AAAA,kBAC5DA,kCAAAA,IAAC,QAAG,UAAA,0DAAA,CAAuD;AAAA,gBAAA,EAAA,CAC7D;AAAA,cAAA,GACF;AAAA,qDACC,OAAA,EACC,UAAA;AAAA,gBAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,uCAAsC,UAAA,iBAAa;AAAA,gBAChEC,kCAAAA,KAAC,MAAA,EAAG,WAAU,2CACZ,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,QAAG,UAAA,2CAAA,CAAwC;AAAA,kBAC5CA,kCAAAA,IAAC,QAAG,UAAA,sDAAA,CAAmD;AAAA,kBACvDA,kCAAAA,IAAC,QAAG,UAAA,sCAAA,CAAmC;AAAA,gBAAA,EAAA,CACzC;AAAA,cAAA,GACF;AAAA,qDACC,OAAA,EACC,UAAA;AAAA,gBAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,uCAAsC,UAAA,qBAAiB;AAAA,gBACpEC,kCAAAA,KAAC,MAAA,EAAG,WAAU,2CACZ,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,QAAG,UAAA,sDAAA,CAAmD;AAAA,kBACvDA,kCAAAA,IAAC,QAAG,UAAA,oCAAA,CAAiC;AAAA,kBACrCA,kCAAAA,IAAC,QAAG,UAAA,wCAAA,CAAqC;AAAA,kBACzCA,kCAAAA,IAAC,QAAG,UAAA,uDAAA,CAAoD;AAAA,gBAAA,EAAA,CAC1D;AAAA,cAAA,GACF;AAAA,qDACC,OAAA,EACC,UAAA;AAAA,gBAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,uCAAsC,UAAA,yBAAqB;AAAA,gBACxEC,kCAAAA,KAAC,MAAA,EAAG,WAAU,2CACZ,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,QAAG,UAAA,4DAAA,CAAyD;AAAA,kBAC7DA,kCAAAA,IAAC,QAAG,UAAA,gFAAA,CAA6E;AAAA,kBACjFA,kCAAAA,IAAC,QAAG,UAAA,gCAAA,CAA6B;AAAA,gBAAA,EAAA,CACnC;AAAA,cAAA,EAAA,CACF;AAAA,YAAA,EAAA,CACF;AAAA,UAAA,GACF;AAAA,UAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iBACb,UAAA;AAAA,YAAAD,kCAAAA,IAAC,MAAA,EAAG,WAAU,2CAA0C,UAAA,oBAAgB;AAAA,YAGxEC,kCAAAA,KAAC,OAAA,EAAI,WAAU,2DACb,UAAA;AAAA,cAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,gCACb,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,SAAI,WAAU,0BAAyB,MAAK,QAAO,QAAO,gBAAe,SAAQ,aAChF,gDAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,oJAAmJ,EAAA,CAC1N;AAAA,gBACAA,kCAAAA,IAAC,MAAA,EAAG,WAAU,gCAA+B,UAAA,+CAAA,CAA4C;AAAA,cAAA,GAC3F;AAAA,cACAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,+BAA8B,UAAA,kEAA8D;AAAA,cACzGC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iDACZ,UAAA;AAAA,gBAAA,iBAAiB,gDACf,OAAA,EACC,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,kBAAc;AAAA,kBACxDA,kCAAAA,IAAC,KAAA,EAAE,WAAU,gCAAgC,2BAAiB,MAAA,CAAM;AAAA,gBAAA,GACtE;AAAA,gBAED,iBAAiB,SAChBC,kCAAAA,KAAC,OAAA,EACC,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,kBAAc;AAAA,kBACxDA,kCAAAA,IAAC,KAAA,EAAE,WAAU,gCAAgC,2BAAiB,MAAA,CAAM;AAAA,gBAAA,EAAA,CACtE;AAAA,cAAA,EAAA,CAEJ;AAAA,YAAA,GACF;AAAA,YAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iEACb,UAAA;AAAA,cAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,gCACb,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,SAAI,WAAU,6BAA4B,MAAK,QAAO,QAAO,gBAAe,SAAQ,aACnF,gDAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,6GAA4G,EAAA,CACnL;AAAA,gBACAA,kCAAAA,IAAC,MAAA,EAAG,WAAU,0CAAyC,UAAA,2BAAA,CAAwB;AAAA,cAAA,GACjF;AAAA,cACAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,iCAAgC,UAAA,2MAG7C;AAAA,cACAC,kCAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,SAAS,MAAM;AAEb,2BAAO,cAAc,IAAI,YAAY,aAAa,CAAC;AAEnD,2BAAO,SAAS,EAAE,KAAK,SAAS,KAAK,cAAc,UAAU,UAAU;AAAA,kBACzE;AAAA,kBACA,WAAU;AAAA,kBAEV,UAAA;AAAA,oBAAAD,kCAAAA,IAAC,SAAI,WAAU,WAAU,MAAK,QAAO,QAAO,gBAAe,SAAQ,aACjE,gDAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,iKAAgK,EAAA,CACvO;AAAA,oBAAM;AAAA,kBAAA;AAAA,gBAAA;AAAA,cAAA;AAAA,cAGRA,kCAAAA,IAAC,KAAA,EAAE,WAAU,0CAAyC,UAAA,0FAAA,CAEtD;AAAA,YAAA,GACF;AAAA,YAGAC,kCAAAA,KAAC,OAAA,EAAI,WAAU,oDACb,UAAA;AAAA,cAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAU,gCACb,UAAA;AAAA,gBAAAD,kCAAAA,IAAC,SAAI,WAAU,yBAAwB,MAAK,QAAO,QAAO,gBAAe,SAAQ,aAC/E,gDAAC,QAAA,EAAK,eAAc,SAAQ,gBAAe,SAAQ,aAAa,GAAG,GAAE,iKAAgK,EAAA,CACvO;AAAA,gBACAA,kCAAAA,IAAC,MAAA,EAAG,WAAU,qCAAoC,UAAA,iCAAA,CAA8B;AAAA,cAAA,GAClF;AAAA,cACAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,8BAA6B,UAAA,sEAA4E;AAAA,cACtHC,kCAAAA,KAAC,OAAA,EAAI,WAAU,iDACb,UAAA;AAAA,gBAAAA,uCAAC,OAAA,EACC,UAAA;AAAA,kBAAAD,kCAAAA,IAAC,KAAA,EAAE,WAAU,iBAAgB,UAAA,iBAAa;AAAA,kBAC1CA,kCAAAA,IAAC,KAAA,EAAE,WAAU,+BAA8B,UAAA,yBAAqB;AAAA,kBAChEA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,4BAAA,CAAyB;AAAA,gBAAA,GAChE;AAAA,uDACC,OAAA,EACC,UAAA;AAAA,kBAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,iBAAgB,UAAA,uBAAmB;AAAA,kBAChDA,kCAAAA,IAAC,KAAA,EAAE,WAAU,+BAA8B,UAAA,mBAAe;AAAA,kBAC1DA,kCAAAA,IAAC,KAAA,EAAE,WAAU,yBAAwB,UAAA,mBAAA,CAAgB;AAAA,gBAAA,EAAA,CACvD;AAAA,cAAA,EAAA,CACF;AAAA,YAAA,EAAA,CACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CAEF;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,GAEJ;AAAA,IAGC,wBACCA,kCAAAA;AAAAA,MAAC;AAAA,MAAA;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,kBAAkB;AAAA,QAClB,QAAQ;AAAA,QACR,UAAU,MAAM,wBAAwB,KAAK;AAAA,MAAA;AAAA,IAAA;AAAA,EAC/C,GAEJ;AAEJ;AAEI,SAAwB,uBAAuB;AAC7C,SACEA,kCAAAA,IAAC,eAAA,EACC,UAAAA,kCAAAA,IAAC,2BAAA,CAAA,CAA0B,GAC7B;AAEJ;"}