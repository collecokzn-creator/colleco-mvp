{"version":3,"file":"AdminAccommodation-DMs3tVG7.js","sources":["../../src/pages/AdminAccommodation.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function AdminAccommodation(){\r\n  const [inventory, setInventory] = useState(null);\r\n  const [holds, setHolds] = useState(null);\r\n  const [editing, setEditing] = useState({});\r\n  const nav = useNavigate();\r\n\r\n  useEffect(()=>{\r\n    async function doLoad(){\r\n      try{\r\n        const res = await fetch('/api/accommodation/admin');\r\n        if(!res.ok){ if(res.status===401) return nav('/login'); const txt = await res.text(); throw new Error(txt); }\r\n        const j = await res.json(); setInventory(j.inventory); setHolds(j.holds || {});\r\n      }catch(e){ console.error(e); }\r\n    }\r\n    doLoad();\r\n  }, [nav]);\r\n\r\n  async function saveRoomTypes(){\r\n    const body = { roomTypes: editing };\r\n    const res = await fetch('/api/accommodation/inventory',{ method:'PUT', headers:{ 'content-type':'application/json' }, body: JSON.stringify(body) });\r\n    if(!res.ok) { const txt = await res.text(); alert('Save failed: '+txt); return; }\r\n    const j = await res.json(); setInventory(j.inventory); setEditing({});\r\n  }\r\n\r\n  if(!inventory) return <div className=\"p-6\">Loading admin accommodationâ€¦</div>;\r\n\r\n  const roomTypes = inventory.roomTypes || {};\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-xl font-semibold mb-4\">Accommodation Inventory</h2>\r\n      <div className=\"mb-4\">\r\n        <table className=\"w-full border\">\r\n          <thead><tr><th className=\"p-2\">Room Type</th><th className=\"p-2\">Total</th><th className=\"p-2\">Price</th></tr></thead>\r\n          <tbody>\r\n            {Object.entries(roomTypes).map(([k,v]) => (\r\n              <tr key={k} className=\"border-t\">\r\n                <td className=\"p-2 font-medium\">{k}</td>\r\n                <td className=\"p-2\">{v.total}</td>\r\n                <td className=\"p-2\">{v.price}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <h3 className=\"font-semibold\">Edit Room Types</h3>\r\n        <div className=\"grid grid-cols-3 gap-2 mt-2\">\r\n          <input placeholder=\"name\" onChange={(e)=> setEditing({...editing, [e.target.value]: editing[e.target.value] || { total:0, price:0 }})} className=\"border p-2\" />\r\n          <input placeholder=\"total\" type=\"number\" onChange={(e)=>{ const k = Object.keys(editing)[0]; if(!k) return; editing[k] = { ...(editing[k]||{}), total: Number(e.target.value||0) }; setEditing({...editing}); }} className=\"border p-2\" />\r\n          <input placeholder=\"price\" type=\"number\" step=\"0.01\" onChange={(e)=>{ const k = Object.keys(editing)[0]; if(!k) return; editing[k] = { ...(editing[k]||{}), price: Number(e.target.value||0) }; setEditing({...editing}); }} className=\"border p-2\" />\r\n        </div>\r\n        <div className=\"mt-2\">\r\n          <button onClick={saveRoomTypes} className=\"px-3 py-2 bg-brand-orange text-white rounded\">Save</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <h3 className=\"font-semibold\">Active Holds</h3>\r\n        <pre className=\"mt-2 bg-gray-50 p-2 rounded text-sm overflow-auto\">{JSON.stringify(holds, null, 2)}</pre>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":";;;;;AAGA,SAAwB,qBAAoB;AAC1C,QAAM,CAAC,WAAW,YAAY,IAAIA,aAAAA,SAAS,IAAI;AAC/C,QAAM,CAAC,OAAO,QAAQ,IAAIA,aAAAA,SAAS,IAAI;AACvC,QAAM,CAAC,SAAS,UAAU,IAAIA,aAAAA,SAAS,CAAA,CAAE;AACzC,QAAM,MAAM,YAAA;AAEZC,eAAAA,UAAU,MAAI;AACZ,mBAAe,SAAQ;AACrB,UAAG;AACD,cAAM,MAAM,MAAM,MAAM,0BAA0B;AAClD,YAAG,CAAC,IAAI,IAAG;AAAE,cAAG,IAAI,WAAS,IAAK,QAAO,IAAI,QAAQ;AAAG,gBAAM,MAAM,MAAM,IAAI,KAAA;AAAQ,gBAAM,IAAI,MAAM,GAAG;AAAA,QAAG;AAC5G,cAAM,IAAI,MAAM,IAAI,KAAA;AAAQ,qBAAa,EAAE,SAAS;AAAG,iBAAS,EAAE,SAAS,EAAE;AAAA,MAC/E,SAAO,GAAE;AAAE,gBAAQ,MAAM,CAAC;AAAA,MAAG;AAAA,IAC/B;AACA,WAAA;AAAA,EACF,GAAG,CAAC,GAAG,CAAC;AAER,iBAAe,gBAAe;AAC5B,UAAM,OAAO,EAAE,WAAW,QAAA;AAC1B,UAAM,MAAM,MAAM,MAAM,gCAA+B,EAAE,QAAO,OAAO,SAAQ,EAAE,gBAAe,sBAAsB,MAAM,KAAK,UAAU,IAAI,GAAG;AAClJ,QAAG,CAAC,IAAI,IAAI;AAAE,YAAM,MAAM,MAAM,IAAI,KAAA;AAAQ,YAAM,kBAAgB,GAAG;AAAG;AAAA,IAAQ;AAChF,UAAM,IAAI,MAAM,IAAI,KAAA;AAAQ,iBAAa,EAAE,SAAS;AAAG,eAAW,CAAA,CAAE;AAAA,EACtE;AAEA,MAAG,CAAC,UAAW,8CAAQ,OAAA,EAAI,WAAU,OAAM,UAAA,gCAA4B;AAEvE,QAAM,YAAY,UAAU,aAAa,CAAA;AAEzC,SACEC,kCAAAA,KAAC,OAAA,EAAI,WAAU,OACb,UAAA;AAAA,IAAAC,kCAAAA,IAAC,MAAA,EAAG,WAAU,8BAA6B,UAAA,2BAAuB;AAAA,0CACjE,OAAA,EAAI,WAAU,QACb,UAAAD,kCAAAA,KAAC,SAAA,EAAM,WAAU,iBACf,UAAA;AAAA,MAAAC,kCAAAA,IAAC,SAAA,EAAM,iDAAC,MAAA,EAAG,UAAA;AAAA,QAAAA,kCAAAA,IAAC,MAAA,EAAG,WAAU,OAAM,UAAA,aAAS;AAAA,QAAKA,kCAAAA,IAAC,MAAA,EAAG,WAAU,OAAM,UAAA,SAAK;AAAA,QAAKA,kCAAAA,IAAC,MAAA,EAAG,WAAU,OAAM,UAAA,QAAA,CAAK;AAAA,MAAA,EAAA,CAAK,EAAA,CAAK;AAAA,MAC9GA,kCAAAA,IAAC,SAAA,EACE,UAAA,OAAO,QAAQ,SAAS,EAAE,IAAI,CAAC,CAAC,GAAE,CAAC,MAClCD,kCAAAA,KAAC,MAAA,EAAW,WAAU,YACpB,UAAA;AAAA,QAAAC,kCAAAA,IAAC,MAAA,EAAG,WAAU,mBAAmB,UAAA,GAAE;AAAA,QACnCA,kCAAAA,IAAC,MAAA,EAAG,WAAU,OAAO,YAAE,OAAM;AAAA,QAC7BA,kCAAAA,IAAC,MAAA,EAAG,WAAU,OAAO,YAAE,MAAA,CAAM;AAAA,MAAA,EAAA,GAHtB,CAIT,CACD,EAAA,CACH;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,IAEAD,kCAAAA,KAAC,OAAA,EAAI,WAAU,QACb,UAAA;AAAA,MAAAC,kCAAAA,IAAC,MAAA,EAAG,WAAU,iBAAgB,UAAA,mBAAe;AAAA,MAC7CD,kCAAAA,KAAC,OAAA,EAAI,WAAU,+BACb,UAAA;AAAA,QAAAC,kCAAAA,IAAC,SAAA,EAAM,aAAY,QAAO,UAAU,CAAC,MAAK,WAAW,EAAC,GAAG,SAAS,CAAC,EAAE,OAAO,KAAK,GAAG,QAAQ,EAAE,OAAO,KAAK,KAAK,EAAE,OAAM,GAAG,OAAM,EAAA,EAAE,CAAE,GAAG,WAAU,aAAA,CAAa;AAAA,QAC9JA,sCAAC,WAAM,aAAY,SAAQ,MAAK,UAAS,UAAU,CAAC,MAAI;AAAE,gBAAM,IAAI,OAAO,KAAK,OAAO,EAAE,CAAC;AAAG,cAAG,CAAC,EAAG;AAAQ,kBAAQ,CAAC,IAAI,EAAE,GAAI,QAAQ,CAAC,KAAG,CAAA,GAAK,OAAO,OAAO,EAAE,OAAO,SAAO,CAAC,EAAA;AAAK,qBAAW,EAAC,GAAG,SAAQ;AAAA,QAAG,GAAG,WAAU,cAAa;AAAA,QACxOA,kCAAAA,IAAC,SAAA,EAAM,aAAY,SAAQ,MAAK,UAAS,MAAK,QAAO,UAAU,CAAC,MAAI;AAAE,gBAAM,IAAI,OAAO,KAAK,OAAO,EAAE,CAAC;AAAG,cAAG,CAAC,EAAG;AAAQ,kBAAQ,CAAC,IAAI,EAAE,GAAI,QAAQ,CAAC,KAAG,CAAA,GAAK,OAAO,OAAO,EAAE,OAAO,SAAO,CAAC,EAAA;AAAK,qBAAW,EAAC,GAAG,SAAQ;AAAA,QAAG,GAAG,WAAU,aAAA,CAAa;AAAA,MAAA,GACtP;AAAA,MACAA,kCAAAA,IAAC,OAAA,EAAI,WAAU,QACb,UAAAA,kCAAAA,IAAC,UAAA,EAAO,SAAS,eAAe,WAAU,gDAA+C,UAAA,OAAA,CAAI,EAAA,CAC/F;AAAA,IAAA,GACF;AAAA,2CAEC,OAAA,EACC,UAAA;AAAA,MAAAA,kCAAAA,IAAC,MAAA,EAAG,WAAU,iBAAgB,UAAA,gBAAY;AAAA,MAC1CA,kCAAAA,IAAC,SAAI,WAAU,qDAAqD,eAAK,UAAU,OAAO,MAAM,CAAC,EAAA,CAAE;AAAA,IAAA,EAAA,CACrG;AAAA,EAAA,GACF;AAEJ;"}