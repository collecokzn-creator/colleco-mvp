{"version":3,"file":"Bookings-BYtPTBMw.js","sources":["../../src/components/payments/FeesBreakdown.jsx","../../src/components/payments/PaymentButton.jsx","../../src/components/payments/PaymentsHistory.jsx","../../src/pages/Bookings.jsx"],"sourcesContent":["import React from \"react\";\r\n\r\nexport default function FeesBreakdown({ items = [], currency = \"USD\", fees }) {\r\n  const _subtotal = items.reduce((s, it) => s + Math.max(0, Number(it.amount || 0)), 0);\r\n  const f = fees || computeFeesLocal(items);\r\n  return (\r\n    <div className=\"border border-cream-border rounded p-3 bg-cream text-brand-brown text-sm\">\r\n      <div className=\"font-semibold mb-2\">Price breakdown</div>\r\n      <Row label=\"Subtotal\" value={f.subtotal} currency={currency} />\r\n      <Row label=\"Payment processing\" value={f.paymentProcessor} currency={currency} />\r\n      <Row label=\"Platform fee\" value={f.platformFee} currency={currency} />\r\n      <Row label=\"Taxes\" value={f.taxes} currency={currency} />\r\n      <div className=\"border-t border-cream-border mt-2 pt-2 font-semibold\">\r\n        <Row label=\"Total\" value={f.total} currency={currency} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Row({ label, value, currency }) {\r\n  return (\r\n    <div className=\"flex items-center justify-between py-0.5\">\r\n      <span>{label}</span>\r\n      <span>{formatCurrency(value, currency)}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction formatCurrency(v, cur) {\r\n  try { return new Intl.NumberFormat(undefined, { style: 'currency', currency: cur }).format(v); } catch { return `${cur} ${v.toFixed(2)}`; }\r\n}\r\n\r\nfunction computeFeesLocal(items = []) {\r\n  const subtotal = items.reduce((sum, it) => sum + Math.max(0, Number(it.amount || 0)), 0);\r\n  const paymentProcessor = Math.round(subtotal * 0.029 * 100) / 100 + 0.3; // 2.9% + $0.30\r\n  const platformFee = Math.round(subtotal * 0.05 * 100) / 100; // 5%\r\n  const taxes = Math.round(subtotal * 0.15 * 100) / 100; // 15%\r\n  const total = Math.round((subtotal + paymentProcessor + platformFee + taxes) * 100) / 100;\r\n  return { subtotal, paymentProcessor, platformFee, taxes, total };\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { createMockCheckout } from \"../../utils/payments\";\r\nimport { createBooking as apiCreateBooking } from \"../../api/client\";\r\n\r\nexport default function PaymentButton({ items = [], currency = \"USD\" }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  // bookingInfo: { booking?, checkoutUrl?, sessionId?, fees? }\r\n  const [bookingInfo, setBookingInfo] = useState(null);\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  function sendAnalytics(event, data = {}) {\r\n    // Lightweight analytics hook: prefer dataLayer if present, otherwise console.debug\r\n    try {\r\n      if (window && window.dataLayer && typeof window.dataLayer.push === 'function') {\r\n        window.dataLayer.push({ event, ...data });\r\n      }\r\n    } catch (e) {\r\n      // ignore analytics failures in older browsers\r\n    }\r\n  }\r\n\r\n  async function startCheckout() {\r\n    setError(\"\");\r\n    setLoading(true);\r\n    setBookingInfo(null);\r\n    setCopied(false);\r\n    try {\r\n  // Prefer runtime E2E override when present (set by Cypress support on onBeforeLoad)\r\n  const runtimeApi = (typeof window !== 'undefined' && window.__E2E_API_BASE) ? window.__E2E_API_BASE : null;\r\n  const apiBase = runtimeApi || import.meta.env.VITE_API_BASE || '';\r\n      // If API base is configured, create booking on server which will return checkout info\r\n      if (apiBase) {\r\n        const payload = { items, customer: {}, currency, metadata: { source: 'itinerary' } };\r\n        const created = await apiCreateBooking(payload);\r\n        if (!created || !created.booking) throw new Error('Booking creation failed');\r\n        // Keep booking info in UI and let user confirm before redirecting to checkout\r\n        setBookingInfo({ booking: created.booking, checkoutUrl: created.checkout?.checkoutUrl, fees: created.fees });\r\n        sendAnalytics('booking:created', { id: created.booking.id, ref: created.booking.ref });\r\n        return;\r\n      }\r\n\r\n      // Local mock: create a mock checkout and surface session id as a reference\r\n      const mock = createMockCheckout({ items, currency, metadata: { source: 'itinerary' } });\r\n      setBookingInfo({ sessionId: mock.sessionId, checkoutUrl: mock.checkoutUrl });\r\n      sendAnalytics('booking:created:mock', { sessionId: mock.sessionId });\r\n    } catch (e) {\r\n      setError(e.message || 'Payment failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function handleProceed() {\r\n    if (!bookingInfo) return;\r\n    const url = bookingInfo.checkoutUrl;\r\n    if (url) {\r\n      // support relative URL returned by server\r\n      const to = url.startsWith('/') ? `${window.location.origin}${url}` : url;\r\n      // small analytics event\r\n      sendAnalytics('booking:proceed_to_payment', { bookingRef: bookingInfo.booking?.ref || bookingInfo.sessionId });\r\n      window.location.assign(to);\r\n      return;\r\n    }\r\n    // no checkout required ‚Äî go to bookings list or success page\r\n    if (bookingInfo.booking && bookingInfo.booking.id) {\r\n      window.location.assign(`/payment-success?bookingId=${bookingInfo.booking.id}`);\r\n      return;\r\n    }\r\n    window.location.assign('/bookings');\r\n  }\r\n\r\n  function handleView() {\r\n    if (bookingInfo && bookingInfo.booking && bookingInfo.booking.id) {\r\n      window.location.assign(`/payment-success?bookingId=${bookingInfo.booking.id}`);\r\n      return;\r\n    }\r\n    window.location.assign('/bookings');\r\n  }\r\n\r\n  async function handleCopyRef() {\r\n    const ref = bookingInfo?.booking?.ref || bookingInfo?.sessionId || '';\r\n    if (!ref) return;\r\n    try {\r\n      if (navigator.clipboard && navigator.clipboard.writeText) {\r\n        await navigator.clipboard.writeText(ref);\r\n      } else {\r\n        // fallback\r\n        const ta = document.createElement('textarea');\r\n        ta.value = ref; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove();\r\n      }\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n      sendAnalytics('booking:ref_copied', { ref });\r\n    } catch (e) {\r\n      // ignore copy failures\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!bookingInfo ? (\r\n        <div>\r\n          <button onClick={startCheckout} disabled={loading} className=\"px-4 py-2 bg-brand-orange text-white rounded hover:bg-brand-highlight disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed\">\r\n            {loading ? 'Creating booking‚Ä¶' : 'Pay securely'}\r\n          </button>\r\n          {error ? <div className=\"text-sm text-red-600 mt-1\">{error}</div> : null}\r\n        </div>\r\n      ) : (\r\n        <div className=\"p-3 border rounded bg-gray-50 mt-2\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div>\r\n              <div className=\"text-xs text-gray-500\">Booking</div>\r\n              <div className=\"font-medium text-sm\">{bookingInfo.booking ? bookingInfo.booking.ref : `Session ${bookingInfo.sessionId}`}</div>\r\n              {bookingInfo.booking && bookingInfo.booking.status ? <div className=\"text-xs text-gray-500\">Status: {bookingInfo.booking.status}</div> : null}\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button onClick={handleCopyRef} className=\"text-sm text-gray-600 hover:text-gray-800\">{copied ? 'Copied!' : 'Copy ref'}</button>\r\n            </div>\r\n          </div>\r\n          {bookingInfo.fees ? (\r\n            <div className=\"mt-2 text-sm text-gray-700\">Total: {bookingInfo.fees.currency} {bookingInfo.fees.total}</div>\r\n          ) : null}\r\n          <div className=\"mt-3 flex gap-2\">\r\n            <button onClick={handleProceed} className=\"px-3 py-1 bg-brand-orange text-white rounded\">Proceed to payment</button>\r\n            <button onClick={handleView} className=\"px-3 py-1 border rounded\">View booking</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { listPayments } from \"../../utils/payments\";\r\n\r\nexport default function PaymentsHistory() {\r\n  const payments = listPayments().slice().sort((a,b) => (b.paidAt||0) - (a.paidAt||0));\r\n  if (!payments.length) {\r\n    return <div className=\"text-sm text-brand-brown/70\">No payments yet.</div>;\r\n  }\r\n  return (\r\n    <div className=\"text-brand-brown\">\r\n      <ul className=\"divide-y divide-cream-border\">\r\n        {payments.map(p => (\r\n          <li key={p.id} className=\"py-2 flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"font-medium text-sm\">Payment {p.id.slice(0,8)}</div>\r\n              <div className=\"text-xs text-brand-brown/70\">{new Date(p.paidAt).toLocaleString()}</div>\r\n            </div>\r\n            <div className=\"text-sm font-semibold\">{p.amount.toFixed(2)} {p.currency}</div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useMemo, useState, useRef, useCallback } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AutoSyncBanner from \"../components/ui/AutoSyncBanner\";\r\nimport LiveStatCard from \"../components/ui/LiveStatCard\";\r\nimport FeesBreakdown from \"../components/payments/FeesBreakdown\";\r\nimport PaymentButton from \"../components/payments/PaymentButton\";\r\nimport Button from \"../components/ui/Button.jsx\";\r\nimport { totalPaid } from \"../utils/payments\";\r\nimport PaymentsHistory from \"../components/payments/PaymentsHistory\";\r\nimport VerifiedBadge from \"../components/ui/VerifiedBadge\";\r\nimport { isApiEnabled as providersApiEnabled, listProviders } from \"../api/providersApi\";\r\nimport WorkflowPanel from \"../components/WorkflowPanel\";\r\n\r\nexport default function Bookings() {\r\n\tconst [providers, setProviders] = useState([]);\r\n\tconst [trustedOnly, setTrustedOnly] = useState(false);\r\n\t// Filter and sort state\r\n\tconst [statusFilter, setStatusFilter] = useState(() => {\r\n\t\ttry { return localStorage.getItem('bookings:statusFilter') || 'all'; } catch { return 'all'; }\r\n\t}); // 'all' | 'pending' | 'confirmed' | 'completed'\r\n\tconst [sortBy, setSortBy] = useState(() => {\r\n\t\ttry { return localStorage.getItem('bookings:sortBy') || 'date'; } catch { return 'date'; }\r\n\t}); // 'date' | 'price' | 'status'\r\n\tconst [searchTerm, setSearchTerm] = useState('');\r\n\t\r\n\t// Smart automation refs\r\n\tconst autoRefreshTimerRef = useRef(null);\r\n\tconst lastRecommendationRef = useRef(null);\r\n\t\r\n\t// Persist preferences\r\n\tuseEffect(() => { try { localStorage.setItem('bookings:statusFilter', statusFilter); } catch {} }, [statusFilter]);\r\n\tuseEffect(() => { try { localStorage.setItem('bookings:sortBy', sortBy); } catch {} }, [sortBy]);\r\n\t\r\n\t// Auto-refresh bookings from localStorage every 30 seconds\r\n\tuseEffect(() => {\r\n\t\tconst refresh = () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst saved = localStorage.getItem('colleco.bookings');\r\n\t\t\t\tif (saved) {\r\n\t\t\t\t\t// Silent refresh - updates happen in background\r\n\t\t\t\t\tconst _bookings = JSON.parse(saved); // future state usage\r\n\t\t\t\t\t// Store would update here if using state management\r\n\t\t\t\t}\r\n\t\t\t} catch {}\r\n\t\t};\r\n\t\t\r\n\t\tautoRefreshTimerRef.current = setInterval(refresh, 30000);\r\n\t\treturn () => {\r\n\t\t\tif (autoRefreshTimerRef.current) clearInterval(autoRefreshTimerRef.current);\r\n\t\t};\r\n\t}, []);\r\n\t\r\n\t// Smart urgency detection - auto-sort pending items by date proximity\r\n\tconst smartSort = useCallback((items) => {\r\n\t\tconst now = new Date();\r\n\t\treturn items.sort((a, b) => {\r\n\t\t\t// Pending items within 48 hours get priority\r\n\t\t\tconst aDate = new Date(a.date);\r\n\t\t\tconst bDate = new Date(b.date);\r\n\t\t\tconst aUrgent = a.status === 'pending' && (aDate - now) < 48 * 60 * 60 * 1000;\r\n\t\t\tconst bUrgent = b.status === 'pending' && (bDate - now) < 48 * 60 * 60 * 1000;\r\n\t\t\t\r\n\t\t\tif (aUrgent && !bUrgent) return -1;\r\n\t\t\tif (!aUrgent && bUrgent) return 1;\r\n\t\t\t\r\n\t\t\t// Then apply user's selected sort\r\n\t\t\tif (sortBy === 'date') return bDate - aDate;\r\n\t\t\tif (sortBy === 'price') return b.amount - a.amount;\r\n\t\t\tif (sortBy === 'status') {\r\n\t\t\t\tconst order = { pending: 0, confirmed: 1, completed: 2 };\r\n\t\t\t\treturn order[a.status] - order[b.status];\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t});\r\n\t}, [sortBy]);\r\n\t\r\n\t// Auto-recommendation system\r\n\tconst getSmartRecommendation = (items) => {\r\n\t\tconst pendingCount = items.filter(i => i.status === 'pending').length;\r\n\t\tconst upcomingCount = items.filter(i => {\r\n\t\t\tconst days = Math.ceil((new Date(i.date) - new Date()) / (1000 * 60 * 60 * 24));\r\n\t\t\treturn days >= 0 && days <= 7 && i.status === 'confirmed';\r\n\t\t}).length;\r\n\t\t\r\n\t\tif (pendingCount > 2) return '‚ö° You have multiple pending bookings. Consider confirming soon.';\r\n\t\tif (upcomingCount > 0) return `üìÖ ${upcomingCount} booking${upcomingCount > 1 ? 's' : ''} coming up this week!`;\r\n\t\tif (items.length === 0) return '‚ú® Start planning your next adventure!';\r\n\t\treturn null;\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tif (!providersApiEnabled) return;\r\n\t\t\ttry { const list = await listProviders(); setProviders(list); } catch {}\r\n\t\t})();\r\n\t}, []);\r\n\tconst verifiedIds = useMemo(() => new Set((providers||[]).filter(p => p.verified).map(p => p.id)), [providers]);\r\n\t\r\n  // Mock items with status and dates\r\n  const items = useMemo(() => ([\r\n\t\t{ \r\n\t\t\tname: 'Sea View Hotel (2 nights)', \r\n\t\t\tamount: 180, \r\n\t\t\tproviderId: 'hotel-123',\r\n\t\t\tstatus: 'confirmed',\r\n\t\t\tdate: '2024-10-01',\r\n\t\t\tcategory: 'Accommodation'\r\n\t\t},\r\n\t\t{ \r\n\t\t\tname: 'Table Mountain Hike', \r\n\t\t\tamount: 60, \r\n\t\t\tproviderId: 'hike-789',\r\n\t\t\tstatus: 'confirmed',\r\n\t\t\tdate: '2024-10-02',\r\n\t\t\tcategory: 'Activity'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Airport Transfer',\r\n\t\t\tamount: 45,\r\n\t\t\tproviderId: 'transfer-456',\r\n\t\t\tstatus: 'pending',\r\n\t\t\tdate: '2024-09-30',\r\n\t\t\tcategory: 'Transport'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Safari Tour (3 days)',\r\n\t\t\tamount: 320,\r\n\t\t\tproviderId: 'safari-321',\r\n\t\t\tstatus: 'completed',\r\n\t\t\tdate: '2024-09-15',\r\n\t\t\tcategory: 'Activity'\r\n\t\t}\r\n  ]), []);\r\n  \r\n  // Filter and sort logic with smart enhancements\r\n  const filteredAndSortedItems = useMemo(() => {\r\n    let filtered = [...items];\r\n    \r\n    // Apply trusted filter\r\n    if (trustedOnly && providersApiEnabled) {\r\n      filtered = filtered.filter(it => it.providerId && verifiedIds.has(it.providerId));\r\n    }\r\n    \r\n    // Apply status filter\r\n    if (statusFilter !== 'all') {\r\n      filtered = filtered.filter(it => it.status === statusFilter);\r\n    }\r\n    \r\n    // Apply search\r\n    if (searchTerm.trim()) {\r\n      const term = searchTerm.trim().toLowerCase();\r\n      filtered = filtered.filter(it => \r\n        it.name.toLowerCase().includes(term) ||\r\n        it.category.toLowerCase().includes(term) ||\r\n        it.status.toLowerCase().includes(term)\r\n      );\r\n    }\r\n    \r\n    // Smart sort with urgency detection\r\n    return smartSort(filtered);\r\n\t}, [items, trustedOnly, verifiedIds, statusFilter, searchTerm, smartSort]);\r\n  \r\n  // Get smart recommendation\r\n\tconst _recommendation = useMemo(() => {\r\n\t\tconst rec = getSmartRecommendation(filteredAndSortedItems);\r\n\t\tlastRecommendationRef.current = rec;\r\n\t\treturn rec;\r\n\t}, [filteredAndSortedItems]);\r\n  \r\n  // Export to CSV\r\n  function exportToCSV() {\r\n    const headers = ['Name', 'Amount', 'Status', 'Date', 'Category'];\r\n    const rows = filteredAndSortedItems.map(it => [\r\n      it.name,\r\n      it.amount,\r\n      it.status,\r\n      it.date,\r\n      it.category\r\n    ]);\r\n    const csv = [headers, ...rows].map(row => row.map(cell => `\"${cell}\"`).join(',')).join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `bookings_${new Date().toISOString().split('T')[0]}.csv`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  }\r\n  \r\n\tconst _statusBadgeColor = (status) => { // currently not used; placeholder for future badge styling\r\n    if (status === 'confirmed') return 'text-emerald-700';\r\n    if (status === 'pending') return 'text-amber-600';\r\n    if (status === 'completed') return 'text-gray-600';\r\n    return 'text-brand-brown';\r\n  };\r\n  \r\n\treturn (\r\n\t\t<div className=\"min-h-screen bg-gradient-to-br from-cream via-white to-cream-sand overflow-x-hidden\">\r\n\t\t\t<div className=\"max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8\">\r\n\t\t\t\t{/* Professional Header */}\r\n\t\t\t\t<div className=\"mb-6 sm:mb-8\">\r\n\t\t\t\t\t<div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-3\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t<h1 className=\"text-3xl sm:text-4xl font-bold text-brand-brown flex items-center gap-3\">\r\n\t\t\t\t\t\tBookings\r\n\t\t\t\t\t\t<span className=\"inline-flex items-center gap-1 text-xs bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 px-3 py-1.5 rounded-full font-semibold border border-green-200 shadow-sm\" title=\"Auto-refresh, smart sorting, and intelligent recommendations enabled\">\r\n\t\t\t\t\t\t\tSmart Mode\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<p className=\"mt-2 text-brand-russty text-sm sm:text-base\">All your confirmed items in one place ‚Äî always up to date.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"flex items-center gap-2 sm:gap-3\">\r\n\t\t\t\t\t\t\t<Link to=\"/check-in\">\r\n\t\t\t\t\t\t\t\t<Button variant=\"primary\" size=\"md\">Check-In</Button>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t<Button variant=\"outline\" size=\"md\" onClick={exportToCSV} title=\"Export to CSV\">\r\n\t\t\t\t\t\t\t\t<span className=\"hidden sm:inline\">Export</span>\r\n\t\t\t\t\t\t\t\t<span className=\"sm:hidden\">CSV</span>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t<div className=\"mb-3\"><AutoSyncBanner message=\"Bookings sync with partners automatically ‚Äî no manual refresh needed.\" /></div>\r\n\r\n\t\t\t{/* Workflow Panel */}\r\n\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t<WorkflowPanel currentPage=\"bookings\" basketCount={0} />\r\n\t\t\t</div>\r\n\r\n\t\t\t<section className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6\">\r\n\t\t\t\t<LiveStatCard title=\"Upcoming\" value=\"‚Äî\" />\r\n\t\t\t\t<LiveStatCard title=\"Total paid\" value={`$${totalPaid().toFixed(2)}`} />\r\n\t\t\t\t<LiveStatCard title=\"Changes pending\" value=\"‚Äî\" />\r\n\t\t\t</section>\r\n\t\t\t\r\n\t\t\t{/* Filters and Search */}\r\n\t\t\t<section className=\"bg-white rounded-xl shadow-md border border-cream-border p-4 sm:p-6 mb-4 sm:mb-6\">\r\n\t\t\t\t<h3 className=\"text-lg font-bold text-brand-brown mb-4\">Filter & Search</h3>\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center mb-4\">\r\n\t\t\t\t\t{/* Search */}\r\n\t\t\t\t\t<div className=\"flex-1\">\r\n\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t<span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-brand-russty\">üîç</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tvalue={searchTerm}\r\n\t\t\t\t\t\t\t\tonChange={(e) => setSearchTerm(e.target.value)}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Search bookings...\"\r\n\t\t\t\t\t\t\t\tclassName=\"w-full pl-10 pr-4 py-2.5 text-sm border-2 border-cream-border rounded-lg bg-cream focus:border-brand-orange focus:outline-none transition-colors\"\r\n\t\t\t\t\t\t\t\taria-label=\"Search bookings\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{/* Sort */}\r\n\t\t\t\t\t<div className=\"flex items-center gap-2 min-w-0 sm:min-w-[160px]\">\r\n\t\t\t\t\t\t<span className=\"text-sm font-semibold text-brand-brown whitespace-nowrap\">Sort by:</span>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tvalue={sortBy}\r\n\t\t\t\t\t\t\tonChange={(e) => setSortBy(e.target.value)}\r\n\t\t\t\t\t\t\tclassName=\"flex-1 px-3 py-2.5 text-sm border-2 border-cream-border rounded-lg bg-cream focus:border-brand-orange focus:outline-none transition-colors font-medium\"\r\n\t\t\t\t\t\t\taria-label=\"Sort by\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"date\">Date</option>\r\n\t\t\t\t\t\t\t<option value=\"price\">Price</option>\r\n\t\t\t\t\t\t\t<option value=\"status\">Status</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t{/* Status Filter Tabs */}\r\n\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t<p className=\"text-sm font-semibold text-brand-brown mb-2\">Status:</p>\r\n\t\t\t\t\t<div className=\"flex flex-wrap gap-2\">\r\n\t\t\t\t\t\t{['all', 'pending', 'confirmed', 'completed'].map(status => (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tkey={status}\r\n\t\t\t\t\t\t\t\tonClick={() => setStatusFilter(status)}\r\n\t\t\t\t\t\t\t\tclassName={`px-4 py-2 text-sm font-semibold rounded-lg transition-all ${\r\n\t\t\t\t\t\t\t\t\tstatusFilter === status\r\n\t\t\t\t\t\t\t\t\t\t? 'bg-brand-orange text-white shadow-md'\r\n\t\t\t\t\t\t\t\t\t\t: 'bg-cream border-2 border-cream-border text-brand-brown hover:border-brand-orange hover:bg-cream-sand'\r\n\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{status.charAt(0).toUpperCase() + status.slice(1)}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t{/* Trusted providers toggle */}\r\n\t\t\t\t<label className=\"inline-flex items-center gap-2 text-sm font-medium text-brand-brown cursor-pointer hover:text-brand-orange transition-colors\">\r\n\t\t\t\t\t<input type=\"checkbox\" className=\"w-4 h-4 accent-brand-orange rounded\" checked={trustedOnly} onChange={e => setTrustedOnly(e.target.checked)} />\r\n\t\t\t\t\t<span>Show trusted providers only</span>\r\n\t\t\t\t\t<span className=\"text-xs bg-brand-orange/10 text-brand-orange px-2 py-0.5 rounded-full\">‚úì</span>\r\n\t\t\t\t</label>\r\n\t\t\t</section>\r\n\r\n\t\t\t<section className=\"bg-white rounded-xl shadow-sm border border-cream-border p-6\">\r\n\t\t\t\t<div className=\"flex items-center justify-between mb-6\">\r\n\t\t\t\t\t<h3 className=\"text-xl font-bold text-brand-brown\">Your Bookings</h3>\r\n\t\t\t\t\t<span className=\"px-3 py-1 bg-brand-orange/10 text-brand-orange rounded-full text-sm font-semibold\">\r\n\t\t\t\t\t\t{filteredAndSortedItems.length} {filteredAndSortedItems.length === 1 ? 'item' : 'items'}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t{filteredAndSortedItems.length === 0 ? (\r\n\t\t\t\t\t<div className=\"py-12 sm:py-16 text-center\">\r\n\t\t\t\t\t\t<div className=\"text-6xl mb-4\">üìã</div>\r\n\t\t\t\t\t\t<p className=\"text-brand-brown/70 text-base sm:text-lg mb-2\">No bookings found</p>\r\n\t\t\t\t\t\t{statusFilter !== 'all' ? (\r\n\t\t\t\t\t\t\t<p className=\"text-sm text-brand-russty\">Try changing the filter to see more results</p>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"mt-6 flex flex-col sm:flex-row gap-3 justify-center items-center\">\r\n\t\t\t\t\t\t\t\t<Link to=\"/plan-trip\">\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\" size=\"md\">üó∫Ô∏è Plan a Trip</Button>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<Link to=\"/packages\">\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"outline\" size=\"md\">üì¶ Browse Packages</Button>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t\t{filteredAndSortedItems.map((item, idx) => (\r\n\t\t\t\t\t\t\t<div key={idx} className=\"bg-white border border-cream-border hover:border-brand-orange rounded-xl p-5 transition-all hover:shadow-md\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col sm:flex-row sm:items-start justify-between gap-4\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-start gap-2 mb-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"font-bold text-brand-brown text-lg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t{providersApiEnabled ? <VerifiedBadge verified={verifiedIds.has(item.providerId)} /> : null}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 text-sm text-brand-russty\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">Date:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{new Date(item.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium text-brand-russty\">Amount:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-bold text-brand-orange\">${item.amount}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"px-3 py-1 bg-cream-sand text-brand-brown rounded-lg text-xs font-semibold\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.category}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-end gap-2\">\r\n\t\t\t\t\t\t\t\t\t\t<span className={`px-4 py-2 rounded-lg font-semibold text-sm whitespace-nowrap ${\r\n\t\t\t\t\t\t\t\t\t\t\titem.status === 'confirmed' ? 'bg-emerald-50 text-emerald-700 border border-emerald-200' :\r\n\t\t\t\t\t\t\t\t\t\t\titem.status === 'pending' ? 'bg-amber-50 text-amber-700 border border-amber-200' :\r\n\t\t\t\t\t\t\t\t\t\t\t'bg-white text-brand-russty border border-cream-border'\r\n\t\t\t\t\t\t\t\t\t\t}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t{item.status.charAt(0).toUpperCase() + item.status.slice(1)}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t{item.status === 'confirmed' && (\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/check-in\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"text-xs font-medium text-brand-orange hover:text-brand-brown transition-colors underline\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tQuick Check-In ‚Üí\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t{filteredAndSortedItems.length > 0 && (\r\n\t\t\t\t\t<div className=\"mt-6 sm:mt-8 pt-6 border-t-2 border-cream-border overflow-x-auto\">\r\n\t\t\t\t\t\t<h4 className=\"text-lg font-bold text-brand-brown mb-4\">Payment Summary</h4>\r\n\t\t\t\t\t\t<div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 min-w-0\">\r\n\t\t\t\t\t\t\t<div className=\"lg:col-span-2\">\r\n\t\t\t\t\t\t\t\t<FeesBreakdown items={filteredAndSortedItems} currency=\"USD\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex items-start\">\r\n\t\t\t\t\t\t\t\t<PaymentButton items={filteredAndSortedItems} currency=\"USD\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className=\"mt-6 sm:mt-8 pt-6 border-t-2 border-cream-border\">\r\n\t\t\t\t\t<h4 className=\"text-lg font-bold text-brand-brown mb-4\">Payments History</h4>\r\n\t\t\t\t\t<PaymentsHistory />\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}"],"names":["jsxs","jsx","useState","apiCreateBooking","useRef","useEffect","useCallback","items","useMemo"],"mappings":"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"}