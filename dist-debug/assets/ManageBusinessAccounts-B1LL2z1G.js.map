{"version":3,"file":"ManageBusinessAccounts-B1LL2z1G.js","sources":["../../src/pages/ManageBusinessAccounts.jsx"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {\r\n  Building2, Search, Filter as _Filter, Download as _Download, Eye, Edit, Mail,\r\n  Phone, DollarSign, Calendar, CheckCircle2, AlertCircle,\r\n  XCircle, MoreVertical, FileText as _FileText, BarChart3, Clock\r\n} from \"lucide-react\";\r\n\r\nconst ACCOUNT_STATUS_FILTERS = [\"all\", \"active\", \"pending\", \"suspended\", \"inactive\"];\r\nconst SORT_OPTIONS = [\r\n  { value: \"created_desc\", label: \"Newest First\" },\r\n  { value: \"created_asc\", label: \"Oldest First\" },\r\n  { value: \"spend_desc\", label: \"Highest Spend\" },\r\n  { value: \"spend_asc\", label: \"Lowest Spend\" },\r\n  { value: \"name_asc\", label: \"Name A-Z\" }\r\n];\r\n\r\nexport default function ManageBusinessAccounts() {\r\n  const navigate = useNavigate();\r\n  const [accounts, setAccounts] = useState([]);\r\n  const [filteredAccounts, setFilteredAccounts] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n  const [sortBy, setSortBy] = useState(\"created_desc\");\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [_selectedAccount, _setSelectedAccount] = useState(null);\r\n  const [showActionsMenu, setShowActionsMenu] = useState(null);\r\n  const [stats, setStats] = useState({\r\n    totalAccounts: 0,\r\n    activeAccounts: 0,\r\n    totalRevenue: 0,\r\n    pendingApprovals: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchAccounts();\r\n    fetchStats();\r\n  }, [fetchAccounts, fetchStats]);\r\n\r\n  useEffect(() => {\r\n    applyFiltersAndSort();\r\n  }, [applyFiltersAndSort]);\r\n\r\n  const fetchAccounts = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch('/api/admin/business-accounts');\r\n      const data = await response.json();\r\n      setAccounts(data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch business accounts:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchStats = useCallback(async () => {\r\n    try {\r\n      const response = await fetch('/api/admin/business-accounts/stats');\r\n      const data = await response.json();\r\n      setStats(data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch stats:', error);\r\n    }\r\n  }, []);\r\n\r\n  const applyFiltersAndSort = useCallback(() => {\r\n    let filtered = [...accounts];\r\n\r\n    // Apply status filter\r\n    if (statusFilter !== \"all\") {\r\n      filtered = filtered.filter(acc => acc.status === statusFilter);\r\n    }\r\n\r\n    // Apply search\r\n    if (searchQuery.trim()) {\r\n      const query = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(acc =>\r\n        acc.businessName?.toLowerCase().includes(query) ||\r\n        acc.contactName?.toLowerCase().includes(query) ||\r\n        acc.email?.toLowerCase().includes(query) ||\r\n        acc.id?.toLowerCase().includes(query)\r\n      );\r\n    }\r\n\r\n    // Apply sort\r\n    filtered.sort((a, b) => {\r\n      switch (sortBy) {\r\n        case \"created_desc\":\r\n          return new Date(b.createdAt) - new Date(a.createdAt);\r\n        case \"created_asc\":\r\n          return new Date(a.createdAt) - new Date(b.createdAt);\r\n        case \"spend_desc\":\r\n          return (b.totalSpend || 0) - (a.totalSpend || 0);\r\n        case \"spend_asc\":\r\n          return (a.totalSpend || 0) - (b.totalSpend || 0);\r\n        case \"name_asc\":\r\n          return (a.businessName || \"\").localeCompare(b.businessName || \"\");\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n\r\n    setFilteredAccounts(filtered);\r\n  }, [accounts, searchQuery, statusFilter, sortBy]);\r\n\r\n  const handleUpdateStatus = async (accountId, newStatus) => {\r\n    try {\r\n      await fetch(`/api/admin/business-accounts/${accountId}/status`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ status: newStatus })\r\n      });\r\n      fetchAccounts();\r\n      fetchStats();\r\n      setShowActionsMenu(null);\r\n    } catch (error) {\r\n      console.error('Failed to update status:', error);\r\n    }\r\n  };\r\n\r\n  const handleExportData = async (accountId) => {\r\n    try {\r\n      const response = await fetch(`/api/admin/business-accounts/${accountId}/export`);\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `business-account-${accountId}-${Date.now()}.csv`;\r\n      a.click();\r\n      setShowActionsMenu(null);\r\n    } catch (error) {\r\n      console.error('Failed to export data:', error);\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('en-ZA', {\r\n      style: 'currency',\r\n      currency: 'ZAR',\r\n      minimumFractionDigits: 0\r\n    }).format(amount || 0);\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const configs = {\r\n      active: { bg: \"bg-green-100\", text: \"text-green-700\", icon: CheckCircle2, label: \"Active\" },\r\n      pending: { bg: \"bg-yellow-100\", text: \"text-yellow-700\", icon: Clock, label: \"Pending\" },\r\n      suspended: { bg: \"bg-red-100\", text: \"text-red-700\", icon: XCircle, label: \"Suspended\" },\r\n      inactive: { bg: \"bg-gray-100\", text: \"text-gray-700\", icon: AlertCircle, label: \"Inactive\" }\r\n    };\r\n    const config = configs[status] || configs.pending;\r\n    const Icon = config.icon;\r\n    return (\r\n      <span className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${config.bg} ${config.text}`}>\r\n        <Icon className=\"w-3 h-3\" />\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const renderStatsCards = () => {\r\n    const cards = [\r\n      {\r\n        label: \"Total Accounts\",\r\n        value: stats.totalAccounts,\r\n        icon: Building2,\r\n        color: \"blue\"\r\n      },\r\n      {\r\n        label: \"Active Accounts\",\r\n        value: stats.activeAccounts,\r\n        icon: CheckCircle2,\r\n        color: \"green\"\r\n      },\r\n      {\r\n        label: \"Total Revenue\",\r\n        value: formatCurrency(stats.totalRevenue),\r\n        icon: DollarSign,\r\n        color: \"purple\"\r\n      },\r\n      {\r\n        label: \"Pending Approvals\",\r\n        value: stats.pendingApprovals,\r\n        icon: Clock,\r\n        color: \"orange\"\r\n      }\r\n    ];\r\n\r\n    return (\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n        {cards.map((card, idx) => {\r\n          const Icon = card.icon;\r\n          const colorClasses = {\r\n            blue: \"bg-blue-100 text-blue-600\",\r\n            green: \"bg-green-100 text-green-600\",\r\n            purple: \"bg-purple-100 text-purple-600\",\r\n            orange: \"bg-orange-100 text-brand-orange\"\r\n          };\r\n          return (\r\n            <div key={idx} className=\"bg-white rounded-xl shadow-md p-6 border border-gray-100\">\r\n              <div className={`inline-flex p-3 rounded-lg ${colorClasses[card.color]} mb-3`}>\r\n                <Icon className=\"w-6 h-6\" />\r\n              </div>\r\n              <h3 className=\"text-sm font-medium text-gray-600 mb-1\">{card.label}</h3>\r\n              <p className=\"text-2xl font-bold text-brand-brown\">{card.value}</p>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderFilters = () => (\r\n    <div className=\"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-100\">\r\n      <div className=\"flex flex-col lg:flex-row gap-4\">\r\n        {/* Search */}\r\n        <div className=\"flex-1\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by business name, contact, email, or account ID...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Filter */}\r\n        <div className=\"w-full lg:w-48\">\r\n          <div className=\"relative\">\r\n            <Filter className=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" />\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent appearance-none bg-white\"\r\n            >\r\n              {ACCOUNT_STATUS_FILTERS.map(status => (\r\n                <option key={status} value={status}>\r\n                  {status === \"all\" ? \"All Status\" : status.charAt(0).toUpperCase() + status.slice(1)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Sort */}\r\n        <div className=\"w-full lg:w-48\">\r\n          <select\r\n            value={sortBy}\r\n            onChange={(e) => setSortBy(e.target.value)}\r\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent appearance-none bg-white\"\r\n          >\r\n            {SORT_OPTIONS.map(option => (\r\n              <option key={option.value} value={option.value}>{option.label}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderAccountCard = (account) => (\r\n    <div key={account.id} className=\"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:border-brand-orange transition-colors\">\r\n      <div className=\"flex items-start justify-between mb-4\">\r\n        <div className=\"flex items-start gap-4 flex-1\">\r\n          <div className=\"w-12 h-12 bg-cream rounded-lg flex items-center justify-center\">\r\n            <Building2 className=\"w-6 h-6 text-brand-orange\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"text-lg font-bold text-brand-brown mb-1\">{account.businessName}</h3>\r\n            <p className=\"text-sm text-gray-600 mb-2\">{account.businessType} â€¢ {account.companySize}</p>\r\n            <div className=\"flex items-center gap-4 text-sm text-gray-500\">\r\n              <div className=\"flex items-center gap-1\">\r\n                <User className=\"w-4 h-4\" />\r\n                <span>{account.contactName}</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-1\">\r\n                <Mail className=\"w-4 h-4\" />\r\n                <span>{account.email}</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-1\">\r\n                <Phone className=\"w-4 h-4\" />\r\n                <span>{account.phone}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"relative\">\r\n          <button\r\n            onClick={() => setShowActionsMenu(showActionsMenu === account.id ? null : account.id)}\r\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n          >\r\n            <MoreVertical className=\"w-5 h-5 text-gray-600\" />\r\n          </button>\r\n          {showActionsMenu === account.id && (\r\n            <div className=\"absolute right-0 top-10 bg-white border border-gray-200 rounded-lg shadow-lg z-10 w-48\">\r\n              <button\r\n                onClick={() => navigate(`/admin/business-accounts/${account.id}`)}\r\n                className=\"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-left\"\r\n              >\r\n                <Eye className=\"w-4 h-4\" />\r\n                <span>View Details</span>\r\n              </button>\r\n              <button\r\n                onClick={() => navigate(`/admin/business-accounts/${account.id}/edit`)}\r\n                className=\"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-left\"\r\n              >\r\n                <Edit className=\"w-4 h-4\" />\r\n                <span>Edit Account</span>\r\n              </button>\r\n              <button\r\n                onClick={() => handleExportData(account.id)}\r\n                className=\"w-full flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-left\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                <span>Export Data</span>\r\n              </button>\r\n              <div className=\"border-t border-gray-200 my-1\" />\r\n              {account.status === \"active\" ? (\r\n                <button\r\n                  onClick={() => handleUpdateStatus(account.id, \"suspended\")}\r\n                  className=\"w-full flex items-center gap-2 px-4 py-2 hover:bg-red-50 text-red-600 text-left\"\r\n                >\r\n                  <XCircle className=\"w-4 h-4\" />\r\n                  <span>Suspend</span>\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={() => handleUpdateStatus(account.id, \"active\")}\r\n                  className=\"w-full flex items-center gap-2 px-4 py-2 hover:bg-green-50 text-green-600 text-left\"\r\n                >\r\n                  <CheckCircle2 className=\"w-4 h-4\" />\r\n                  <span>Activate</span>\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\r\n        <div>\r\n          <p className=\"text-xs text-gray-500 mb-1\">Total Spend</p>\r\n          <p className=\"font-bold text-brand-brown\">{formatCurrency(account.totalSpend)}</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-xs text-gray-500 mb-1\">Active Travelers</p>\r\n          <p className=\"font-bold text-brand-brown\">{account.activeTravelers || 0}</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-xs text-gray-500 mb-1\">Total Bookings</p>\r\n          <p className=\"font-bold text-brand-brown\">{account.totalBookings || 0}</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-xs text-gray-500 mb-1\">Status</p>\r\n          <div>{getStatusBadge(account.status)}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\r\n        <div className=\"flex items-center gap-2 text-xs text-gray-500\">\r\n          <Calendar className=\"w-4 h-4\" />\r\n          <span>Joined {new Date(account.createdAt).toLocaleDateString()}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => navigate(`/admin/business-accounts/${account.id}/bookings`)}\r\n            className=\"px-3 py-1.5 text-sm font-medium text-brand-orange border border-brand-orange rounded-lg hover:bg-orange-50 transition-colors\"\r\n          >\r\n            View Bookings\r\n          </button>\r\n          <button\r\n            onClick={() => navigate(`/admin/business-accounts/${account.id}/analytics`)}\r\n            className=\"px-3 py-1.5 text-sm font-medium text-white bg-brand-orange rounded-lg hover:bg-orange-600 transition-colors\"\r\n          >\r\n            Analytics\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-cream py-8 px-4\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl md:text-4xl font-bold text-brand-brown mb-2\">\r\n              Manage Business Accounts\r\n            </h1>\r\n            <p className=\"text-gray-600\">Oversee and support corporate travel clients</p>\r\n          </div>\r\n          <div className=\"flex items-center gap-3 mt-4 md:mt-0\">\r\n            <button\r\n              onClick={() => navigate('/admin/business-accounts/reports')}\r\n              className=\"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:border-brand-orange transition-colors\"\r\n            >\r\n              <BarChart3 className=\"w-4 h-4\" />\r\n              <span className=\"font-medium\">Reports</span>\r\n            </button>\r\n            <button\r\n              onClick={() => navigate('/business/register')}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-brand-orange text-white rounded-lg hover:bg-orange-600 transition-colors\"\r\n            >\r\n              <Building2 className=\"w-4 h-4\" />\r\n              <span className=\"font-medium\">Add Account</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats */}\r\n        {renderStatsCards()}\r\n\r\n        {/* Filters */}\r\n        {renderFilters()}\r\n\r\n        {/* Accounts List */}\r\n        <div className=\"space-y-4\">\r\n          {isLoading ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-orange mx-auto mb-4\"></div>\r\n              <p className=\"text-gray-600\">Loading business accounts...</p>\r\n            </div>\r\n          ) : filteredAccounts.length === 0 ? (\r\n            <div className=\"bg-white rounded-xl shadow-md p-12 text-center\">\r\n              <Building2 className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\r\n              <h3 className=\"text-xl font-bold text-brand-brown mb-2\">No accounts found</h3>\r\n              <p className=\"text-gray-600 mb-6\">\r\n                {searchQuery || statusFilter !== \"all\"\r\n                  ? \"Try adjusting your filters\"\r\n                  : \"No business accounts registered yet\"}\r\n              </p>\r\n              {!searchQuery && statusFilter === \"all\" && (\r\n                <button\r\n                  onClick={() => navigate('/business/register')}\r\n                  className=\"px-6 py-3 bg-brand-orange text-white rounded-lg hover:bg-orange-600 transition-colors\"\r\n                >\r\n                  Register First Account\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <p className=\"text-sm text-gray-600\">\r\n                  Showing {filteredAccounts.length} of {accounts.length} accounts\r\n                </p>\r\n              </div>\r\n              {filteredAccounts.map(renderAccountCard)}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useEffect","useCallback","jsxs","jsx","Edit","Fragment"],"mappings":"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"}