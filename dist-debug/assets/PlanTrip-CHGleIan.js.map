{"version":3,"file":"PlanTrip-CHGleIan.js","sources":["../../src/utils/eventsSort.js","../../src/components/MyLocationModal.jsx","../../src/hooks/useClickOutside.js","../../src/components/ui/MiniItineraryPreview.jsx","../../src/pages/PlanTrip.jsx"],"sourcesContent":["// Utilities for sorting and merging events by date\r\n// Event shape expected: { date?: string, ... }\r\n\r\nexport function sortEvents(list = [], order = 'dateAsc'){\r\n  const items = Array.isArray(list) ? list.slice() : [];\r\n  const parseTs = (d) => {\r\n    const t = Date.parse(d);\r\n    return Number.isFinite(t) ? t : NaN;\r\n  };\r\n  const asc = order !== 'dateDesc';\r\n  return items\r\n    .map(e => ({ e, t: parseTs(e?.date) }))\r\n    .sort((a,b) => {\r\n      const at = a.t, bt = b.t;\r\n      const aNaN = Number.isNaN(at), bNaN = Number.isNaN(bt);\r\n      if (aNaN && bNaN) return 0;\r\n      if (aNaN) return 1;  // unknown dates last\r\n      if (bNaN) return -1;\r\n      return asc ? (at - bt) : (bt - at);\r\n    })\r\n    .map(x => x.e);\r\n}\r\n\r\nexport function mergeAndSort(prev = [], more = [], order = 'dateAsc'){\r\n  return sortEvents([...(prev||[]), ...(more||[])], order);\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nexport default function MyLocationModal({ open, onClose, onSave, initial = {} }){\r\n  const [city, setCity] = useState(initial.city || '');\r\n  const [province, setProvince] = useState(initial.province || '');\r\n  const [country, setCountry] = useState(initial.country || '');\r\n  if(!open) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/30\">\r\n      <div className=\"bg-white rounded shadow-lg border border-cream-border w-[min(28rem,92vw)] p-4\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <h3 className=\"font-semibold\">Set My Location</h3>\r\n          <button onClick={onClose} aria-label=\"Close\" className=\"text-brand-brown/70 hover:text-brand-brown\">‚úï</button>\r\n        </div>\r\n        <p className=\"text-sm text-brand-brown/70 mb-3\">This helps us apply ‚ÄúNear me‚Äù filters quickly.</p>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2 mb-3\">\r\n          <input value={city} onChange={e=>setCity(e.target.value)} placeholder=\"City\" className=\"px-2 py-1 border border-cream-border rounded\" />\r\n          <input value={province} onChange={e=>setProvince(e.target.value)} placeholder=\"Province/State\" className=\"px-2 py-1 border border-cream-border rounded\" />\r\n          <input value={country} onChange={e=>setCountry(e.target.value)} placeholder=\"Country\" className=\"px-2 py-1 border border-cream-border rounded\" />\r\n        </div>\r\n        <div className=\"flex items-center justify-end gap-2\">\r\n          <button onClick={onClose} className=\"text-sm px-3 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\">Cancel</button>\r\n          <button onClick={()=> onSave({ city: city.trim(), province: province.trim(), country: country.trim() })} className=\"text-sm px-3 py-1 rounded border border-brand-brown bg-brand-brown text-cream hover:bg-brand-brown/90\">Save</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef } from 'react';\r\n\r\n/**\r\n * Hook that alerts clicks outside of the passed ref element\r\n * @param {Function} handler - Function to call when clicking outside\r\n * @param {boolean} isOpen - Whether the element is currently open/visible\r\n * @returns {Object} ref - Ref to attach to the element that should detect outside clicks\r\n */\r\nexport function useClickOutside(handler, isOpen = true) {\r\n  const ref = useRef(null);\r\n  const handlerRef = useRef(handler);\r\n  \r\n  // Keep handler ref up to date\r\n  useEffect(() => {\r\n    handlerRef.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleClickOutside = (event) => {\r\n      if (ref.current && !ref.current.contains(event.target)) {\r\n        handlerRef.current();\r\n      }\r\n    };\r\n\r\n    // Add event listener with a small delay to avoid immediate closing\r\n    const timeoutId = setTimeout(() => {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      document.addEventListener('touchstart', handleClickOutside);\r\n    }, 0);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('touchstart', handleClickOutside);\r\n    };\r\n  }, [isOpen]); // Removed handler from dependencies\r\n\r\n  return ref;\r\n}\r\n\r\n/**\r\n * Hook for handling escape key press\r\n * @param {Function} handler - Function to call when escape is pressed\r\n * @param {boolean} isOpen - Whether the element is currently open/visible\r\n */\r\nexport function useEscapeKey(handler, isOpen = true) {\r\n  const handlerRef = useRef(handler);\r\n  \r\n  // Keep handler ref up to date\r\n  useEffect(() => {\r\n    handlerRef.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleEscape = (event) => {\r\n      if (event.key === 'Escape') {\r\n        handlerRef.current();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => document.removeEventListener('keydown', handleEscape);\r\n  }, [isOpen]); // Removed handler from dependencies\r\n}\r\n\r\n/**\r\n * Combined hook for click outside and escape key\r\n * @param {Function} handler - Function to call when clicking outside or pressing escape\r\n * @param {boolean} isOpen - Whether the element is currently open/visible\r\n * @returns {Object} ref - Ref to attach to the element\r\n */\r\nexport function useClickOutsideAndEscape(handler, isOpen = true) {\r\n  const ref = useClickOutside(handler, isOpen);\r\n  useEscapeKey(handler, isOpen);\r\n  return ref;\r\n}","import React, { useMemo } from 'react';\r\n\r\nexport default function MiniItineraryPreview({ basket }) {\r\n  // Group basket items by day\r\n  const days = useMemo(() => {\r\n    const grouped = {};\r\n    basket.forEach(item => {\r\n      const day = item.day || 1;\r\n      if (!grouped[day]) grouped[day] = [];\r\n      grouped[day].push(item);\r\n    });\r\n    \r\n    // Sort items within each day by time\r\n    Object.keys(grouped).forEach(day => {\r\n      grouped[day].sort((a, b) => {\r\n        const timeOrder = { 'Morning': 0, 'Afternoon': 1, 'Evening': 2, 'Flexible': 3 };\r\n        return (timeOrder[a.time] || 99) - (timeOrder[b.time] || 99);\r\n      });\r\n    });\r\n    \r\n    return grouped;\r\n  }, [basket]);\r\n  \r\n  const sortedDays = useMemo(() => \r\n    Object.keys(days).sort((a, b) => Number(a) - Number(b)),\r\n    [days]\r\n  );\r\n  \r\n  if (basket.length === 0) {\r\n    return (\r\n      <div className=\"text-xs text-brand-russty/60 italic p-3 bg-cream-sand/50 rounded border border-dashed border-cream-border\">\r\n        Add items to see your itinerary preview\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  const timeIcon = {\r\n    'Morning': 'üåÖ',\r\n    'Afternoon': '‚òÄÔ∏è',\r\n    'Evening': 'üåô',\r\n    'Flexible': '‚è∞'\r\n  };\r\n  \r\n  const categoryIcon = {\r\n    'Lodging': 'üè®',\r\n    'Accommodation': 'üè®',\r\n    'Activity': 'üéØ',\r\n    'Tour': 'üó∫Ô∏è',\r\n    'Experience': '‚ú®',\r\n    'Dining': 'üçΩÔ∏è',\r\n    'Transport': 'üöó',\r\n    'Flight': '‚úàÔ∏è',\r\n    'Default': 'üìå'\r\n  };\r\n  \r\n  return (\r\n    <div className=\"rounded border border-cream-border bg-white/50 overflow-hidden\">\r\n      <div className=\"bg-gradient-to-r from-brand-orange to-brand-gold text-white px-3 py-2 text-xs font-semibold flex items-center gap-2\">\r\n        <span>üìÖ</span>\r\n        <span>Itinerary Preview</span>\r\n      </div>\r\n      \r\n      <div className=\"max-h-96 overflow-y-auto custom-scrollbar p-3 space-y-3\">\r\n        {sortedDays.map(day => (\r\n          <div key={day} className=\"bg-cream-sand/30 rounded-lg p-2 border border-cream-border\">\r\n            <div className=\"text-xs font-bold text-brand-brown mb-2 flex items-center gap-1\">\r\n              <span className=\"bg-brand-orange text-white rounded-full w-5 h-5 flex items-center justify-center text-[10px]\">{day}</span>\r\n              <span>Day {day}</span>\r\n              <span className=\"text-[10px] text-brand-russty/60 font-normal\">({days[day].length} item{days[day].length > 1 ? 's' : ''})</span>\r\n            </div>\r\n            \r\n            <div className=\"space-y-1.5\">\r\n              {days[day].map((item, _idx) => (\r\n                <div key={item.id} className=\"bg-white rounded border border-cream-border p-2 text-[11px]\">\r\n                  <div className=\"flex items-start gap-1.5\">\r\n                    <span className=\"text-sm flex-shrink-0\">\r\n                      {categoryIcon[item.category] || categoryIcon.Default}\r\n                    </span>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"font-medium text-brand-brown truncate\" title={item.title}>\r\n                        {item.title}\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 text-[10px] text-brand-russty/70 mt-0.5\">\r\n                        <span className=\"flex items-center gap-0.5\">\r\n                          {timeIcon[item.time] || timeIcon.Flexible}\r\n                          {item.time || 'Flexible'}\r\n                        </span>\r\n                        {item.quantity > 1 && (\r\n                          <span>‚Ä¢ x{item.quantity}</span>\r\n                        )}\r\n                        {item.price > 0 && (\r\n                          <span>‚Ä¢ R{item.price}</span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      <div className=\"bg-cream-sand/50 px-3 py-2 text-[10px] text-brand-russty/70 border-t border-cream-border flex items-center justify-between\">\r\n        <span>{basket.length} item{basket.length > 1 ? 's' : ''} across {sortedDays.length} day{sortedDays.length > 1 ? 's' : ''}</span>\r\n        <a href=\"/itinerary\" className=\"text-brand-orange hover:underline font-semibold\">View Full ‚Üí</a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport Button from \"../components/ui/Button.jsx\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport AutoSyncBanner from \"../components/ui/AutoSyncBanner\";\r\nimport LiveTripProgress from \"../components/ui/LiveTripProgress\";\r\nimport { useTripState, computeProgress } from \"../utils/useTripState\";\r\nimport { useBasketState } from \"../utils/useBasketState\";\r\nimport { formatCurrency } from \"../utils/currency\";\r\nimport { PRODUCTS } from \"../data/products\";\r\nimport { searchEvents as fetchEvents } from \"../utils/eventsApi\";\r\nimport { sortEvents as sortEventsUtil, mergeAndSort } from \"../utils/eventsSort\";\r\nimport { buildLocationMaps as buildLocMapsUtil, detectCategory, resolveLocationToken, longestLocationMatch, getSuggestion, loadMyLocation, persistMyLocation, loadSmartSettings } from \"../utils/searchIntent\";\r\nimport MyLocationModal from \"../components/MyLocationModal\";\r\nimport WeatherWidget from \"../components/WeatherWidget\";\r\nimport WorkflowPanel from \"../components/WorkflowPanel\";\r\nimport { useClickOutsideAndEscape } from \"../hooks/useClickOutside\";\r\nimport MiniItineraryPreview from \"../components/ui/MiniItineraryPreview\";\r\n\r\nexport default function PlanTrip() {\r\n  useEffect(() => {\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  }, []);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [directBookingOpen, setDirectBookingOpen] = useState(false);\r\n  // Open Direct Booking via URL query flag\r\n  useEffect(() => {\r\n    try {\r\n      const params = new URLSearchParams(location.search);\r\n      if (params.get('direct') === '1') {\r\n        setDirectBookingOpen(true);\r\n      }\r\n    } catch {}\r\n  }, [location.search]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  // Persist last-used booking date for convenience\r\n  const [bookingDate, setBookingDate] = useState(() => {\r\n    try { return localStorage.getItem('directBooking:lastDate') || \"\"; } catch { return \"\"; }\r\n  });\r\n  const [trip] = useTripState();\r\n  const [query, setQuery] = useState(\"\");\r\n  const [searchEl, setSearchEl] = useState(null);\r\n  const { basket, addToBasket, removeFromBasket, updateQuantity, updateDay, paidItems, clearBasket } = useBasketState();\r\n  const [copyLinkStatus, setCopyLinkStatus] = useState(\"\"); // '', 'ok', 'err'\r\n\r\n  // Define modal component unconditionally to keep hook order stable\r\n  const DirectBookingModal = () => {\r\n    const modalRef = useRef(null);\r\n    const searchRef = useRef(null);\r\n    useClickOutsideAndEscape(modalRef, () => setDirectBookingOpen(false));\r\n    // Intentionally run once on mount; we read selectedProduct from closure for conditional focus\r\n    useEffect(() => {\r\n      // Focus search shortly after mount\r\n      const t = setTimeout(() => {\r\n        try {\r\n          if (!selectedProduct) searchRef.current?.focus();\r\n        } catch {}\r\n      }, 0);\r\n      return () => clearTimeout(t);\r\n    }, []);\r\n    // Focus trap\r\n    useEffect(() => {\r\n      function handleTrap(e) {\r\n        if (e.key === 'Tab' && modalRef.current) {\r\n          const focusables = modalRef.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\r\n          if (focusables.length) {\r\n            const first = focusables[0];\r\n            const last = focusables[focusables.length - 1];\r\n            if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }\r\n            else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }\r\n          }\r\n        }\r\n      }\r\n      document.addEventListener('keydown', handleTrap);\r\n      return () => document.removeEventListener('keydown', handleTrap);\r\n    }, []);\r\n\r\n    return (\r\n      <div\r\n        ref={modalRef}\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        aria-labelledby=\"direct-booking-title\"\r\n        className=\"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative\"\r\n        tabIndex={-1}\r\n      >\r\n        <button className=\"absolute top-2 right-2 text-brand-russty hover:text-brand-orange transition\" onClick={() => setDirectBookingOpen(false)} aria-label=\"Close\">&times;</button>\r\n        <h2 id=\"direct-booking-title\" className=\"text-xl font-bold text-brand-rusty mb-3\">Direct Booking</h2>\r\n        {!selectedProduct ? (\r\n          <>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={e => setSearchTerm(e.target.value)}\r\n              placeholder=\"Search products (e.g. flights, hotels...)\"\r\n              ref={searchRef}\r\n              className=\"w-full border rounded px-3 py-2 mb-3\"\r\n            />\r\n            <div className=\"max-h-40 overflow-y-auto mb-3\">\r\n              {PRODUCTS.filter(p =>\r\n                p.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                p.category.toLowerCase().includes(searchTerm.toLowerCase())\r\n              ).slice(0, 10).map(p => (\r\n                <button\r\n                  key={p.title}\r\n                  className=\"block w-full text-left px-3 py-2 rounded hover:bg-cream-hover\"\r\n                  onClick={() => setSelectedProduct(p)}\r\n                >\r\n                  <span className=\"font-semibold text-brand-russty\">{p.title}</span>\r\n                  <span className=\"ml-2 text-xs text-brand-russty/70\">{p.category}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div className=\"mb-2 font-semibold text-brand-russty\">{selectedProduct.title}</div>\r\n            <div className=\"mb-2 text-sm text-brand-russty/80\">{selectedProduct.category}</div>\r\n            <input\r\n              type=\"date\"\r\n              value={bookingDate}\r\n              onChange={e => { const v = e.target.value; setBookingDate(v); try { localStorage.setItem('directBooking:lastDate', v); } catch {} }}\r\n              className=\"w-full border rounded px-3 py-2 mb-3\"\r\n            />\r\n            <Button\r\n              fullWidth\r\n              variant=\"primary\"\r\n              size=\"md\"\r\n              onClick={() => {\r\n                try { showToast('Payment initiated', 'success'); } catch {}\r\n                const params = new URLSearchParams({ item: selectedProduct.title, date: bookingDate });\r\n                navigate(`/payment-success?${params.toString()}`);\r\n              }}\r\n              disabled={!bookingDate || !selectedProduct}\r\n            >\r\n              Proceed to Payment\r\n            </Button>\r\n            <button className=\"w-full text-xs text-brand-russty underline\" onClick={() => setSelectedProduct(null)}>\r\n              &larr; Back to search\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  const [copySummaryStatus, setCopySummaryStatus] = useState(\"\"); // '', 'ok', 'err'\r\n  const [confirmClear, setConfirmClear] = useState(false);\r\n  const [lastCleared, setLastCleared] = useState([]); // snapshot for undo\r\n  const undoTimerRef = useRef(null);\r\n  const [undoMsg, setUndoMsg] = useState(\"\");\r\n  const [presetStatus, setPresetStatus] = useState(\"\"); // '', 'saved', 'applied', 'deleted', 'error'\r\n  const [selectedPreset, setSelectedPreset] = useState(\"\");\r\n  const [presets, setPresets] = useState(()=>{\r\n    try { return JSON.parse(localStorage.getItem('planTripPresets:v1')||'[]'); } catch { return []; }\r\n  });\r\n  const [presetName, setPresetName] = useState(\"\");\r\n  const [recentFilters, setRecentFilters] = useState(()=>{\r\n    try { return JSON.parse(localStorage.getItem('planTripRecentFilters:v1')||'[]'); } catch { return []; }\r\n  });\r\n  // Simple toasts system\r\n  const [toasts, setToasts] = useState([]); // {id, text, type}\r\n  // Simple Mode: reduces UI to core search + filters + results\r\n  const [simpleMode, setSimpleMode] = useState(() => {\r\n    try { return localStorage.getItem('tripSimpleMode') === '1'; } catch { return false; }\r\n  });\r\n  // Catalog sort\r\n  const [catalogSort, setCatalogSort] = useState(() => {\r\n    try { return localStorage.getItem('catalogSort:v1') || 'relevance'; } catch { return 'relevance'; }\r\n  });\r\n  useEffect(()=>{ try { localStorage.setItem('catalogSort:v1', catalogSort); } catch {} }, [catalogSort]);\r\n  // Weather setting (from Settings page)\r\n  const [showWeather, setShowWeather] = useState(() => {\r\n    try { return localStorage.getItem('showWeather') !== '0'; } catch { return true; }\r\n  });\r\n  const [weatherCollapsed, setWeatherCollapsed] = useState(() => {\r\n    try { return localStorage.getItem('weatherCollapsed') === '1'; } catch { return false; }\r\n  });\r\n\r\n  // Compact header by default; reveal full filter toolset on demand\r\n  const [showAdvanced, setShowAdvanced] = useState(() => {\r\n    try { return localStorage.getItem('planTrip:showAdvanced:v2') === '1'; } catch { return false; }\r\n  });\r\n  \r\n  // Click outside and escape to close advanced filters\r\n  const advancedFiltersRef = useClickOutsideAndEscape(() => {\r\n    if (showAdvanced) {\r\n      setShowAdvanced(false);\r\n      try { localStorage.setItem('planTrip:showAdvanced:v2', '0'); } catch {}\r\n    }\r\n  }, showAdvanced);\r\n  useEffect(() => {\r\n    function onStorage(e){ if(!e) return; if(e.key === 'showWeather'){ setShowWeather(e.newValue !== '0'); } }\r\n    window.addEventListener('storage', onStorage);\r\n    return () => window.removeEventListener('storage', onStorage);\r\n  }, []);\r\n  function toggleSimpleMode(){\r\n    const next = !simpleMode; setSimpleMode(next);\r\n    try { localStorage.setItem('tripSimpleMode', next ? '1' : '0'); } catch {}\r\n  }\r\n  function showToast(text, type='info', ttl=2000){\r\n    const id = Math.random().toString(36).slice(2);\r\n    setToasts(prev => [...prev, { id, text, type }]);\r\n    setTimeout(()=> setToasts(prev => prev.filter(t=>t.id!==id)), ttl);\r\n  }\r\n  // Sync query params -> local state\r\n  useEffect(()=>{\r\n    const params = new URLSearchParams(location.search);\r\n    const qParam = params.get('q');\r\n    if(qParam) setQuery(qParam);\r\n  }, [location.search]);\r\n\r\n  // Build filters from URL params (continent, country, province, city, area)\r\n  const locFilters = useMemo(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    return {\r\n      continent: params.get('continent') || '',\r\n      country: params.get('country') || '',\r\n      province: params.get('province') || '',\r\n      city: params.get('city') || '',\r\n      area: params.get('area') || '',\r\n      category: params.get('category') || '',\r\n      priceMin: params.get('priceMin') || '',\r\n      priceMax: params.get('priceMax') || '',\r\n      paidOnly: params.get('paidOnly') === '1',\r\n      freeOnly: params.get('freeOnly') === '1',\r\n    };\r\n  }, [location.search]);\r\n\r\n  // Persist filters to localStorage and restore when URL is empty\r\n  useEffect(() => {\r\n    // Save whenever filters change\r\n    try { localStorage.setItem('lastLocFilters', JSON.stringify(locFilters)); } catch {}\r\n  }, [locFilters]);\r\n  // Update recent filters list when filters change (skip when all empty)\r\n  useEffect(()=>{\r\n    // Avoid dynamic property access on the locFilters object directly to satisfy exhaustive-deps\r\n    const { continent, country, province, city, area, category, priceMin, priceMax, paidOnly, freeOnly } = locFilters;\r\n    const keys = ['continent','country','province','city','area','category','priceMin','priceMax','paidOnly','freeOnly'];\r\n    const vals = { continent, country, province, city, area, category, priceMin, priceMax, paidOnly, freeOnly };\r\n    const hasAny = keys.some(k => {\r\n      const v = vals[k];\r\n      const s = typeof v === 'boolean' ? (v ? '1' : '') : String(v || '').trim();\r\n      return s !== '';\r\n    });\r\n    if (!hasAny) return;\r\n    const signature = keys.map(k=>{\r\n      const v = vals[k];\r\n      const s = typeof v === 'boolean' ? (v ? '1' : '') : String(v || '').trim().toLowerCase();\r\n      return `${k}=${encodeURIComponent(s)}`;\r\n    }).join('&');\r\n    setRecentFilters(prev => {\r\n      const next = [signature, ...prev.map(r=>r.signature)].filter((s,i,arr)=>arr.indexOf(s)===i).slice(0,6);\r\n      const detailed = next.map(sig => ({\r\n        signature: sig,\r\n        filters: Object.fromEntries(sig.split('&').map(pair=>{\r\n          const [k,v] = pair.split('=');\r\n          return [k, v ? decodeURIComponent(v) : ''];\r\n        }))\r\n      }));\r\n      try { localStorage.setItem('planTripRecentFilters:v1', JSON.stringify(detailed)); } catch {}\r\n      return detailed;\r\n    });\r\n  }, [\r\n    locFilters.continent,\r\n    locFilters.country,\r\n    locFilters.province,\r\n    locFilters.city,\r\n    locFilters.area,\r\n    locFilters.category,\r\n    locFilters.priceMin,\r\n    locFilters.priceMax,\r\n    locFilters.paidOnly,\r\n    locFilters.freeOnly,\r\n    locFilters\r\n  ]);\r\n\r\n  function applyFilters(nextFilters){\r\n    const keys = ['continent','country','province','city','area','category','priceMin','priceMax','paidOnly','freeOnly'];\r\n    const params = new URLSearchParams(location.search);\r\n    keys.forEach(k=>{\r\n      let val = nextFilters?.[k];\r\n      if (k === 'paidOnly') { val = nextFilters?.paidOnly ? '1' : ''; }\r\n      else if (k === 'freeOnly') { val = nextFilters?.freeOnly ? '1' : ''; }\r\n      else { val = (val||'').trim(); }\r\n      if (val) params.set(k, val); else params.delete(k);\r\n    });\r\n    navigate({ search: params.toString() ? `?${params.toString()}` : '' }, { replace: true });\r\n  }\r\n\r\n  function savePreset(){\r\n    const name = (presetName||'').trim();\r\n    if (!name) { showToast('Enter a preset name', 'warn'); return; }\r\n    const record = { name, filters: locFilters };\r\n    setPresets(prev => {\r\n      // replace if same name exists\r\n      const filtered = prev.filter(p => p.name !== name);\r\n      const next = [...filtered, record].sort((a,b)=> a.name.localeCompare(b.name));\r\n      try { localStorage.setItem('planTripPresets:v1', JSON.stringify(next)); } catch {}\r\n      setPresetStatus('saved'); setTimeout(()=>setPresetStatus(''), 1500);\r\n      setSelectedPreset(name);\r\n      showToast(`Preset \"${name}\" saved`, 'success');\r\n      return next;\r\n    });\r\n  }\r\n  function deletePreset(name){\r\n    setPresets(prev => {\r\n      const next = prev.filter(p => p.name !== name);\r\n      try { localStorage.setItem('planTripPresets:v1', JSON.stringify(next)); } catch {}\r\n      setPresetStatus('deleted'); setTimeout(()=>setPresetStatus(''), 1500);\r\n      if (selectedPreset === name) setSelectedPreset('');\r\n      showToast(`Preset \"${name}\" deleted`, 'info');\r\n      return next;\r\n    });\r\n  }\r\n  function applyPreset(name){\r\n    const p = presets.find(x=>x.name===name);\r\n    if (!p) return;\r\n    applyFilters(p.filters);\r\n    setPresetStatus('applied'); setTimeout(()=>setPresetStatus(''), 1200);\r\n    showToast(`Applied preset \"${name}\"`, 'success');\r\n  }\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    const hasAny = ['continent','country','province','city','area','category','priceMin','priceMax','paidOnly','freeOnly'].some(k => params.get(k));\r\n    if (hasAny) return;\r\n    try {\r\n      const raw = localStorage.getItem('lastLocFilters');\r\n      if(!raw) return;\r\n      const saved = JSON.parse(raw);\r\n      if(!saved || typeof saved !== 'object') return;\r\n      const next = new URLSearchParams();\r\n      ['continent','country','province','city','area','category','priceMin','priceMax'].forEach(k => { if (saved[k]) next.set(k, saved[k]); });\r\n      if (saved.paidOnly) next.set('paidOnly','1');\r\n      if (saved.freeOnly) next.set('freeOnly','1');\r\n      if ([...next.keys()].length) {\r\n        navigate({ search: `?${next.toString()}` }, { replace: true });\r\n      }\r\n    } catch {}\r\n  // run once on mount\r\n  }, [location.search, navigate]);\r\n\r\n  // If deep-linked with filters, ensure Catalog tab is active so results are visible\r\n  useEffect(()=>{\r\n    const params = new URLSearchParams(location.search);\r\n  const hasDeepLink = ['continent','country','province','city','area','category','priceMin','priceMax','paidOnly','freeOnly'].some(k => params.get(k));\r\n    const tabParam = params.get('tab');\r\n    if(tabParam === 'events') setActiveTab('events');\r\n    else if(hasDeepLink) setActiveTab('catalog');\r\n  }, [location.search]);\r\n\r\n  // Keyboard: focus catalog search on '/'\r\n  useEffect(() => {\r\n    function onKeyDown(e){\r\n      if(e.key !== '/') return;\r\n      // Ignore when typing in inputs/textareas or when meta/ctrl/alt is pressed\r\n      const tag = (e.target && e.target.tagName) ? e.target.tagName.toLowerCase() : '';\r\n      if (tag === 'input' || tag === 'textarea' || e.metaKey || e.ctrlKey || e.altKey) return;\r\n      e.preventDefault();\r\n      if (searchEl && typeof searchEl.focus === 'function') {\r\n        searchEl.focus();\r\n      }\r\n    }\r\n    window.addEventListener('keydown', onKeyDown);\r\n    return () => window.removeEventListener('keydown', onKeyDown);\r\n  }, [searchEl]);\r\n\r\n  // Cascading location options derived from PRODUCTS and current filters\r\n  const uniq = (arr) => Array.from(new Set(arr.filter(Boolean)));\r\n  const sortAlpha = (arr) => [...arr].sort((a,b)=> String(a).localeCompare(String(b), undefined, {sensitivity:'base'}));\r\n  const continents = useMemo(() => sortAlpha(uniq(PRODUCTS.map(p => p.continent))), []);\r\n  const countries = useMemo(() => sortAlpha(uniq(\r\n    PRODUCTS\r\n      .filter(p => !locFilters.continent || (p.continent||'').toLowerCase() === locFilters.continent.toLowerCase())\r\n      .map(p => p.country)\r\n  )), [locFilters.continent]);\r\n  const provinces = useMemo(() => sortAlpha(uniq(\r\n    PRODUCTS\r\n      .filter(p =>\r\n        (!locFilters.continent || (p.continent||'').toLowerCase() === locFilters.continent.toLowerCase()) &&\r\n        (!locFilters.country || (p.country||'').toLowerCase() === locFilters.country.toLowerCase())\r\n      )\r\n      .map(p => p.province)\r\n  )), [locFilters.continent, locFilters.country]);\r\n  const cities = useMemo(() => sortAlpha(uniq(\r\n    PRODUCTS\r\n      .filter(p =>\r\n        (!locFilters.continent || (p.continent||'').toLowerCase() === locFilters.continent.toLowerCase()) &&\r\n        (!locFilters.country || (p.country||'').toLowerCase() === locFilters.country.toLowerCase()) &&\r\n        (!locFilters.province || (p.province||'').toLowerCase() === locFilters.province.toLowerCase())\r\n      )\r\n      .map(p => p.city)\r\n  )), [locFilters.continent, locFilters.country, locFilters.province]);\r\n  const areas = useMemo(() => sortAlpha(uniq(\r\n    PRODUCTS\r\n      .filter(p =>\r\n        (!locFilters.continent || (p.continent||'').toLowerCase() === locFilters.continent.toLowerCase()) &&\r\n        (!locFilters.country || (p.country||'').toLowerCase() === locFilters.country.toLowerCase()) &&\r\n        (!locFilters.province || (p.province||'').toLowerCase() === locFilters.province.toLowerCase()) &&\r\n        (!locFilters.city || (p.city||'').toLowerCase() === locFilters.city.toLowerCase())\r\n      )\r\n      .map(p => p.area)\r\n  )), [locFilters.continent, locFilters.country, locFilters.province, locFilters.city]);\r\n  const categories = useMemo(() => sortAlpha(uniq(\r\n    PRODUCTS\r\n      .filter(p =>\r\n        (!locFilters.continent || (p.continent||'').toLowerCase() === locFilters.continent.toLowerCase()) &&\r\n        (!locFilters.country || (p.country||'').toLowerCase() === locFilters.country.toLowerCase()) &&\r\n        (!locFilters.province || (p.province||'').toLowerCase() === locFilters.province.toLowerCase()) &&\r\n        (!locFilters.city || (p.city||'').toLowerCase() === locFilters.city.toLowerCase()) &&\r\n        (!locFilters.area || (p.area||'').toLowerCase() === locFilters.area.toLowerCase())\r\n      )\r\n      .map(p => p.category)\r\n  )), [locFilters.continent, locFilters.country, locFilters.province, locFilters.city, locFilters.area]);\r\n\r\n  // Counts for options under current upstream filters\r\n  const counts = useMemo(() => {\r\n    // Helper for case-insensitive equality\r\n    const eq = (a,b)=> String(a||'').toLowerCase() === String(b||'').toLowerCase();\r\n    const base = PRODUCTS;\r\n    const by = {\r\n      continent: {}, country: {}, province: {}, city: {}, area: {}, category: {}\r\n    };\r\n    for (const p of base) {\r\n      if (p.continent) by.continent[p.continent] = (by.continent[p.continent]||0) + 1;\r\n    }\r\n    const scopedCountries = base.filter(p => !locFilters.continent || eq(p.continent, locFilters.continent));\r\n    for (const p of scopedCountries) {\r\n      if (p.country) by.country[p.country] = (by.country[p.country]||0) + 1;\r\n    }\r\n    const scopedProvinces = scopedCountries.filter(p => !locFilters.country || eq(p.country, locFilters.country));\r\n    for (const p of scopedProvinces) {\r\n      if (p.province) by.province[p.province] = (by.province[p.province]||0) + 1;\r\n    }\r\n    const scopedCities = scopedProvinces.filter(p => !locFilters.province || eq(p.province, locFilters.province));\r\n    for (const p of scopedCities) {\r\n      if (p.city) by.city[p.city] = (by.city[p.city]||0) + 1;\r\n    }\r\n    const scopedAreas = scopedCities.filter(p => !locFilters.city || eq(p.city, locFilters.city));\r\n    for (const p of scopedAreas) {\r\n      if (p.area) by.area[p.area] = (by.area[p.area]||0) + 1;\r\n    }\r\n    const scopedForCategories = scopedAreas.filter(p => !locFilters.area || eq(p.area, locFilters.area));\r\n    for (const p of scopedForCategories) {\r\n      if (p.category) by.category[p.category] = (by.category[p.category]||0) + 1;\r\n    }\r\n    return by;\r\n  }, [locFilters.continent, locFilters.country, locFilters.province, locFilters.city, locFilters.area]);\r\n\r\n  // Events: fetch from trusted providers via server aggregator\r\n  const [events, setEvents] = useState([]);\r\n  const [eventsLoading, setEventsLoading] = useState(false);\r\n  const [eventsError, setEventsError] = useState(\"\");\r\n  const [eventsPage, setEventsPage] = useState(1);\r\n  const [eventsHasMore, setEventsHasMore] = useState(false);\r\n  const [eventsSourceCounts, setEventsSourceCounts] = useState({});\r\n  const [includePast, setIncludePast] = useState(() => {\r\n    try { return localStorage.getItem('includePastEvents') === '1'; } catch { return false; }\r\n  });\r\n  const [eventsSort, setEventsSort] = useState(() => {\r\n    try { return localStorage.getItem('eventsSort') || 'dateAsc'; } catch { return 'dateAsc'; }\r\n  }); // 'dateAsc' | 'dateDesc'\r\n  function toggleIncludePast(){\r\n    const next = !includePast; setIncludePast(next);\r\n    try { localStorage.setItem('includePastEvents', next ? '1' : '0'); } catch {}\r\n  }\r\n  const [groupByMonth, setGroupByMonth] = useState(() => {\r\n    try { return localStorage.getItem('eventsGroupByMonth') === '1'; } catch { return false; }\r\n  });\r\n  function onChangeSort(val){\r\n    setEventsSort(val);\r\n    try { localStorage.setItem('eventsSort', val); } catch {}\r\n    // Re-sort current list without refetch\r\n    setEvents(prev => sortEventsUtil(prev, val));\r\n  }\r\n  function toggleGroup(){\r\n    const next = !groupByMonth; setGroupByMonth(next);\r\n    try { localStorage.setItem('eventsGroupByMonth', next ? '1' : '0'); } catch {}\r\n  }\r\n  const [activeTab, setActiveTab] = useState(() => {\r\n    try { return localStorage.getItem('planTripTab') || 'catalog'; } catch { return 'catalog'; }\r\n  }); // 'catalog' | 'events'\r\n  useEffect(() => { try { localStorage.setItem('planTripTab', activeTab); } catch {} }, [activeTab]);\r\n  // If entering Simple Mode while Events tab active, force back to Catalog\r\n  useEffect(() => { if(simpleMode && activeTab !== 'catalog') setActiveTab('catalog'); }, [simpleMode, activeTab]);\r\n  useEffect(() => {\r\n    const term = query.trim();\r\n    const city = locFilters.city.trim();\r\n    const country = locFilters.country.trim();\r\n  // In Simple Mode, skip events entirely\r\n  if (simpleMode) { setEvents([]); setEventsError(\"\"); setEventsPage(1); setEventsHasMore(false); return; }\r\n  // Trigger when a country exists, or a city is selected, or a meaningful search term exists\r\n  if (!country && !city && term.length < 3) { setEvents([]); setEventsError(\"\"); setEventsPage(1); setEventsHasMore(false); return; }\r\n    let alive = true;\r\n    setEventsLoading(true); setEventsError(\"\");\r\n    const t = setTimeout(async () => {\r\n  try {\r\n  const { events: list, page, hasMore, countsBySource } = await fetchEvents({ q: term || \"\", city, country, page: 1, limit: 8, includePast });\r\n        if (!alive) return;\r\n  setEvents(sortEventsUtil(Array.isArray(list) ? list : [], eventsSort));\r\n        setEventsPage(page || 1);\r\n        setEventsHasMore(!!hasMore);\r\n  setEventsSourceCounts(countsBySource || {});\r\n      } catch (e) {\r\n        if (!alive) return; setEvents([]); setEventsError(\"Could not load events right now.\"); setEventsPage(1); setEventsHasMore(false);\r\n      } finally {\r\n        if (alive) setEventsLoading(false);\r\n      }\r\n    }, 350);\r\n    return () => { alive = false; clearTimeout(t); };\r\n  }, [locFilters.city, locFilters.country, query, includePast, simpleMode, eventsSort]);\r\n\r\n  // Helpers to update URL params and clear deeper-level filters on change\r\n  function updateLocationParam(level, value){\r\n    const order = ['continent','country','province','city','area'];\r\n    const params = new URLSearchParams(location.search);\r\n    if(value){ params.set(level, value); } else { params.delete(level); }\r\n    const idx = order.indexOf(level);\r\n    // Clear deeper filters when parent changes\r\n    for(let i=idx+1; i<order.length; i++) params.delete(order[i]);\r\n    navigate({ search: params.toString() ? `?${params.toString()}` : '' }, { replace: true });\r\n  }\r\n  function updateParam(key, value){\r\n    const params = new URLSearchParams(location.search);\r\n    if (value) params.set(key, value); else params.delete(key);\r\n    navigate({ search: params.toString() ? `?${params.toString()}` : '' }, { replace: true });\r\n  }\r\n  function clearLocationFilters(){\r\n    const params = new URLSearchParams(location.search);\r\n    ['continent','country','province','city','area'].forEach(k=>params.delete(k));\r\n    navigate({ search: params.toString() ? `?${params.toString()}` : '' }, { replace: true });\r\n  }\r\n  const filtered = useMemo(() => {\r\n    const q = query.trim().toLowerCase();\r\n    let base = PRODUCTS;\r\n    // Apply location filters if any present\r\n  const { continent, country, province, city, area, category: _category } = locFilters;\r\n    if (continent || country || province || city || area) {\r\n      base = base.filter(p =>\r\n        (!continent || (p.continent||'').toLowerCase() === continent.toLowerCase()) &&\r\n        (!country || (p.country||'').toLowerCase() === country.toLowerCase()) &&\r\n        (!province || (p.province||'').toLowerCase() === province.toLowerCase()) &&\r\n        (!city || (p.city||'').toLowerCase() === city.toLowerCase()) &&\r\n        (!area || (p.area||'').toLowerCase() === area.toLowerCase())\r\n      );\r\n    }\r\n    if (_category) {\r\n      base = base.filter(p => (p.category||'').toLowerCase() === _category.toLowerCase());\r\n    }\r\n    // Price and paid filters\r\n    const min = Number(locFilters.priceMin||'');\r\n    const max = Number(locFilters.priceMax||'');\r\n    const hasMin = !Number.isNaN(min) && locFilters.priceMin!=='';\r\n    const hasMax = !Number.isNaN(max) && locFilters.priceMax!=='';\r\n    if (hasMin) { base = base.filter(p => (Number(p.price)||0) >= min); }\r\n    if (hasMax) { base = base.filter(p => (Number(p.price)||0) <= max); }\r\n  // Mutual exclusivity at UI level, but guard here too: freeOnly takes precedence\r\n  if (locFilters.freeOnly) { base = base.filter(p => (Number(p.price)||0) === 0); }\r\n  else if (locFilters.paidOnly) { base = base.filter(p => (Number(p.price)||0) > 0); }\r\n    if(!q) return base;\r\n    return base.filter(p =>\r\n      p.title.toLowerCase().includes(q) ||\r\n      p.description.toLowerCase().includes(q) ||\r\n      p.category.toLowerCase().includes(q) ||\r\n      (p.continent||'').toLowerCase().includes(q) ||\r\n      (p.country||'').toLowerCase().includes(q) ||\r\n      (p.province||'').toLowerCase().includes(q) ||\r\n      (p.city||'').toLowerCase().includes(q) ||\r\n      (p.area||'').toLowerCase().includes(q)\r\n    );\r\n  }, [query, locFilters]);\r\n\r\n  // Apply catalog sorting\r\n  const sortedFiltered = useMemo(() => {\r\n    const arr = [...filtered];\r\n    const q = query.trim().toLowerCase();\r\n    if(catalogSort === 'alpha'){\r\n      return arr.sort((a,b)=> String(a.title).localeCompare(String(b.title)));\r\n    }\r\n    if(catalogSort === 'priceAsc'){\r\n      return arr.sort((a,b)=> (Number(a.price)||0) - (Number(b.price)||0));\r\n    }\r\n    if(catalogSort === 'priceDesc'){\r\n      return arr.sort((a,b)=> (Number(b.price)||0) - (Number(a.price)||0));\r\n    }\r\n    // relevance: simple heuristic by match position + title boost when a query exists\r\n    if(!q) return arr; // no-op when no query\r\n    const score = (p)=>{\r\n      let s = 0;\r\n      const t = String(p.title||'').toLowerCase();\r\n      const d = String(p.description||'').toLowerCase();\r\n      const c = String(p.category||'').toLowerCase();\r\n      if(t.includes(q)) s += 5 + Math.max(0, 20 - t.indexOf(q));\r\n      if(d.includes(q)) s += 2 + Math.max(0, 10 - d.indexOf(q));\r\n      if(c.includes(q)) s += 3;\r\n      return s;\r\n    };\r\n    return arr.sort((a,b)=> score(b) - score(a));\r\n  }, [filtered, catalogSort, query]);\r\n\r\n  // Simple highlighter for query matches\r\n  function highlight(text){\r\n    const term = query.trim();\r\n    if(!term) return text;\r\n    const safe = term.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n    const re = new RegExp(`(${safe})`, 'ig');\r\n    const parts = String(text).split(re);\r\n    return parts.map((part, i) => re.test(part)\r\n      ? <mark key={i} className=\"bg-yellow-100 text-inherit p-0 rounded\">{part}</mark>\r\n      : <span key={i}>{part}</span>\r\n    );\r\n  }\r\n  // Smart Search: parse natural phrases (e.g., \"Hotels in Durban\", \"Accommodation near Durban North\")\r\n  const buildLocMaps = useMemo(() => buildLocMapsUtil(PRODUCTS), []);\r\n  const myLocation = useMemo(() => loadMyLocation(), []);\r\n  const [locModalOpen, setLocModalOpen] = useState(false);\r\n  useEffect(()=>{\r\n    const params = new URLSearchParams(location.search);\r\n    if(params.get('setLocation')==='1'){\r\n      setLocModalOpen(true);\r\n      params.delete('setLocation');\r\n      navigate({ search: params.toString()?`?${params.toString()}`:'' }, { replace: true });\r\n    }\r\n  }, [location.search, navigate]);\r\n  function applySmartSearch() {\r\n    const raw = query.trim();\r\n    if(!raw) return;\r\n    const lower = raw.toLowerCase();\r\n    // Split by connectors, prefer last occurrence\r\n    const connectors = [' in ', ' near ', ' around ', ' at '];\r\n    let pos = -1, conn = '';\r\n    for(const c of connectors){ const i = lower.lastIndexOf(c); if(i > pos){ pos = i; conn = c; } }\r\n    let left = raw, right = '';\r\n    if(pos > 0){ left = raw.slice(0,pos).trim(); right = raw.slice(pos + conn.length).trim(); }\r\n  const cat = detectCategory(left || raw);\r\n  const { smartAliases } = loadSmartSettings();\r\n  let loc = resolveLocationToken(right, buildLocMaps, smartAliases);\r\n  if(Object.keys(loc).length===0){ loc = longestLocationMatch(raw, buildLocMaps, smartAliases); }\r\n    if(!cat && Object.keys(loc).length===0){ return; }\r\n    // Build URL params: clear previous location+category, then set new ones\r\n    const keys = ['continent','country','province','city','area','category','q'];\r\n    const params = new URLSearchParams(location.search);\r\n    keys.forEach(k=> params.delete(k));\r\n    if(cat) params.set('category', cat);\r\n    Object.entries(loc).forEach(([k,v])=>{ if(v) params.set(k, v); });\r\n    setQuery('');\r\n    navigate({ search: `?${params.toString()}` }, { replace: false });\r\n    try { showToast && showToast(`Applied smart filters${cat?` ‚Ä¢ ${cat}`:''}${Object.values(loc).length?` ‚Ä¢ ${Object.values(loc)[0]}`:''}`, 'success'); } catch {}\r\n  }\r\n\r\n  // Build a smart suggestion with approximate result count\r\n  const smartSuggestion = useMemo(() => {\r\n    const raw = (query || '').trim();\r\n    if(!raw) return null;\r\n    const { smartAliases } = loadSmartSettings();\r\n    const s = getSuggestion(raw, { products: PRODUCTS, myLocation, enableAliases: smartAliases });\r\n    if(!s) return null;\r\n    // Remove category from params for loc without triggering no-unused-vars\r\n    const rest = { ...s.params }; delete rest.category;\r\n    return { text: s.label, count: s.count, cat: s.params.category, loc: rest };\r\n  }, [query, myLocation]);\r\n\r\n  // Dynamic Quick Actions: one-click filters derived from top cities\r\n  const quickActions = useMemo(() => {\r\n    if(!Array.isArray(PRODUCTS) || PRODUCTS.length===0) return [];\r\n    const byCity = new Map();\r\n    for(const p of PRODUCTS){\r\n      const c = (p.city||'').trim();\r\n      if(!c) continue;\r\n      byCity.set(c, (byCity.get(c)||0)+1);\r\n    }\r\n    const topCities = Array.from(byCity.entries())\r\n      .sort((a,b)=> b[1]-a[1])\r\n      .slice(0,4)\r\n      .map(([city,count])=>({ city, count }));\r\n    const makeCount = (params)=> PRODUCTS.filter(pr => {\r\n      if(params.category && String(pr.category||'')!==params.category) return false;\r\n      if(params.city && String(pr.city||'')!==params.city) return false;\r\n      if(params.province && String(pr.province||'')!==params.province) return false;\r\n      if(params.country && String(pr.country||'')!==params.country) return false;\r\n      if(params.continent && String(pr.continent||'')!==params.continent) return false;\r\n      if(params.area && String(pr.area||'')!==params.area) return false;\r\n      return true;\r\n    }).length;\r\n    const actions = topCities.map(({ city })=>{\r\n      const params = { category: 'Lodging', city };\r\n      return {\r\n        label: `Hotels in ${city} (${makeCount(params)})`,\r\n        params,\r\n      };\r\n    });\r\n    return actions;\r\n  }, []);\r\n  return (\r\n  <div className=\"overflow-x-hidden\">\r\n    <div className=\"max-w-6xl mx-auto px-2 sm:px-4 md:px-6 py-8 text-brand-russty\">\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold mb-1\">Trip Planner</h2>\r\n          <p className=\"mb-4 text-brand-russty/80\">Plan your trip with simple, powerful filters.</p>\r\n        </div>\r\n        <div className=\"mt-1\">\r\n          <label className=\"inline-flex items-center gap-2 text-sm\">\r\n            <input type=\"checkbox\" checked={simpleMode} onChange={toggleSimpleMode} />\r\n            <span>Simple mode</span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n\r\n          {/* Direct Booking as a peer option in the grid */}\r\n\r\n          {!simpleMode && (\r\n        <>\r\n          <div className=\"mb-4\"><AutoSyncBanner message=\"Your quotes, itinerary, and bookings stay in sync in real time.\" /></div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n            <LiveTripProgress steps={computeProgress(trip, basket.length)} />\r\n            <Link to=\"/quotes\" className=\"p-4 bg-cream-sand border border-cream-border rounded-md hover:bg-cream-hover transition\">\r\n              <div className=\"font-semibold\">Quotes</div>\r\n              <p className=\"text-sm text-brand-brown/80\">Generate a proposal from paid basket items.</p>\r\n            </Link>\r\n            <Link to=\"/itinerary\" className=\"p-4 bg-cream-sand border border-cream-border rounded-md hover:bg-cream-hover transition\">\r\n              <div className=\"font-semibold\">Itinerary</div>\r\n              <p className=\"text-sm text-brand-brown/80\">All basket items populate your day plan.</p>\r\n            </Link>\r\n            <div className=\"relative p-4 bg-cream-sand border border-cream-border rounded-md hover:shadow-lg transition flex flex-col items-center text-center space-y-3\">\r\n              <div className=\"w-full h-full flex flex-col justify-between text-left\">\r\n                <div>\r\n                  <div className=\"font-semibold text-base text-brand-brown\">Book Direct</div>\r\n                  <p className=\"text-sm text-brand-brown/80 mt-2 mb-4\">Book and pay instantly for any product.</p>\r\n                </div>\r\n                <div className=\"relative z-10 self-start\" style={{ marginTop: 'auto' }}>\r\n                  <Button as={Link} to=\"/book\" variant=\"primary\" size=\"sm\" aria-label=\"Open Direct Booking\">Book Now</Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n      {/* Toasts aria-live region for accessibility */}\r\n      <div aria-live=\"polite\" aria-atomic=\"true\" className=\"sr-only\">\r\n        {toasts.map(t => t.text).join(' ')}\r\n      </div>\r\n      {/* Direct Booking Modal */}\r\n      {directBookingOpen && (\r\n        <div className=\"fixed inset-0 bg-black/30 flex items-center justify-center z-50\">\r\n          <DirectBookingModal />\r\n        </div>\r\n      )}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n  <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10 min-w-0\">\r\n        {/* Catalog */}\r\n        <div className=\"lg:col-span-2\">\r\n          {/* Live Weather ‚Äî uses current city/country filters; toggleable via Settings */}\r\n          {showWeather && (\r\n            <div className=\"mb-2\">\r\n              <div className=\"flex items-center justify-between mb-1\">\r\n                <span className=\"text-sm font-semibold text-brand-russty/80\">Weather</span>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"text-[11px] px-2 py-0.5 rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n                  onClick={()=>{ const next=!weatherCollapsed; setWeatherCollapsed(next); try{ localStorage.setItem('weatherCollapsed', next?'1':'0'); }catch{} }}\r\n                  aria-expanded={!weatherCollapsed}\r\n                >{weatherCollapsed ? 'Expand' : 'Collapse'}</button>\r\n              </div>\r\n              {!weatherCollapsed && (\r\n                <WeatherWidget city={locFilters.city} country={locFilters.country} />\r\n              )}\r\n            </div>\r\n          )}\r\n          {/* Tabs with ARIA roles (hidden in Simple mode) */}\r\n          {!simpleMode && (\r\n            <div role=\"tablist\" aria-label=\"Plan Trip sections\" className=\"mb-3 flex border-b border-cream-border gap-2\">\r\n              <button role=\"tab\" aria-selected={activeTab==='catalog'} onClick={()=>setActiveTab('catalog')} className={`px-3 py-2 text-sm -mb-px border-b-2 ${activeTab==='catalog'?'border-brand-brown text-brand-brown':'border-transparent text-brand-brown/60 hover:text-brand-brown'}`}>Catalog</button>\r\n              <button role=\"tab\" aria-selected={activeTab==='events'} onClick={()=>setActiveTab('events')} className={`px-3 py-2 text-sm -mb-px border-b-2 ${activeTab==='events'?'border-brand-brown text-brand-brown':'border-transparent text-brand-brown/60 hover:text-brand-brown'}`}>Events</button>\r\n            </div>\r\n          )}\r\n          {(simpleMode || activeTab==='catalog') && (\r\n          <>\r\n          <div className=\"flex flex-col gap-3 mb-3 sticky [top:calc(var(--header-h)+var(--banner-h))] z-[45] bg-cream/80 backdrop-blur supports-[backdrop-filter]:bg-cream/60 px-3 py-3 rounded border border-cream-border shadow-sm\">\r\n            {/* Product Catalog Heading */}\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"font-semibold text-xl text-brand-russty\">Product Catalog</h3>\r\n              <div className=\"flex items-center gap-2 text-sm text-brand-russty/60\">\r\n                <span>{sortedFiltered.length} results</span>\r\n                {/* Hidden/collapsed sort control - only show on advanced mode */}\r\n                {showAdvanced && (\r\n                  <select\r\n                    aria-label=\"Sort catalog\"\r\n                    className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n                    value={catalogSort}\r\n                    onChange={(e)=> setCatalogSort(e.target.value)}\r\n                  >\r\n                    <option value=\"relevance\">Relevance</option>\r\n                    <option value=\"alpha\">A ‚Üí Z</option>\r\n                    <option value=\"priceAsc\">Price: Low to High</option>\r\n                    <option value=\"priceDesc\">Price: High to Low</option>\r\n                  </select>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Search Bar and Controls */}\r\n            <div className=\"flex flex-col gap-3\">\r\n              {/* Search input row */}\r\n              <div className=\"relative\">\r\n                <input\r\n                  ref={setSearchEl}\r\n                  value={query}\r\n                  onChange={e=>{\r\n                    setQuery(e.target.value);\r\n                    const params = new URLSearchParams(location.search);\r\n                    if(e.target.value) params.set('q', e.target.value); else params.delete('q');\r\n                    navigate({ search: params.toString() ? `?${params.toString()}` : '' }, { replace: true });\r\n                  }}\r\n                  placeholder=\"Search products, destinations, activities‚Ä¶\"\r\n                  title=\"Press / to focus\"\r\n                  className=\"w-full text-sm pl-3 pr-24 py-2.5 border border-cream-border rounded-md bg-white focus:ring-2 focus:ring-brand-orange/30 focus:border-brand-orange outline-none\"\r\n                  aria-label=\"Search product catalog\"\r\n                    onKeyDown={(e)=>{\r\n                      if(e.key==='Escape'){\r\n                        e.preventDefault();\r\n                        const params = new URLSearchParams(location.search);\r\n                        params.delete('q');\r\n                        setQuery('');\r\n                        navigate({ search: params.toString() ? `?${params.toString()}` : '' }, { replace: true });\r\n                      } else if(e.key==='Enter'){\r\n                        e.preventDefault();\r\n                        applySmartSearch();\r\n                      }\r\n                    }}\r\n                  />\r\n                {smartSuggestion && (\r\n                  <div className=\"absolute right-2 top-1/2 -translate-y-1/2 text-xs inline-flex items-center gap-1\" aria-label=\"Apply smart filters suggestion\">\r\n                    <Button variant=\"primary\" size=\"xs\" onClick={applySmartSearch}>\r\n                      <span>üîé</span>\r\n                      <span className=\"hidden sm:inline truncate max-w-[6rem]\">{smartSuggestion.text}</span>\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              {/* Action buttons row */}\r\n              <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  {/* Near Me button */}\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"text-xs px-3 py-2 rounded-md border border-cream-border bg-white hover:bg-cream-hover flex items-center gap-1 whitespace-nowrap\"\r\n                    title=\"Use my location\"\r\n                    onClick={()=>{\r\n                      const loc = loadMyLocation();\r\n                      if(!loc || (!loc.city && !loc.province && !loc.country)){\r\n                        showToast('Set your location first', 'warn');\r\n                        return;\r\n                      }\r\n                      const params = new URLSearchParams(location.search);\r\n                      ['continent','country','province','city','area','category','q'].forEach(k=> params.delete(k));\r\n                      if(loc.city) params.set('city', loc.city); else if(loc.province) params.set('province', loc.province); else if(loc.country) params.set('country', loc.country);\r\n                      navigate({ search: `?${params.toString()}` }, { replace: false });\r\n                      showToast('Applied filters near your location', 'success');\r\n                    }}\r\n                  >üìç Near me</button>\r\n                  \r\n                  {/* Advanced toggle */}\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"text-xs px-3 py-2 rounded-md border border-cream-border bg-white hover:bg-cream-hover flex items-center gap-1 whitespace-nowrap\"\r\n                    title=\"More filters and tools\"\r\n                    aria-expanded={showAdvanced}\r\n                    onClick={()=>{ const next=!showAdvanced; setShowAdvanced(next); try{ localStorage.setItem('planTrip:showAdvanced:v2', next?'1':'0'); }catch{} }}\r\n                  >\r\n                    <span>{showAdvanced ? 'üîº' : 'üîΩ'}</span>\r\n                    <span>{showAdvanced? 'Hide' : 'More'}</span>\r\n                  </button>\r\n                </div>\r\n                \r\n                {/* Tip text */}\r\n                {!simpleMode && (\r\n                          <span className=\"text-xs text-brand-russty/60 italic\">üí° Try &quot;Hotels in Durban&quot; or &quot;Safari in Kruger&quot;</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            {!simpleMode && (\r\n                      <span className=\"hidden md:block text-[11px] text-brand-russty/60\">Tip: try ‚ÄúHotels in Durban‚Äù, then press Enter</span>\r\n            )}\r\n            {showAdvanced && (\r\n              <div className=\"border-t border-cream-border pt-2 grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                {/* Quick actions */}\r\n                {quickActions.length>0 && (\r\n                  <div className=\"flex flex-wrap gap-2\" role=\"group\" aria-label=\"Quick actions\">\r\n                    {quickActions.map((qa, idx)=> (\r\n                      <button\r\n                        key={idx}\r\n                        type=\"button\"\r\n                                className=\"text-xs px-2 py-1 rounded border border-cream-border hover:bg-cream-muted focus:outline-none focus:ring-2 focus:ring-brand-russty/30\"\r\n                        onClick={()=>{\r\n                          const params = new URLSearchParams(location.search);\r\n                          ['continent','country','province','city','area','category','q'].forEach(k=> params.delete(k));\r\n                          Object.entries(qa.params).forEach(([k,v])=> v && params.set(k, v));\r\n                          navigate({ search: `?${params.toString()}` }, { replace: false });\r\n                          try { showToast && showToast(`Applied ${qa.label.replace(/ \\(.*\\)$/,'')}`, 'success'); } catch {}\r\n                        }}\r\n                      >\r\n                        {qa.label}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n                {/* Presets */}\r\n                {!simpleMode && (\r\n                  <div className=\"flex flex-wrap items-center gap-1\">\r\n                    <select\r\n                      value={selectedPreset}\r\n                      onChange={(e)=>{ setSelectedPreset(e.target.value); if(e.target.value) applyPreset(e.target.value); }}\r\n                      className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n                      aria-label=\"Apply preset\"\r\n                      title=\"Apply preset\"\r\n                    >\r\n                      <option value=\"\">Presets‚Ä¶</option>\r\n                      {presets.map(p => <option key={p.name} value={p.name}>{p.name}</option>)}\r\n                    </select>\r\n                    <input\r\n                      value={presetName}\r\n                      onChange={e=>setPresetName(e.target.value)}\r\n                      placeholder=\"Preset name\"\r\n                      className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n                      aria-label=\"Preset name\"\r\n                    />\r\n                    <button onClick={savePreset} className=\"text-xs px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\" title=\"Save current filters as preset\">Save</button>\r\n                    <button disabled={!selectedPreset} onClick={()=>deletePreset(selectedPreset)} className=\"text-xs px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed\" title=\"Delete selected preset\">Delete</button>\r\n                  </div>\r\n                )}\r\n                {/* Price / Paid/Free */}\r\n                <div className=\"flex flex-wrap items-center gap-2\">\r\n                  <label className=\"text-[11px] text-brand-brown/70 inline-flex items-center gap-1\">\r\n                    <span className=\"hidden sm:inline\">Min</span>\r\n                    <input\r\n                      type=\"number\"\r\n                      inputMode=\"numeric\"\r\n                      min=\"0\"\r\n                      value={locFilters.priceMin}\r\n                      onChange={(e)=> updateParam('priceMin', e.target.value)}\r\n                      className={`w-20 text-[11px] px-2 py-1 border rounded bg-white ${(()=>{ const min=Number(locFilters.priceMin||''); const max=Number(locFilters.priceMax||''); const hasMin=!Number.isNaN(min)&&locFilters.priceMin!==''; const hasMax=!Number.isNaN(max)&&locFilters.priceMax!==''; return (hasMin&&hasMax&&min>max)?'border-red-400':'border-cream-border'; })()}`}\r\n                      aria-label=\"Minimum price\"\r\n                      placeholder=\"Min\"\r\n                    />\r\n                  </label>\r\n                  <label className=\"text-[11px] text-brand-brown/70 inline-flex items-center gap-1\">\r\n                    <span className=\"hidden sm:inline\">Max</span>\r\n                    <input\r\n                      type=\"number\"\r\n                      inputMode=\"numeric\"\r\n                      min=\"0\"\r\n                      value={locFilters.priceMax}\r\n                      onChange={(e)=> updateParam('priceMax', e.target.value)}\r\n                      className={`w-20 text-[11px] px-2 py-1 border rounded bg-white ${(()=>{ const min=Number(locFilters.priceMin||''); const max=Number(locFilters.priceMax||''); const hasMin=!Number.isNaN(min)&&locFilters.priceMin!==''; const hasMax=!Number.isNaN(max)&&locFilters.priceMax!==''; return (hasMin&&hasMax&&min>max)?'border-red-400':'border-cream-border'; })()}`}\r\n                      aria-label=\"Maximum price\"\r\n                      placeholder=\"Max\"\r\n                    />\r\n                  </label>\r\n                  {(() => { const min=Number(locFilters.priceMin||''); const max=Number(locFilters.priceMax||''); const hasMin=!Number.isNaN(min)&&locFilters.priceMin!==''; const hasMax=!Number.isNaN(max)&&locFilters.priceMax!==''; if (hasMin&&hasMax&&min>max) { return (<span role=\"alert\" className=\"text-[11px] text-red-600\">Min is greater than Max</span>); } return null; })()}\r\n                  <label className=\"text-[11px] text-brand-brown/70 inline-flex items-center gap-1\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={!!locFilters.paidOnly}\r\n                      onChange={(e)=> { const checked = e.target.checked; updateParam('paidOnly', checked ? '1' : ''); if (checked) { updateParam('freeOnly',''); } }}\r\n                      aria-label=\"Paid items only\"\r\n                      disabled={!!locFilters.freeOnly}\r\n                    />\r\n                    <span>Paid only</span>\r\n                  </label>\r\n                  <label className=\"text-[11px] text-brand-brown/70 inline-flex items-center gap-1\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={!!locFilters.freeOnly}\r\n                      onChange={(e)=> { const checked = e.target.checked; updateParam('freeOnly', checked ? '1' : ''); if (checked) { updateParam('paidOnly',''); } }}\r\n                      aria-label=\"Free items only\"\r\n                      disabled={!!locFilters.paidOnly}\r\n                    />\r\n                    <span>Free only</span>\r\n                  </label>\r\n                </div>\r\n                {/* Utilities: copy link, reset, set my location */}\r\n                <div className=\"flex flex-wrap items-center gap-2\">\r\n                  <button\r\n                    onClick={async ()=>{\r\n                      try {\r\n                        const url = window.location.href;\r\n                        if (navigator.clipboard && navigator.clipboard.writeText) {\r\n                          await navigator.clipboard.writeText(url);\r\n                        } else {\r\n                          const ta = document.createElement('textarea');\r\n                          ta.value = url;\r\n                          ta.setAttribute('readonly','');\r\n                          ta.style.position = 'absolute';\r\n                          ta.style.left = '-9999px';\r\n                          document.body.appendChild(ta);\r\n                          ta.select();\r\n                          document.execCommand('copy');\r\n                          document.body.removeChild(ta);\r\n                        }\r\n                        setCopyLinkStatus('ok');\r\n                        showToast('Link copied', 'success');\r\n                        setTimeout(()=> setCopyLinkStatus(''), 1500);\r\n                      } catch {\r\n                        setCopyLinkStatus('err');\r\n                        showToast('Copy failed', 'error');\r\n                        setTimeout(()=> setCopyLinkStatus(''), 2000);\r\n                      }\r\n                    }}\r\n                    className=\"text-xs px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n                    title=\"Copy shareable link\"\r\n                    aria-label=\"Copy shareable link\"\r\n                  >Copy link</button>\r\n                  <button\r\n                    onClick={()=>{\r\n                      const params = new URLSearchParams(location.search);\r\n                      ['continent','country','province','city','area','category','priceMin','priceMax','paidOnly','freeOnly','q'].forEach(k=>params.delete(k));\r\n                      setQuery('');\r\n                      navigate({ search: '' }, { replace: true });\r\n                    }}\r\n                    className=\"text-xs px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n                    title=\"Reset filters and search\"\r\n                  >Reset</button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"text-[11px] px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n                    title=\"Set my location\"\r\n                    onClick={()=> setLocModalOpen(true)}\r\n                  >Set my location</button>\r\n                  <span aria-live=\"polite\" className=\"sr-only\">{copyLinkStatus==='ok' ? 'Link copied' : (copyLinkStatus==='err' ? 'Copy failed' : '')}</span>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Shareable link button feedback via sr-only region above */}\r\n          {/* Cascading location filter bar */}\r\n          {/* Live region for announcing results count to assistive tech */}\r\n          <div aria-live=\"polite\" role=\"status\" className=\"sr-only\">{sortedFiltered.length} results in catalog</div>\r\n          {showAdvanced && (\r\n          <div ref={advancedFiltersRef} className=\"flex flex-wrap gap-2 sm:gap-2.5 md:gap-3 mb-3\">\r\n            <select\r\n              value={locFilters.continent}\r\n              onChange={(e)=>updateLocationParam('continent', e.target.value)}\r\n              className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n              aria-label=\"Filter by continent\"\r\n              title=\"Filter by continent\"\r\n            >\r\n              <option value=\"\">All continents</option>\r\n              {continents.map(c => <option key={c} value={c}>{c} {counts.continent[c] ? `(${counts.continent[c]})` : ''}</option>)}\r\n            </select>\r\n            <select\r\n              value={locFilters.country}\r\n              onChange={(e)=>updateLocationParam('country', e.target.value)}\r\n              className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n              aria-label=\"Filter by country\"\r\n              title=\"Filter by country\"\r\n              disabled={!countries.length}\r\n            >\r\n              <option value=\"\">All countries</option>\r\n              {countries.map(c => <option key={c} value={c}>{c} {counts.country[c] ? `(${counts.country[c]})` : ''}</option>)}\r\n            </select>\r\n            <select\r\n              value={locFilters.province}\r\n              onChange={(e)=>updateLocationParam('province', e.target.value)}\r\n              className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n              aria-label=\"Filter by province\"\r\n              title=\"Filter by province\"\r\n              disabled={!provinces.length}\r\n            >\r\n              <option value=\"\">All provinces</option>\r\n              {provinces.map(pv => <option key={pv} value={pv}>{pv} {counts.province[pv] ? `(${counts.province[pv]})` : ''}</option>)}\r\n            </select>\r\n            <select\r\n              value={locFilters.city}\r\n              onChange={(e)=>updateLocationParam('city', e.target.value)}\r\n              className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n              aria-label=\"Filter by city\"\r\n              title=\"Filter by city\"\r\n              disabled={!cities.length}\r\n            >\r\n              <option value=\"\">All cities</option>\r\n              {cities.map(ct => <option key={ct} value={ct}>{ct} {counts.city[ct] ? `(${counts.city[ct]})` : ''}</option>)}\r\n            </select>\r\n            <select\r\n              value={locFilters.area}\r\n              onChange={(e)=>updateLocationParam('area', e.target.value)}\r\n              className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n              aria-label=\"Filter by area\"\r\n              title=\"Filter by area\"\r\n              disabled={!areas.length}\r\n            >\r\n              <option value=\"\">All areas</option>\r\n              {areas.map(ar => <option key={ar} value={ar}>{ar} {counts.area[ar] ? `(${counts.area[ar]})` : ''}</option>)}\r\n            </select>\r\n            <select\r\n              value={locFilters.category}\r\n              onChange={(e)=>updateParam('category', e.target.value)}\r\n              className=\"text-xs px-2 py-1 border border-cream-border rounded bg-white\"\r\n              aria-label=\"Filter by category\"\r\n              title=\"Filter by category\"\r\n              disabled={!categories.length}\r\n            >\r\n              <option value=\"\">All categories</option>\r\n              {categories.map(cat => <option key={cat} value={cat}>{cat} {counts.category[cat] ? `(${counts.category[cat]})` : ''}</option>)}\r\n            </select>\r\n            {/* Presets moved into Advanced panel */}\r\n          </div>\r\n          )}\r\n          {/* Preset status and recent filters */}\r\n          <span aria-live=\"polite\" className=\"sr-only\">\r\n            {presetStatus==='saved'?'Preset saved':presetStatus==='applied'?'Preset applied':presetStatus==='deleted'?'Preset deleted':''}\r\n          </span>\r\n          {!simpleMode && showAdvanced && recentFilters.length>0 && (\r\n            <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2 mb-3\">\r\n              <span className=\"text-[11px] text-brand-brown/60 mr-1\">Recent:</span>\r\n              {recentFilters.map((r, idx) => {\r\n                const f = r.filters || {};\r\n                const labelParts = ['city','province','country','area','category','continent'].map(k=>f[k]).filter(Boolean);\r\n                const label = labelParts.join(' ‚Ä¢ ').slice(0, 40) + (labelParts.join(' ‚Ä¢ ').length>40?'‚Ä¶':'');\r\n                return (\r\n                  <button\r\n                    key={r.signature||idx}\r\n                    onClick={()=>applyFilters(f)}\r\n                    className=\"text-[11px] px-2 py-1 rounded-full border border-cream-border bg-white hover:bg-cream-hover\"\r\n                    title={labelParts.join(' ‚Ä¢ ')}\r\n                  >{label || 'Unnamed'}</button>\r\n                );\r\n              })}\r\n              <button\r\n                onClick={()=>{ setRecentFilters([]); try { localStorage.setItem('planTripRecentFilters:v1', '[]'); } catch {} showToast('Recent filters cleared', 'info'); }}\r\n                className=\"text-[11px] px-2 py-1 rounded-full border border-cream-border bg-white hover:bg-cream-hover\"\r\n                title=\"Clear recent filters\"\r\n              >Clear recents</button>\r\n            </div>\r\n          )}\r\n          {/* Active filter chips */}\r\n          {(locFilters.continent || locFilters.country || locFilters.province || locFilters.city || locFilters.area || locFilters.category || locFilters.priceMin || locFilters.priceMax || locFilters.paidOnly || locFilters.freeOnly) && (\r\n            <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2 mb-4\">\r\n              {['continent','country','province','city','area'].map((k) => (\r\n                locFilters[k] ? (\r\n                  <button\r\n                    key={k}\r\n                    onClick={() => updateLocationParam(k, '')}\r\n                    className=\"text-xs px-2 py-1 rounded-full border border-cream-border bg-cream hover:bg-cream-hover focus:outline-none focus:ring-2 focus:ring-brand-russty/30 transition\"\r\n                    title={`Clear ${k}`}\r\n                    aria-label={`Clear ${k} filter: ${locFilters[k]}`}\r\n                  >\r\n                    {k}: {locFilters[k]} √ó\r\n                  </button>\r\n                ) : null\r\n              ))}\r\n              {locFilters.category ? (\r\n                <button\r\n                  onClick={() => updateParam('category','')}\r\n                  className=\"text-xs px-2 py-1 rounded-full border border-cream-border bg-cream hover:bg-cream-hover focus:outline-none focus:ring-2 focus:ring-brand-russty/30 transition\"\r\n                  title={`Clear category`}\r\n                  aria-label={`Clear category filter: ${locFilters.category}`}\r\n                >\r\n                  category: {locFilters.category} √ó\r\n                </button>\r\n              ) : null}\r\n              {locFilters.priceMin ? (\r\n                <button\r\n                  onClick={() => updateParam('priceMin','')}\r\n                  className=\"text-xs px-2 py-1 rounded-full border border-cream-border bg-cream hover:bg-cream-hover focus:outline-none focus:ring-2 focus:ring-brand-russty/30 transition\"\r\n                  title=\"Clear minimum price\"\r\n                  aria-label={`Clear minimum price filter: ${locFilters.priceMin}`}\r\n                >\r\n                  min: {locFilters.priceMin} √ó\r\n                </button>\r\n              ) : null}\r\n              {locFilters.priceMax ? (\r\n                <button\r\n                  onClick={() => updateParam('priceMax','')}\r\n                  className=\"text-xs px-2 py-1 rounded-full border border-cream-border bg-cream hover:bg-cream-hover focus:outline-none focus:ring-2 focus:ring-brand-russty/30 transition\"\r\n                  title=\"Clear maximum price\"\r\n                  aria-label={`Clear maximum price filter: ${locFilters.priceMax}`}\r\n                >\r\n                  max: {locFilters.priceMax} √ó\r\n                </button>\r\n              ) : null}\r\n              {locFilters.paidOnly ? (\r\n                <button\r\n                  onClick={() => updateParam('paidOnly','')}\r\n                  className=\"text-xs px-2 py-1 rounded-full border border-cream-border bg-cream hover:bg-cream-hover focus:outline-none focus:ring-2 focus:ring-brand-russty/30 transition\"\r\n                  title=\"Clear paid only\"\r\n                  aria-label={`Clear paid only filter`}\r\n                >\r\n                  paid only √ó\r\n                </button>\r\n              ) : null}\r\n              {locFilters.freeOnly ? (\r\n                <button\r\n                  onClick={() => updateParam('freeOnly','')}\r\n                  className=\"text-xs px-2 py-1 rounded-full border border-cream-border bg-cream hover:bg-cream-hover focus:outline-none focus:ring-2 focus:ring-brand-brown/30 transition\"\r\n                  title=\"Clear free only\"\r\n                  aria-label={`Clear free only filter`}\r\n                >\r\n                  free only √ó\r\n                </button>\r\n              ) : null}\r\n              <button\r\n                onClick={clearLocationFilters}\r\n                className=\"text-[11px] px-2 py-1 rounded-full border border-cream-border bg-white hover:bg-cream-hover text-brand-russty/80 focus:outline-none focus:ring-2 focus:ring-brand-russty/30 transition\"\r\n                title=\"Clear all location filters\"\r\n                aria-label=\"Clear all location filters\"\r\n              >\r\n                Clear filters\r\n              </button>\r\n            </div>\r\n          )}\r\n          <ul className=\"space-y-3\">\r\n            {sortedFiltered.map(p => (\r\n              <li key={p.id} className=\"p-4 rounded border bg-cream-sand border-cream-border flex flex-col md:flex-row md:items-center gap-3\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                        <span>{sortedFiltered.length} results</span>\r\n                  <div className=\"text-sm text-brand-russty/70\">{highlight(p.description)}</div>\r\n                  <div className=\"text-[11px] text-brand-russty/50\">{p.category} ‚Ä¢ {p.price > 0 ? `Price: $${p.price}` : 'Included / No charge'}</div>\r\n                  <div className=\"text-[11px] text-brand-russty/60 mt-0.5\">\r\n                    {(p.province || p.country || p.city) ? (\r\n                      <>\r\n                        {p.province ? `${p.province}, ` : ''}{p.city || p.country}\r\n                        {p.area ? ` ‚Ä¢ ${p.area}` : ''}\r\n                      </>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n                <button onClick={()=>addToBasket(p)} className=\"px-3 py-1.5 text-xs rounded border border-brand-russty hover:bg-cream-hover\">Add</button>\r\n              </li>\r\n            ))}\r\n            {sortedFiltered.length===0 && (\r\n              <li className=\"text-sm text-brand-russty/60 flex items-center gap-2\">\r\n                <span>No results.</span>\r\n                <button onClick={clearLocationFilters} className=\"text-brand-russty underline hover:no-underline\">Clear filters</button>\r\n                <span className=\"hidden sm:inline\">or</span>\r\n                <button onClick={()=>{ const params = new URLSearchParams(location.search); ['continent','country','province','city','area','category','priceMin','priceMax','paidOnly','q'].forEach(k=>params.delete(k)); setQuery(''); navigate({ search: '' }, { replace: true }); }} className=\"text-brand-russty underline hover:no-underline\">Reset all</button>\r\n              </li>\r\n            )}\r\n          </ul>\r\n          </>\r\n          )}\r\n\r\n          {/* Events from trusted providers (hidden in Simple mode) */}\r\n          {!simpleMode && activeTab==='events' && (locFilters.country || locFilters.city || query.trim().length >= 3) && (\r\n            <div className=\"mt-6\">\r\n              <div className=\"flex items-baseline justify-between mb-2\">\r\n                <h4 className=\"font-semibold\">Events {locFilters.city ? `‚Ä¢ ${locFilters.city}` : (locFilters.country ? `‚Ä¢ ${locFilters.country}` : '')}</h4>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <label className=\"text-[12px] text-brand-brown/70 inline-flex items-center gap-1\">\r\n                    <input type=\"checkbox\" checked={includePast} onChange={toggleIncludePast} />\r\n                    <span>Include past</span>\r\n                  </label>\r\n                  <label className=\"text-[12px] text-brand-brown/70 inline-flex items-center gap-1\">\r\n                    <input type=\"checkbox\" checked={groupByMonth} onChange={toggleGroup} />\r\n                    <span>Group by month</span>\r\n                  </label>\r\n                  <label className=\"text-[12px] text-brand-brown/70 inline-flex items-center gap-1\">\r\n                    <span className=\"hidden sm:inline\">Sort</span>\r\n                    <select\r\n                      aria-label=\"Sort events by date\"\r\n                      className=\"text-[12px] px-1.5 py-0.5 border border-cream-border rounded bg-white\"\r\n                      value={eventsSort}\r\n                      onChange={(e)=> onChangeSort(e.target.value)}\r\n                    >\r\n                      <option value=\"dateAsc\">Soonest first</option>\r\n                      <option value=\"dateDesc\">Latest first</option>\r\n                    </select>\r\n                  </label>\r\n                  {eventsLoading && <span className=\"text-xs text-brand-brown/60\">Loading‚Ä¶</span>}\r\n                </div>\r\n              </div>\r\n              {eventsError && <div role=\"alert\" className=\"text-xs text-red-600 mb-2\">{eventsError}</div>}\r\n              {!eventsLoading && events.length === 0 && !eventsError && (\r\n                <div className=\"text-sm text-brand-brown/70 bg-cream-sand border border-cream-border rounded p-3\">\r\n                  <div className=\"font-medium mb-1\">No events found.</div>\r\n                  <ul className=\"list-disc pl-4 space-y-1\">\r\n                    <li>Try a broader search term or clear the search box.</li>\r\n                    <li>Select just a country (and remove city) to widen results.</li>\r\n                    <li>On Settings, enable ‚ÄúShow demo events‚Äù to visualize the experience.</li>\r\n                  </ul>\r\n                  <div className=\"mt-2\">\r\n                    <Link\r\n                      to=\"/settings\"\r\n                      className=\"inline-block px-2.5 py-1 text-xs rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n                    >\r\n                      Open Settings\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {/* Grouped rendering (optional) */}\r\n              {!groupByMonth && (\r\n                <ul className=\"space-y-2\">\r\n                  {eventsLoading && events.length===0 && (\r\n                    Array.from({ length: 3 }).map((_,i)=> (\r\n                      <li key={`skeleton_${i}`} className=\"p-3 rounded border border-cream-border bg-white animate-pulse\">\r\n                        <div className=\"h-4 bg-cream-sand/80 rounded w-2/3 mb-2\"></div>\r\n                        <div className=\"h-3 bg-cream-sand/70 rounded w-1/2\"></div>\r\n                      </li>\r\n                    ))\r\n                  )}\r\n                  {events.map(e => (\r\n                    <li key={`ev_${e.source}_${e.id}`} className=\"p-3 rounded border border-cream-border bg-white flex flex-col md:flex-row md:items-center gap-3\">\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"font-medium truncate\">{e.name} {e.source==='Demo' && <span className=\"ml-2 text-[10px] px-1 py-0.5 rounded bg-cream-sand border border-cream-border align-middle\">Demo</span>}</div>\r\n                        <div className=\"text-[12px] text-brand-brown/70 truncate\">\r\n                          {([e.venue, e.city, e.country].filter(Boolean).length > 0)\r\n                            ? (\r\n                              <>\r\n                                {[e.venue, e.city, e.country].filter(Boolean).join(', ')} {e.date ? `‚Ä¢ ${new Date(e.date).toLocaleDateString()}` : ''}\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                {e.date ? <span className=\"px-1 py-0.5 mr-1 rounded bg-cream-sand border border-cream-border align-middle\">{new Date(e.date).toLocaleDateString()}</span> : null}\r\n                              </>\r\n                            )}\r\n                          {' '}‚Ä¢ <span className=\"px-1 py-0.5 text-[10px] rounded bg-cream-sand border border-cream-border align-middle\">{e.source}</span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        {e.url && <a href={e.url} target=\"_blank\" rel=\"noreferrer\" className=\"px-2 py-1 text-xs rounded border border-cream-border hover:bg-cream-hover\">Open</a>}\r\n                        <button\r\n                          onClick={()=> addToBasket({\r\n                            id: `ev_${e.source}_${e.id}`,\r\n                            title: e.name,\r\n                            description: [e.venue, e.city, e.country, e.date && new Date(e.date).toLocaleDateString()].filter(Boolean).join(' ‚Ä¢ '),\r\n                            category: 'Event',\r\n                            price: 0,\r\n                            url: e.url || '',\r\n                            source: e.source,\r\n                          })}\r\n                          className=\"px-3 py-1.5 text-xs rounded border border-brand-brown hover:bg-cream-hover\"\r\n                        >Add</button>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n              {groupByMonth && (\r\n                <div className=\"space-y-4\">\r\n                  {(() => {\r\n                    const byMonth = new Map();\r\n                    for(const e of events){\r\n                      let label = 'Unknown date';\r\n                      if(e?.date){\r\n                        const d = new Date(e.date);\r\n                        if(!Number.isNaN(d.valueOf())){\r\n                          label = d.toLocaleString(undefined, { month:'long', year:'numeric' });\r\n                        }\r\n                      }\r\n                      if(!byMonth.has(label)) byMonth.set(label, []);\r\n                      byMonth.get(label).push(e);\r\n                    }\r\n                    const entries = Array.from(byMonth.entries());\r\n                    return entries.map(([label, list]) => (\r\n                      <section key={label}>\r\n                        <h5 className=\"text-sm font-semibold text-brand-brown/80 mb-2\">{label}</h5>\r\n                        <ul className=\"space-y-2\">\r\n                          {list.map(e => (\r\n                            <li key={`ev_${e.source}_${e.id}`} className=\"p-3 rounded border border-cream-border bg-white flex flex-col md:flex-row md:items-center gap-3\">\r\n                              <div className=\"flex-1 min-w-0\">\r\n                                <div className=\"font-medium truncate\">{e.name} {e.source==='Demo' && <span className=\"ml-2 text-[10px] px-1 py-0.5 rounded bg-cream-sand border border-cream-border align-middle\">Demo</span>}</div>\r\n                                <div className=\"text-[12px] text-brand-brown/70 truncate\">\r\n                                  {([e.venue, e.city, e.country].filter(Boolean).length > 0)\r\n                                    ? (\r\n                                      <>\r\n                                        {[e.venue, e.city, e.country].filter(Boolean).join(', ')} {e.date ? `‚Ä¢ ${new Date(e.date).toLocaleDateString()}` : ''}\r\n                                      </>\r\n                                    ) : (\r\n                                      <>\r\n                                        {e.date ? <span className=\"px-1 py-0.5 mr-1 rounded bg-cream-sand border border-cream-border align-middle\">{new Date(e.date).toLocaleDateString()}</span> : null}\r\n                                      </>\r\n                                    )}\r\n                                  {' '}‚Ä¢ <span className=\"px-1 py-0.5 text-[10px] rounded bg-cream-sand border border-cream-border align-middle\">{e.source}</span>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex items-center gap-2\">\r\n                                {e.url && <a href={e.url} target=\"_blank\" rel=\"noreferrer\" className=\"px-2 py-1 text-xs rounded border border-cream-border hover:bg-cream-hover\">Open</a>}\r\n                                <button\r\n                                  onClick={()=> addToBasket({\r\n                                    id: `ev_${e.source}_${e.id}`,\r\n                                    title: e.name,\r\n                                    description: [e.venue, e.city, e.country, e.date && new Date(e.date).toLocaleDateString()].filter(Boolean).join(' ‚Ä¢ '),\r\n                                    category: 'Event',\r\n                                    price: 0,\r\n                                    url: e.url || '',\r\n                                    source: e.source,\r\n                                  })}\r\n                                  className=\"px-3 py-1.5 text-xs rounded border border-brand-brown hover:bg-cream-hover\"\r\n                                >Add</button>\r\n                              </div>\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </section>\r\n                    ));\r\n                  })()}\r\n                </div>\r\n              )}\r\n              \r\n              {eventsHasMore && (\r\n                <div className=\"mt-3\">\r\n                  <button\r\n                    onClick={async ()=>{\r\n                      // Load next page and append\r\n                      try {\r\n                        setEventsLoading(true);\r\n                        const term = query.trim();\r\n                        const city = locFilters.city.trim();\r\n                        const country = locFilters.country.trim();\r\n                        const nextPage = (eventsPage || 1) + 1;\r\n                        const { events: more, page, hasMore } = await fetchEvents({ q: term || \"\", city, country, page: nextPage, limit: 8, includePast });\r\n                        setEvents(prev => mergeAndSort(prev, more, eventsSort));\r\n                        setEventsPage(page || nextPage);\r\n                        setEventsHasMore(!!hasMore);\r\n                      } catch {\r\n                        // keep existing list, surface a soft error\r\n                        setEventsError(\"Could not load more events.\");\r\n                      } finally {\r\n                        setEventsLoading(false);\r\n                      }\r\n                    }}\r\n                    className=\"px-3 py-1.5 text-xs rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n                  >Load more</button>\r\n                </div>\r\n              )}\r\n              {/* Provider contribution summary */}\r\n              {Object.keys(eventsSourceCounts||{}).length>0 && (\r\n                <div className=\"mt-3 text-[12px] text-brand-brown/60\">\r\n                  Sources: {Object.entries(eventsSourceCounts).map(([k,v]) => (\r\n                    <span key={k} className=\"inline-flex items-center gap-1 mr-2\">\r\n                      <span className=\"px-1 py-0.5 rounded bg-cream-sand border border-cream-border\">{k}</span>\r\n                      <span>{v}</span>\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n    {/* Basket (hidden in Simple mode) */}\r\n    {!simpleMode && (\r\n  <div className=\"rounded border border-cream-border bg-cream p-4 h-fit sticky [top:calc(var(--header-h)+var(--banner-h)+2rem)]\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"font-semibold\">Basket ({basket.length})</h3>\r\n            {!confirmClear && (\r\n              <button onClick={()=>setConfirmClear(true)} className=\"text-[11px] px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\">Clear basket</button>\r\n            )}\r\n            {confirmClear && (\r\n              <div className=\"flex items-center gap-1\">\r\n                <span className=\"text-[11px] text-brand-brown/70\">Confirm?</span>\r\n                <button\r\n                  onClick={()=>{\r\n                    setLastCleared(basket);\r\n                    clearBasket();\r\n                    setConfirmClear(false);\r\n                    setUndoMsg('Basket cleared. Undo available for 10 seconds.');\r\n                    if (undoTimerRef.current) clearTimeout(undoTimerRef.current);\r\n                    undoTimerRef.current = setTimeout(()=>{ setUndoMsg(''); setLastCleared([]); }, 10000);\r\n                    showToast('Basket cleared', 'info');\r\n                  }}\r\n                  className=\"text-[11px] px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n                >Yes</button>\r\n                <button onClick={()=>setConfirmClear(false)} className=\"text-[11px] px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\">No</button>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {undoMsg && (\r\n            <div className=\"mb-2 text-[12px] bg-cream-sand border border-cream-border rounded p-2 flex items-center justify-between\">\r\n              <span>{undoMsg}</span>\r\n              <button\r\n                onClick={()=>{\r\n                  if (undoTimerRef.current) { clearTimeout(undoTimerRef.current); undoTimerRef.current = null; }\r\n                  // restore order and quantities\r\n                  const snapshot = lastCleared || [];\r\n                  snapshot.forEach(item => addToBasket({ ...item }));\r\n                  setUndoMsg('Restored basket');\r\n                  setTimeout(()=> setUndoMsg(''), 1200);\r\n                  setLastCleared([]);\r\n                  showToast('Basket restored', 'success');\r\n                }}\r\n                className=\"text-[11px] px-2 py-1 rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n              >Undo</button>\r\n            </div>\r\n          )}\r\n          <span aria-live=\"polite\" className=\"sr-only\">{undoMsg}</span>\r\n          \r\n          {/* Workflow Panel - shows workflow when basket has items */}\r\n          {basket.length > 0 && (\r\n            <div className=\"mb-4\">\r\n              <WorkflowPanel \r\n                currentPage=\"plan-trip\"\r\n                basketCount={basket.length}\r\n                hasItinerary={false}\r\n                hasQuote={false}\r\n              />\r\n            </div>\r\n          )}\r\n          \r\n          {/* Toasts container */}\r\n          {toasts.length>0 && (\r\n            <div className=\"fixed right-4 bottom-4 z-50 space-y-2\">\r\n              {toasts.map(t => (\r\n                <div key={t.id} className={`px-3 py-2 rounded shadow border text-sm ${t.type==='success'?'bg-green-50 border-green-200 text-green-800': t.type==='error'?'bg-red-50 border-red-200 text-red-800': t.type==='warn'?'bg-yellow-50 border-yellow-200 text-yellow-800':'bg-white border-cream-border text-brand-russty'}`}>{t.text}</div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          {/* Live region: announce basket item count updates */}\r\n          <div aria-live=\"polite\" role=\"status\" className=\"sr-only\">Basket has {basket.length} item{basket.length===1?'':'s'}</div>\r\n          {basket.length === 0 && <p className=\"text-sm text-brand-russty/60\">No items yet. Add from the catalog.</p>}\r\n          <ul className=\"space-y-2 mb-4\">\r\n            {basket.map(item => (\r\n              <li key={item.id} className=\"bg-white rounded border border-cream-border p-2 text-sm flex flex-col gap-1\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"font-medium truncate\">{item.title}</span>\r\n                  <button onClick={()=>removeFromBasket(item.id)} className=\"text-[10px] uppercase tracking-wide text-red-600 hover:text-red-500\">Remove</button>\r\n                </div>\r\n                <div className=\"flex flex-wrap items-center gap-2 text-[11px] text-brand-russty/70\">\r\n                  <span>{item.price > 0 ? formatCurrency(item.price, 'USD') : 'Included'}</span>\r\n                  <span>‚Ä¢ Qty</span>\r\n                  <input type=\"number\" min={1} value={item.quantity} onChange={e=>updateQuantity(item.id, Number(e.target.value))} className=\"w-14 px-1 py-0.5 border border-cream-border rounded\" />\r\n                  <span>‚Ä¢ Day</span>\r\n                  <input type=\"number\" min={1} value={item.day || 1} onChange={e=>updateDay(item.id, e.target.value)} className=\"w-14 px-1 py-0.5 border border-cream-border rounded\" />\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          {(() => {\r\n            const paidTotal = paidItems.reduce((sum,i)=> sum + (Number(i.price)||0) * (Number(i.quantity)||1), 0);\r\n            return (\r\n              <div className=\"flex items-center justify-between text-xs text-brand-russty/80 mb-3\">\r\n                <span>All items appear in itinerary. Paid items appear in quotes.</span>\r\n                <span className=\"font-semibold\">Paid total: {formatCurrency(paidTotal, 'USD')}</span>\r\n              </div>\r\n            );\r\n          })()}\r\n          \r\n          {/* Mini Itinerary Preview */}\r\n          {basket.length > 0 && (\r\n            <div className=\"mb-4\">\r\n              <MiniItineraryPreview basket={basket} />\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"flex items-center gap-2 mb-3\">\r\n            <button\r\n              onClick={async ()=>{\r\n                try {\r\n                  const lines = [];\r\n                  lines.push('Trip Basket Summary');\r\n                  lines.push('');\r\n                  basket.forEach(i => {\r\n                    const qty = Number(i.quantity)||1;\r\n                    const unit = Number(i.price)||0;\r\n                    const _lineTotal = unit * qty; // eslint-disable-line no-unused-vars\r\n                    const loc = [i.city, i.province, i.country].filter(Boolean).join(', ');\r\n                    lines.push(`- ${qty} x ${i.title}${unit>0?` @ ${formatCurrency(unit,'USD')}`:' (Included)'}${loc?` ‚Ä¢ ${loc}`:''}`);\r\n                  });\r\n                  const paidTotal = paidItems.reduce((sum,i)=> sum + (Number(i.price)||0) * (Number(i.quantity)||1), 0);\r\n                  lines.push('');\r\n                  lines.push(`Paid total: ${formatCurrency(paidTotal,'USD')}`);\r\n                  const text = lines.join('\\n');\r\n                  if (navigator.clipboard && navigator.clipboard.writeText) {\r\n                    await navigator.clipboard.writeText(text);\r\n                  } else {\r\n                    const ta = document.createElement('textarea');\r\n                    ta.value = text;\r\n                    ta.setAttribute('readonly','');\r\n                    ta.style.position = 'absolute';\r\n                    ta.style.left = '-9999px';\r\n                    document.body.appendChild(ta);\r\n                    ta.select();\r\n                    document.execCommand('copy');\r\n                    document.body.removeChild(ta);\r\n                  }\r\n                  setCopySummaryStatus('ok');\r\n                  setTimeout(()=> setCopySummaryStatus(''), 1500);\r\n                } catch {\r\n                  setCopySummaryStatus('err');\r\n                  setTimeout(()=> setCopySummaryStatus(''), 2000);\r\n                }\r\n              }}\r\n              className=\"px-2 py-1 text-xs rounded border border-cream-border bg-white hover:bg-cream-hover\"\r\n              title=\"Copy basket summary\"\r\n              aria-label=\"Copy basket summary\"\r\n            >Copy summary</button>\r\n            <span aria-live=\"polite\" className=\"sr-only\">{copySummaryStatus==='ok' ? 'Basket summary copied' : (copySummaryStatus==='err' ? 'Copy failed' : '')}</span>\r\n          </div>\r\n          <Link to=\"/quote/new\" state={{ fromBasket: true }} className={`block text-center px-3 py-2 rounded text-sm font-medium border ${paidItems.length? 'bg-brand-orange text-cream border-brand-orange hover:bg-brand-highlight':'bg-cream-sand text-brand-russty/50 border-cream-border cursor-not-allowed'}`}>Create Quote ({paidItems.length})</Link>\r\n        </div>\r\n        )}\r\n      </div>\r\n\r\n  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pb-[calc(var(--footer-h)+1rem)]\">\r\n        <Link to=\"/bookings\" className=\"p-4 bg-cream-sand border border-cream-border rounded-md hover:bg-cream-hover transition\">\r\n          <div className=\"font-semibold\">Bookings</div>\r\n          <p className=\"text-sm text-brand-russty/80\">See all confirmations and status in one place.</p>\r\n        </Link>\r\n        <Link to=\"/terms\" className=\"p-4 bg-cream-sand border border-cream-border rounded-md hover:bg-cream-hover transition\">\r\n          <div className=\"font-semibold\">Travel Safety & Terms</div>\r\n          <p className=\"text-sm text-brand-russty/80\">Know-before-you-go and policies.</p>\r\n        </Link>\r\n        <Link to=\"/contact\" className=\"p-4 bg-cream-sand border border-cream-border rounded-md hover:bg-cream-hover transition\">\r\n          <div className=\"font-semibold\">Concierge</div>\r\n          <p className=\"text-sm text-brand-russty/80\">Need help? Our team is here.</p>\r\n        </Link>\r\n      </div>\r\n      {/* My Location Modal */}\r\n      <MyLocationModal\r\n        open={locModalOpen}\r\n        initial={myLocation}\r\n        onClose={()=> setLocModalOpen(false)}\r\n        onSave={(loc)=>{\r\n          persistMyLocation(loc);\r\n          setLocModalOpen(false);\r\n          showToast('Location saved', 'success');\r\n        }}\r\n      />\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","jsxs","jsx","useRef","useEffect","useMemo","Fragment","filtered","sortEventsUtil","fetchEvents","buildLocMapsUtil"],"mappings":"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"}