{"version":3,"file":"QuoteGenerator-BSNjDLC-.js","sources":["../../src/utils/aiInvoiceParser.js","../../src/pages/QuoteGenerator.jsx"],"sourcesContent":["/**\r\n * AI-Powered Invoice Item Parser\r\n * Converts natural language descriptions into structured invoice items\r\n */\r\n\r\n/**\r\n * Parse natural language prompt into invoice items\r\n * @param {string} prompt - Natural language description of services/items\r\n * @returns {Promise<Array>} Array of invoice items\r\n */\r\nexport async function parsePromptToInvoiceItems(prompt) {\r\n  const items = [];\r\n  \r\n  // Split by common delimiters\r\n  const segments = prompt.split(/[,;\\n]/).map(s => s.trim()).filter(s => s);\r\n  \r\n  for (const segment of segments) {\r\n    const item = parseSegment(segment);\r\n    if (item) {\r\n      items.push(item);\r\n    }\r\n  }\r\n  \r\n  // If no items parsed, create a generic item\r\n  if (items.length === 0) {\r\n    items.push({\r\n      title: 'Service',\r\n      description: prompt.trim(),\r\n      quantity: 1,\r\n      unitPrice: 0\r\n    });\r\n  }\r\n  \r\n  return items;\r\n}\r\n\r\n/**\r\n * Parse a single segment into an invoice item\r\n */\r\nfunction parseSegment(segment) {\r\n  const _lower = segment.toLowerCase();\r\n  \r\n  // Flight patterns\r\n  const flightPatterns = [\r\n    /flight.*?(from|to)\\s+([a-z\\s]+?)(?:\\s+to\\s+|\\s+on\\s+|\\s+for\\s+).*?([r$]?\\s*[\\d,]+(?:\\.\\d{2})?)/i,\r\n    /([a-z\\s]+?)\\s*flight.*?([r$]?\\s*[\\d,]+(?:\\.\\d{2})?)/i,\r\n    /fly.*?(from|to)\\s+([a-z\\s]+?).*?([r$]?\\s*[\\d,]+(?:\\.\\d{2})?)/i\r\n  ];\r\n  \r\n  for (const pattern of flightPatterns) {\r\n    const match = segment.match(pattern);\r\n    if (match) {\r\n      const price = extractPrice(match[match.length - 1]);\r\n      return {\r\n        title: 'Flight Booking',\r\n        description: segment.trim(),\r\n        quantity: 1,\r\n        unitPrice: price\r\n      };\r\n    }\r\n  }\r\n  \r\n  // Hotel/Accommodation patterns\r\n  const hotelPatterns = [\r\n    /(\\d+)\\s*(?:night|nite|nites).*?(?:hotel|accommodation|stay).*?(?:at|for|@)\\s*[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i,\r\n    /(?:hotel|accommodation|stay).*?(\\d+)\\s*(?:night|nite|nites).*?(?:at|for|@)\\s*[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i,\r\n    /(?:hotel|accommodation).*?[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i\r\n  ];\r\n  \r\n  for (const pattern of hotelPatterns) {\r\n    const match = segment.match(pattern);\r\n    if (match) {\r\n      const hasNights = match[1] && /^\\d+$/.test(match[1]);\r\n      const quantity = hasNights ? parseInt(match[1]) : 1;\r\n      const priceIndex = hasNights ? 2 : 1;\r\n      const price = extractPrice(match[priceIndex]);\r\n      \r\n      return {\r\n        title: 'Hotel Accommodation',\r\n        description: segment.trim(),\r\n        quantity: quantity,\r\n        unitPrice: price\r\n      };\r\n    }\r\n  }\r\n  \r\n  // Car rental patterns\r\n  const carPatterns = [\r\n    /(?:car|vehicle)\\s*(?:hire|rental).*?(\\d+)\\s*days?.*?(?:at|for|@)\\s*[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i,\r\n    /(\\d+)\\s*days?\\s*(?:car|vehicle)\\s*(?:hire|rental).*?[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i,\r\n    /(?:car|vehicle)\\s*(?:hire|rental).*?[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i\r\n  ];\r\n  \r\n  for (const pattern of carPatterns) {\r\n    const match = segment.match(pattern);\r\n    if (match) {\r\n      const hasDays = match[1] && /^\\d+$/.test(match[1]);\r\n      const quantity = hasDays ? parseInt(match[1]) : 1;\r\n      const priceIndex = hasDays ? 2 : 1;\r\n      const price = extractPrice(match[priceIndex]);\r\n      \r\n      return {\r\n        title: 'Car Rental',\r\n        description: segment.trim(),\r\n        quantity: quantity,\r\n        unitPrice: price\r\n      };\r\n    }\r\n  }\r\n  \r\n  // Tour/Activity patterns\r\n  const tourPatterns = [\r\n    /(?:tour|activity|excursion|safari|cruise).*?[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i,\r\n    /(?:tour|activity|excursion|safari|cruise)/i\r\n  ];\r\n  \r\n  for (const pattern of tourPatterns) {\r\n    const match = segment.match(pattern);\r\n    if (match) {\r\n      const price = match[1] ? extractPrice(match[1]) : 0;\r\n      return {\r\n        title: 'Tour/Activity',\r\n        description: segment.trim(),\r\n        quantity: 1,\r\n        unitPrice: price\r\n      };\r\n    }\r\n  }\r\n  \r\n  // Transfer/Transport patterns\r\n  const transferPatterns = [\r\n    /(?:transfer|transport|shuttle|taxi).*?[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i,\r\n    /(?:airport|pickup|dropoff|drop-off).*?[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i\r\n  ];\r\n  \r\n  for (const pattern of transferPatterns) {\r\n    const match = segment.match(pattern);\r\n    if (match) {\r\n      const price = match[1] ? extractPrice(match[1]) : 0;\r\n      return {\r\n        title: 'Transfer Service',\r\n        description: segment.trim(),\r\n        quantity: 1,\r\n        unitPrice: price\r\n      };\r\n    }\r\n  }\r\n  \r\n  // Conference/Event patterns\r\n  const eventPatterns = [\r\n    /(?:conference|event|meeting|function|venue).*?[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i\r\n  ];\r\n  \r\n  for (const pattern of eventPatterns) {\r\n    const match = segment.match(pattern);\r\n    if (match) {\r\n      const price = match[1] ? extractPrice(match[1]) : 0;\r\n      return {\r\n        title: 'Event/Conference',\r\n        description: segment.trim(),\r\n        quantity: 1,\r\n        unitPrice: price\r\n      };\r\n    }\r\n  }\r\n  \r\n  // Generic service with price\r\n  const genericPattern = /([a-z\\s]+?).*?[r$]?\\s*([\\d,]+(?:\\.\\d{2})?)/i;\r\n  const genericMatch = segment.match(genericPattern);\r\n  if (genericMatch && genericMatch[2]) {\r\n    const price = extractPrice(genericMatch[2]);\r\n    return {\r\n      title: genericMatch[1].trim() || 'Service',\r\n      description: segment.trim(),\r\n      quantity: 1,\r\n      unitPrice: price\r\n    };\r\n  }\r\n  \r\n  // Fallback: create item without price if segment has content\r\n  if (segment.length > 5) {\r\n    return {\r\n      title: 'Service',\r\n      description: segment.trim(),\r\n      quantity: 1,\r\n      unitPrice: 0\r\n    };\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\n/**\r\n * Extract numeric price from string\r\n */\r\nfunction extractPrice(str) {\r\n  if (!str) return 0;\r\n  \r\n  // Remove currency symbols and spaces\r\n  const cleaned = str.toString().replace(/[r$\\s]/gi, '').replace(/,/g, '');\r\n  const num = parseFloat(cleaned);\r\n  \r\n  return isNaN(num) ? 0 : num;\r\n}\r\n\r\n/**\r\n * Suggest invoice items based on common travel packages\r\n */\r\nexport function suggestCommonItems() {\r\n  return [\r\n    {\r\n      category: 'Flights',\r\n      items: [\r\n        { title: 'Domestic Flight', description: 'One-way domestic flight', unitPrice: 0 },\r\n        { title: 'International Flight', description: 'One-way international flight', unitPrice: 0 },\r\n        { title: 'Return Flight', description: 'Return flight booking', unitPrice: 0 }\r\n      ]\r\n    },\r\n    {\r\n      category: 'Accommodation',\r\n      items: [\r\n        { title: 'Hotel - Standard Room', description: 'Per night', unitPrice: 0 },\r\n        { title: 'Hotel - Deluxe Room', description: 'Per night', unitPrice: 0 },\r\n        { title: 'Guesthouse', description: 'Per night', unitPrice: 0 },\r\n        { title: 'Resort/Lodge', description: 'Per night', unitPrice: 0 }\r\n      ]\r\n    },\r\n    {\r\n      category: 'Transport',\r\n      items: [\r\n        { title: 'Airport Transfer', description: 'One-way transfer', unitPrice: 0 },\r\n        { title: 'Car Rental', description: 'Per day', unitPrice: 0 },\r\n        { title: 'Private Chauffeur', description: 'Per day', unitPrice: 0 }\r\n      ]\r\n    },\r\n    {\r\n      category: 'Activities',\r\n      items: [\r\n        { title: 'City Tour', description: 'Half-day guided tour', unitPrice: 0 },\r\n        { title: 'Safari/Game Drive', description: 'Full-day experience', unitPrice: 0 },\r\n        { title: 'Cultural Experience', description: 'Activity/workshop', unitPrice: 0 }\r\n      ]\r\n    },\r\n    {\r\n      category: 'Services',\r\n      items: [\r\n        { title: 'Travel Insurance', description: 'Per person', unitPrice: 0 },\r\n        { title: 'Visa Assistance', description: 'Processing fee', unitPrice: 0 },\r\n        { title: 'Concierge Service', description: 'Per booking', unitPrice: 0 }\r\n      ]\r\n    }\r\n  ];\r\n}\r\n\r\n/**\r\n * Example usage patterns for AI prompts\r\n */\r\nexport const examplePrompts = [\r\n  \"Flight from Durban to Cape Town on FlySafair for R4,500, 3 nights hotel accommodation at R1,200 per night, airport transfer for R450\",\r\n  \"Return flight Johannesburg to Zanzibar R8,500, 5 nights beachfront resort R2,800 per night, scuba diving tour R1,200\",\r\n  \"Conference venue hire R15,000, catering for 50 people R350 per person, AV equipment R2,500\",\r\n  \"3 day car rental at R850 per day, fuel R600, toll fees R120\",\r\n  \"Safari lodge 4 nights R4,500 per night, 2 game drives R950 each, conservation fee R450\"\r\n];\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { generateQuotePdf } from '../utils/pdfGenerators';\r\nimport { useUser } from '../context/UserContext';\r\nimport { parsePromptToInvoiceItems, suggestCommonItems, examplePrompts } from '../utils/aiInvoiceParser';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from \"../components/ui/Button.jsx\";\r\n\r\nexport default function QuoteGenerator() {\r\n  const { user } = useUser();\r\n  const [aiPrompt, setAiPrompt] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [showExamples, setShowExamples] = useState(false);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const [savedQuotes, setSavedQuotes] = useState([]);\r\n  const [partnerTemplates, setPartnerTemplates] = useState([]);\r\n  const [selectedTemplate, setSelectedTemplate] = useState(null);\r\n  const [customLogo, setCustomLogo] = useState(null);\r\n  const [_showLogoUpload, _setShowLogoUpload] = useState(false); // legacy flag retained for future logo UX\r\n  const autoSaveTimerRef = useRef(null);\r\n  const [quote, setQuote] = useState({\r\n    documentType: 'Invoice', // 'Invoice' or 'Quotation'\r\n    invoiceNumber: '',\r\n    orderNumber: '',\r\n    clientName: '',\r\n    clientAddress: '',\r\n    clientPhone: '',\r\n    clientEmail: '',\r\n    clientVAT: '',\r\n    items: [],\r\n    currency: 'R',\r\n    taxRate: 15,\r\n    status: 'Draft',\r\n    issueDate: new Date().toISOString().split('T')[0],\r\n    dueDate: '',\r\n    paymentTerms: 'Net 30',\r\n    createdAt: new Date(),\r\n    // Optional custom fields\r\n    companyInfo: null,\r\n    banking: null,\r\n    terms: null\r\n  });\r\n\r\n  // Auto-save quote changes after 2 seconds of inactivity\r\n  useEffect(() => {\r\n    if (quote.id && quote.clientName) {\r\n      // Clear existing timer\r\n      if (autoSaveTimerRef.current) {\r\n        clearTimeout(autoSaveTimerRef.current);\r\n      }\r\n      \r\n      // Set new timer for auto-save\r\n      autoSaveTimerRef.current = setTimeout(() => {\r\n        const quotes = JSON.parse(localStorage.getItem('quotes') || '[]');\r\n        const index = quotes.findIndex(q => q.id === quote.id);\r\n        if (index !== -1) {\r\n          quotes[index] = { ...quote, updatedAt: new Date() };\r\n          localStorage.setItem('quotes', JSON.stringify(quotes));\r\n        }\r\n      }, 2000);\r\n    }\r\n    \r\n    return () => {\r\n      if (autoSaveTimerRef.current) {\r\n        clearTimeout(autoSaveTimerRef.current);\r\n      }\r\n    };\r\n  }, [quote]);\r\n  \r\n  // Define getNextDocumentNumber before useEffect to avoid initialization error\r\n  const getNextDocumentNumber = useCallback((type) => {\r\n    const userId = user?.id || 'default';\r\n    const counterKey = `${type.toLowerCase()}_counter_${userId}`;\r\n    const currentCounter = parseInt(localStorage.getItem(counterKey) || '0');\r\n    const nextCounter = currentCounter + 1;\r\n    localStorage.setItem(counterKey, nextCounter.toString());\r\n    const prefix = type === 'Invoice' ? 'INV' : 'QUO';\r\n    return `${prefix}-${String(nextCounter).padStart(4, '0')}`;\r\n  }, [user?.id]);\r\n\r\n  const loadPartnerTemplates = useCallback(() => {\r\n    const templates = JSON.parse(localStorage.getItem(`partner_templates_${user?.id}`) || '[]');\r\n    setPartnerTemplates(templates);\r\n    const def = templates.find(t => t.isDefault);\r\n    if (def && !selectedTemplate) setSelectedTemplate(def);\r\n  }, [user?.id, selectedTemplate]);\r\n  \r\n  // Auto-generate invoice/quote number when client name is added\r\n  useEffect(() => {\r\n    if (quote.clientName && !quote.invoiceNumber) {\r\n      const docNum = getNextDocumentNumber(quote.documentType);\r\n      setQuote(prev => ({ ...prev, invoiceNumber: docNum }));\r\n    }\r\n  }, [quote.clientName, quote.invoiceNumber, quote.documentType, getNextDocumentNumber]);\r\n  \r\n  // Auto-update status based on quote state\r\n  useEffect(() => {\r\n    if (quote.items.length > 0 && quote.clientName) {\r\n      if (quote.status === 'Draft') {\r\n        setQuote(prev => ({ ...prev, status: 'Ready' }));\r\n      }\r\n    }\r\n  }, [quote.items.length, quote.clientName, quote.status]);\r\n\r\n  // Load saved quotes and partner templates on mount\r\n  useEffect(() => {\r\n    loadSavedQuotes();\r\n    loadPartnerTemplates();\r\n    loadCustomLogo();\r\n  }, [user, loadPartnerTemplates]);\r\n\r\n  function loadSavedQuotes() {\r\n    const quotes = JSON.parse(localStorage.getItem('quotes') || '[]');\r\n    setSavedQuotes(quotes);\r\n  }\r\n  \r\n  function loadCustomLogo() {\r\n    const saved = localStorage.getItem('custom_invoice_logo');\r\n    if (saved) {\r\n      setCustomLogo(saved);\r\n    }\r\n  }\r\n  \r\n  // Removed calculateDueDate (unused) â€“ restore when payment terms logic added\r\n  \r\n  function handleLogoUpload(e) {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    \r\n    if (!file.type.startsWith('image/')) {\r\n      alert('Please upload an image file');\r\n      return;\r\n    }\r\n    \r\n    if (file.size > 2 * 1024 * 1024) {\r\n      alert('Image must be less than 2MB');\r\n      return;\r\n    }\r\n    \r\n    const reader = new FileReader();\r\n    reader.onload = (evt) => {\r\n      const dataUrl = evt.target?.result;\r\n      if (dataUrl && typeof dataUrl === 'string') {\r\n        setCustomLogo(dataUrl);\r\n        localStorage.setItem('custom_invoice_logo', dataUrl);\r\n        alert('Logo uploaded successfully!');\r\n      }\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n  \r\n  function removeCustomLogo() {\r\n    setCustomLogo(null);\r\n    localStorage.removeItem('custom_invoice_logo');\r\n  }\r\n\r\n  // AI-powered invoice generation\r\n  async function handleAIGeneration() {\r\n    if (!aiPrompt.trim()) {\r\n      alert('Please enter a description of what you need invoiced');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Parse the AI prompt to extract invoice items using enhanced parser\r\n      const items = await parsePromptToInvoiceItems(aiPrompt);\r\n      \r\n      // Auto-generate invoice number\r\n      const invoiceNum = `INV-${Date.now().toString().slice(-6)}`;\r\n      \r\n      setQuote(prev => ({\r\n        ...prev,\r\n        invoiceNumber: invoiceNum,\r\n        items: items,\r\n        status: 'AI Generated'\r\n      }));\r\n      \r\n      alert(`âœ¨ Generated ${items.length} invoice item(s) successfully! Review and edit as needed.`);\r\n      setAiPrompt(''); // Clear prompt after successful generation\r\n    } catch (error) {\r\n      console.error('AI generation failed:', error);\r\n      alert('Failed to generate invoice. Please try again or add items manually.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // Use example prompt\r\n  function applyExample(example) {\r\n    setAiPrompt(example);\r\n    setShowExamples(false);\r\n  }\r\n\r\n  // Add suggested item\r\n  function addSuggestedItem(item) {\r\n    setQuote(prev => ({\r\n      ...prev,\r\n      items: [...prev.items, { ...item, quantity: 1 }]\r\n    }));\r\n  }\r\n\r\n  // Add new item manually\r\n  function addItem() {\r\n    setQuote(prev => ({\r\n      ...prev,\r\n      items: [...prev.items, {\r\n        title: '',\r\n        description: '',\r\n        quantity: 1,\r\n        unitPrice: 0\r\n      }]\r\n    }));\r\n  }\r\n\r\n  // Remove item\r\n  function removeItem(index) {\r\n    setQuote(prev => ({\r\n      ...prev,\r\n      items: prev.items.filter((_, i) => i !== index)\r\n    }));\r\n  }\r\n\r\n  // Update item\r\n  function updateItem(index, field, value) {\r\n    setQuote(prev => ({\r\n      ...prev,\r\n      items: prev.items.map((item, i) => \r\n        i === index ? { ...item, [field]: value } : item\r\n      )\r\n    }));\r\n  }\r\n\r\n  // Calculate totals\r\n  function calculateTotals() {\r\n    const subtotal = quote.items.reduce((sum, item) => \r\n      sum + (item.quantity * item.unitPrice), 0\r\n    );\r\n    const vat = (subtotal * quote.taxRate) / 100;\r\n    const total = subtotal + vat;\r\n    return { subtotal, vat, total };\r\n  }\r\n\r\n  // Generate PDF\r\n  async function generatePDF() {\r\n    if (!quote.clientName) {\r\n      alert('Please enter client name');\r\n      return;\r\n    }\r\n    if (quote.items.length === 0) {\r\n      alert('Please add at least one item');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Prepare quote with template data if selected\r\n      const quoteData = {\r\n        ...quote,\r\n        updatedAt: new Date(),\r\n        customLogo: customLogo // Pass custom logo to PDF generator\r\n      };\r\n\r\n      // Apply partner template if selected\r\n      if (selectedTemplate) {\r\n        quoteData.companyInfo = {\r\n          name: selectedTemplate.companyInfo.name,\r\n          legalName: selectedTemplate.companyInfo.legalName,\r\n          registration: selectedTemplate.companyInfo.registration,\r\n          taxNumber: selectedTemplate.companyInfo.taxNumber,\r\n          vatNumber: selectedTemplate.companyInfo.vatNumber,\r\n          csd: selectedTemplate.companyInfo.csd,\r\n          address: selectedTemplate.companyInfo.address,\r\n          phone: selectedTemplate.companyInfo.phone,\r\n          email: selectedTemplate.companyInfo.email,\r\n          website: selectedTemplate.companyInfo.website,\r\n          logo: selectedTemplate.companyInfo.logo\r\n        };\r\n        quoteData.banking = selectedTemplate.banking;\r\n        quoteData.terms = selectedTemplate.terms;\r\n        quoteData.styling = selectedTemplate.styling;\r\n        quoteData.layout = selectedTemplate.layout;\r\n      }\r\n\r\n      await generateQuotePdf(quoteData);\r\n      alert('âœ… Invoice PDF generated successfully with your branding!');\r\n    } catch (error) {\r\n      console.error('PDF generation failed:', error);\r\n      alert('Failed to generate PDF. Please try again.');\r\n    }\r\n  }\r\n\r\n  // Save quote for later\r\n  function saveQuote() {\r\n    if (!quote.clientName) {\r\n      alert('Please enter client name before saving');\r\n      return;\r\n    }\r\n    \r\n    const quotes = JSON.parse(localStorage.getItem('quotes') || '[]');\r\n    const newQuote = {\r\n      ...quote,\r\n      id: quote.id || `Q-${Date.now()}`,\r\n      createdAt: quote.createdAt.toISOString(),\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    \r\n    const existingIndex = quotes.findIndex(q => q.id === newQuote.id);\r\n    if (existingIndex >= 0) {\r\n      quotes[existingIndex] = newQuote;\r\n      alert('Quote updated successfully!');\r\n    } else {\r\n      quotes.push(newQuote);\r\n      alert('Quote saved successfully!');\r\n    }\r\n    \r\n    localStorage.setItem('quotes', JSON.stringify(quotes));\r\n    setQuote(prev => ({ ...prev, id: newQuote.id }));\r\n    loadSavedQuotes();\r\n  }\r\n\r\n  // Load existing quote\r\n  function loadQuote(savedQuote) {\r\n    setQuote({\r\n      ...savedQuote,\r\n      createdAt: new Date(savedQuote.createdAt),\r\n      updatedAt: savedQuote.updatedAt ? new Date(savedQuote.updatedAt) : new Date()\r\n    });\r\n  }\r\n\r\n  // Create new quote\r\n  function newQuote() {\r\n    setQuote({\r\n      documentType: 'Invoice',\r\n      invoiceNumber: '',\r\n      orderNumber: '',\r\n      clientName: '',\r\n      clientAddress: '',\r\n      clientPhone: '',\r\n      clientEmail: '',\r\n      clientVAT: '',\r\n      items: [],\r\n      currency: 'R',\r\n      taxRate: 15,\r\n      status: 'Draft',\r\n      issueDate: new Date().toISOString().split('T')[0],\r\n      dueDate: '',\r\n      paymentTerms: 'Net 30',\r\n      createdAt: new Date(),\r\n      companyInfo: null,\r\n      banking: null,\r\n      terms: null\r\n    });\r\n  }\r\n\r\n  // Delete quote\r\n  function deleteQuote(id) {\r\n    if (!confirm('Are you sure you want to delete this quote?')) return;\r\n    \r\n    const quotes = JSON.parse(localStorage.getItem('quotes') || '[]');\r\n    const filtered = quotes.filter(q => q.id !== id);\r\n    localStorage.setItem('quotes', JSON.stringify(filtered));\r\n    loadSavedQuotes();\r\n    \r\n    if (quote.id === id) {\r\n      newQuote();\r\n    }\r\n  }\r\n\r\n  const totals = calculateTotals();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-cream\">\r\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 py-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-8 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\r\n          <div className=\"flex-1\">\r\n            <h1 className=\"text-3xl sm:text-4xl font-bold text-brand-brown mb-2\">Quote & Invoice Generator</h1>\r\n            <p className=\"text-brand-russty text-sm sm:text-base\">\r\n              Create professional invoices with AI assistance or manually\r\n              <span className=\"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold\" title=\"Auto-save, auto-numbering, and smart status updates enabled\">\r\n                Smart Mode\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className=\"flex gap-3 flex-wrap\">\r\n            <Button as={Link} to=\"/partner/templates\" variant=\"outline\" size=\"md\">Manage Templates</Button>\r\n            <Button variant=\"secondary\" size=\"md\" onClick={newQuote}>New Quote</Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Template Selector */}\r\n        {partnerTemplates.length > 0 && (\r\n          <div className=\"mb-6 bg-white rounded-xl p-5 border border-cream-border shadow-sm\">\r\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3\">\r\n              <div className=\"flex items-center gap-3 flex-wrap\">\r\n                <span className=\"font-semibold text-brand-brown text-sm\">ðŸ“‹ Template:</span>\r\n                <select\r\n                  value={selectedTemplate?.id || ''}\r\n                  onChange={e => {\r\n                    const template = partnerTemplates.find(t => t.id === e.target.value);\r\n                    setSelectedTemplate(template || null);\r\n                  }}\r\n                  className=\"px-4 py-2 border-2 border-cream-border rounded-lg focus:border-brand-orange focus:outline-none bg-white\"\r\n                >\r\n                  <option value=\"\">CollEco Default</option>\r\n                  {partnerTemplates.map(template => (\r\n                    <option key={template.id} value={template.id}>\r\n                      {template.name} {template.isDefault ? '(Default)' : ''}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              {selectedTemplate && (\r\n                <div className=\"text-sm text-brand-russty\">\r\n                  Using: <span className=\"font-semibold\">{selectedTemplate.companyInfo.name}</span> branding\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Custom Logo Upload */}\r\n        <div className=\"mb-6 bg-white rounded-xl p-5 border border-cream-border shadow-sm\">\r\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div>\r\n                <h3 className=\"font-bold text-brand-brown\">Custom Logo</h3>\r\n                <p className=\"text-xs text-brand-russty\">Upload your logo for invoices (optional)</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-3 items-center flex-wrap\">\r\n              {customLogo ? (\r\n                <>\r\n                  <div className=\"flex items-center gap-3 px-4 py-2 bg-green-50 border border-green-200 rounded-lg\">\r\n                    <img src={customLogo} alt=\"Custom logo\" className=\"h-8 w-auto object-contain\" />\r\n                    <span className=\"text-xs text-green-700 font-semibold\">âœ“ Logo uploaded</span>\r\n                  </div>\r\n                  <button\r\n                    onClick={removeCustomLogo}\r\n                    className=\"px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-semibold hover:bg-red-200 transition-colors\"\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"logoUpload\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleLogoUpload}\r\n                    className=\"hidden\"\r\n                  />\r\n                  <label htmlFor=\"logoUpload\" className=\"cursor-pointer\">\r\n                    <Button as=\"span\" variant=\"primary\" size=\"sm\">Upload Logo</Button>\r\n                  </label>\r\n                  <span className=\"text-xs text-brand-russty\">Max 2MB â€¢ PNG, JPG, SVG</span>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n          {/* Saved Quotes Sidebar */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-xl shadow-sm p-5 sticky [top:calc(var(--header-h)+var(--banner-h))] border border-cream-border\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"text-lg font-bold text-brand-brown\">ðŸ“‚ Saved Quotes</h3>\r\n                <span className=\"text-xs text-brand-russty bg-cream-sand px-2 py-1 rounded-full\">{savedQuotes.length}</span>\r\n              </div>\r\n              <div className=\"space-y-2 max-h-96 overflow-y-auto custom-scrollbar\">\r\n                {savedQuotes.length === 0 ? (\r\n                  <p className=\"text-sm text-brand-russty text-center py-4\">No saved quotes yet</p>\r\n                ) : (\r\n                  savedQuotes.map(sq => (\r\n                    <div\r\n                      key={sq.id}\r\n                      className={`border-2 rounded-lg p-3 cursor-pointer transition-all ${\r\n                        quote.id === sq.id \r\n                          ? 'border-brand-orange bg-brand-orange/5' \r\n                          : 'border-cream-border hover:border-brand-orange/50'\r\n                      }`}\r\n                      onClick={() => loadQuote(sq)}\r\n                    >\r\n                      <div className=\"flex items-start justify-between mb-1\">\r\n                        <span className=\"font-semibold text-sm text-brand-brown truncate flex-1\">\r\n                          {sq.clientName || 'Unnamed'}\r\n                        </span>\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            deleteQuote(sq.id);\r\n                          }}\r\n                          className=\"text-red-500 hover:text-red-700 text-xs ml-2\"\r\n                        >\r\n                          âœ•\r\n                        </button>\r\n                      </div>\r\n                      <div className=\"text-xs text-brand-russty flex items-center gap-1\">\r\n                        <span className=\"font-mono\">{sq.invoiceNumber || 'No #'}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center justify-between mt-2\">\r\n                        <span className=\"text-xs font-semibold text-brand-orange\">\r\n                          {sq.items?.length || 0} {(sq.items?.length || 0) === 1 ? 'item' : 'items'}\r\n                        </span>\r\n                        <span className={`text-[10px] px-2 py-0.5 rounded-full font-semibold ${\r\n                          sq.status === 'Paid' ? 'bg-green-100 text-green-700' :\r\n                          sq.status === 'Sent' ? 'bg-brand-orange/10 text-brand-orange' :\r\n                          sq.status === 'Accepted' ? 'bg-brand-brown/10 text-brand-brown' :\r\n                          'bg-cream-sand text-brand-brown'\r\n                        }`}>\r\n                          {sq.status || 'Draft'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-3 space-y-6\">\r\n            {/* AI Generation Section */}\r\n            <div className=\"bg-white rounded-xl p-6 border border-brand-orange/30 shadow-sm\">\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div>\r\n                  <h2 className=\"text-xl font-bold text-brand-brown flex items-center gap-2\">\r\n                    <span>AI-Powered Generation</span>\r\n                  </h2>\r\n                  <p className=\"text-sm text-brand-russty mt-2\">\r\n                    Describe what you need to invoice and AI will create the items for you\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"relative\">\r\n                <textarea\r\n                  value={aiPrompt}\r\n                  onChange={e => setAiPrompt(e.target.value)}\r\n                  className=\"w-full px-4 py-3 border-2 border-brand-orange/30 rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                  rows=\"4\"\r\n                  placeholder=\"Flight from Durban to Cape Town on FlySafair for R4,500, 3 nights hotel accommodation at R1,200 per night, airport transfer for R450\"\r\n                />\r\n                <button\r\n                  onClick={() => setShowExamples(!showExamples)}\r\n                  className=\"absolute top-2 right-2 text-xs text-brand-orange hover:text-brand-brown\"\r\n                >\r\n                  Examples\r\n                </button>\r\n              </div>\r\n\r\n              {showExamples && (\r\n                <div className=\"mt-3 p-4 bg-white rounded-lg border border-brand-orange/20\">\r\n                  <h4 className=\"text-sm font-bold text-brand-brown mb-2\">Example Prompts:</h4>\r\n                  <div className=\"space-y-2\">\r\n                    {examplePrompts.map((ex, i) => (\r\n                      <button\r\n                        key={i}\r\n                        onClick={() => applyExample(ex)}\r\n                        className=\"w-full text-left text-xs p-2 rounded border border-cream-border hover:border-brand-orange hover:bg-brand-orange/5 transition-all\"\r\n                      >\r\n                        {ex}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex gap-3 mt-3\">\r\n                <div className=\"flex-1\">\r\n                  <Button fullWidth variant=\"primary\" size=\"md\" onClick={handleAIGeneration} disabled={loading}>\r\n                    {loading ? 'Generating...' : 'Generate Invoice Items'}\r\n                  </Button>\r\n                </div>\r\n                <Button variant=\"outline\" size=\"md\" onClick={() => setShowSuggestions(!showSuggestions)}>Quick Add</Button>\r\n              </div>\r\n\r\n              {showSuggestions && (\r\n                <div className=\"mt-4 p-4 bg-white rounded-lg border border-brand-orange/20 max-h-64 overflow-y-auto\">\r\n                  <h4 className=\"text-sm font-bold text-brand-brown mb-3\">Common Items:</h4>\r\n                  {suggestCommonItems().map((category, idx) => (\r\n                    <div key={idx} className=\"mb-3\">\r\n                      <h5 className=\"text-xs font-bold text-brand-russty mb-2\">{category.category}</h5>\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        {category.items.map((item, i) => (\r\n                          <button\r\n                            key={i}\r\n                            onClick={() => addSuggestedItem(item)}\r\n                            className=\"text-left text-xs p-2 rounded border border-cream-border hover:border-brand-orange hover:bg-brand-orange/5 transition-all\"\r\n                          >\r\n                            <div className=\"font-semibold\">{item.title}</div>\r\n                            <div className=\"text-brand-russty\">{item.description}</div>\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Grid for Invoice Details and Items */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n              {/* Left Column - Invoice Details */}\r\n              <div className=\"space-y-6\">\r\n            {/* Invoice Info */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-cream-border hover:shadow-md transition-shadow\">\r\n              <h3 className=\"text-lg font-bold text-brand-brown mb-4 flex items-center gap-2\">\r\n                Document Information\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Document Type</label>\r\n                  <select\r\n                    value={quote.documentType}\r\n                    onChange={e => setQuote({...quote, documentType: e.target.value, invoiceNumber: ''})}\r\n                    className=\"w-full px-3 py-2 border-2 border-brand-orange/30 rounded-lg focus:border-brand-orange focus:outline-none bg-white font-semibold\"\r\n                  >\r\n                    <option value=\"Invoice\">Invoice</option>\r\n                    <option value=\"Quotation\">Quotation</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-brand-brown mb-1\">{quote.documentType} Number</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={quote.invoiceNumber}\r\n                      onChange={e => setQuote({...quote, invoiceNumber: e.target.value})}\r\n                      className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                      placeholder=\"Auto-generated\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Order Number</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={quote.orderNumber}\r\n                      onChange={e => setQuote({...quote, orderNumber: e.target.value})}\r\n                      className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                      placeholder=\"Optional\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Issue Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={quote.issueDate}\r\n                      onChange={e => setQuote({...quote, issueDate: e.target.value})}\r\n                      className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none text-sm\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Due Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={quote.dueDate}\r\n                      onChange={e => setQuote({...quote, dueDate: e.target.value})}\r\n                      className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none text-sm\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Payment Terms</label>\r\n                    <select\r\n                      value={quote.paymentTerms}\r\n                      onChange={e => setQuote({...quote, paymentTerms: e.target.value})}\r\n                      className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                    >\r\n                      <option>Due on Receipt</option>\r\n                      <option>Net 7</option>\r\n                      <option>Net 15</option>\r\n                      <option>Net 30</option>\r\n                      <option>Net 60</option>\r\n                      <option>Net 90</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Status</label>\r\n                    <select\r\n                      value={quote.status}\r\n                      onChange={e => setQuote({...quote, status: e.target.value})}\r\n                      className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                    >\r\n                      <option>Draft</option>\r\n                      <option>Sent</option>\r\n                      <option>Accepted</option>\r\n                      <option>Paid</option>\r\n                      <option>Cancelled</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Client Details */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-cream-border hover:shadow-md transition-shadow\">\r\n              <h3 className=\"text-lg font-bold text-brand-brown mb-4 flex items-center gap-2\">\r\n                <span className=\"text-brand-orange\">ðŸ‘¤</span>\r\n                Client Information\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Client Name *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={quote.clientName}\r\n                    onChange={e => setQuote({...quote, clientName: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                    placeholder=\"e.g., Umzion Municipality\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Address</label>\r\n                  <textarea\r\n                    value={quote.clientAddress}\r\n                    onChange={e => setQuote({...quote, clientAddress: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                    rows=\"2\"\r\n                    placeholder=\"Full address\"\r\n                  />\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Phone</label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={quote.clientPhone}\r\n                      onChange={e => setQuote({...quote, clientPhone: e.target.value})}\r\n                      className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                      placeholder=\"(039) 976 1202\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-brand-brown mb-1\">Email</label>\r\n                    <input\r\n                      type=\"email\"\r\n                      value={quote.clientEmail}\r\n                      onChange={e => setQuote({...quote, clientEmail: e.target.value})}\r\n                      className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                      placeholder=\"client@example.com\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-brand-brown mb-1\">VAT Number</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={quote.clientVAT}\r\n                    onChange={e => setQuote({...quote, clientVAT: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none\"\r\n                    placeholder=\"4240193872\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Column - Items */}\r\n          <div className=\"space-y-6\">\r\n            {/* Items */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-cream-border hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"text-lg font-bold text-brand-brown flex items-center gap-2\">\r\n                  <span className=\"text-brand-orange\">{quote.documentType === 'Invoice' ? 'ðŸ“„' : 'ðŸ’¼'}</span>\r\n                  {quote.documentType === 'Invoice' ? 'Invoice' : 'Quotation'} Items\r\n                </h3>\r\n                <Button variant=\"primary\" size=\"sm\" onClick={addItem}>Add Item</Button>\r\n              </div>\r\n\r\n              <div className=\"space-y-4 max-h-96 overflow-y-auto custom-scrollbar pr-2\">\r\n                {quote.items.map((item, index) => (\r\n                  <div key={index} className=\"border-2 border-cream-border rounded-xl p-4 bg-white hover:border-brand-orange/50 transition-all group\">\r\n                    <div className=\"flex justify-between items-start mb-3\">\r\n                      <span className=\"text-sm font-semibold text-brand-brown bg-cream-sand px-3 py-1 rounded-full\">\r\n                        #{index + 1}\r\n                      </span>\r\n                      <button\r\n                        onClick={() => removeItem(index)}\r\n                        className=\"text-red-600 hover:text-red-700 rounded-full w-6 h-6 flex items-center justify-center transition-colors\"\r\n                        title=\"Remove item\"\r\n                      >\r\n                        âœ•\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"space-y-3\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={item.title}\r\n                        onChange={e => updateItem(index, 'title', e.target.value)}\r\n                        className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none text-sm font-medium focus:ring-2 focus:ring-brand-orange/20\"\r\n                        placeholder=\"Item name (e.g., Flight: FlySafair)\"\r\n                      />\r\n                      <textarea\r\n                        value={item.description}\r\n                        onChange={e => updateItem(index, 'description', e.target.value)}\r\n                        className=\"w-full px-3 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none text-sm focus:ring-2 focus:ring-brand-orange/20\"\r\n                        rows=\"2\"\r\n                        placeholder=\"Description...\"\r\n                      />\r\n                      <div className=\"grid grid-cols-3 gap-3\">\r\n                        <div>\r\n                          <label className=\"block text-xs font-semibold text-brand-russty mb-1\">Qty</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={item.quantity}\r\n                            onChange={e => updateItem(index, 'quantity', parseInt(e.target.value) || 0)}\r\n                            className=\"w-full px-2 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none text-sm focus:ring-2 focus:ring-brand-orange/20\"\r\n                            min=\"1\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-xs font-semibold text-brand-russty mb-1\">Unit Price</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={item.unitPrice}\r\n                            onChange={e => updateItem(index, 'unitPrice', parseFloat(e.target.value) || 0)}\r\n                            className=\"w-full px-2 py-2 border border-cream-border rounded-lg focus:border-brand-orange focus:outline-none text-sm focus:ring-2 focus:ring-brand-orange/20\"\r\n                            step=\"0.01\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-xs font-semibold text-brand-russty mb-1\">Total</label>\r\n                          <div className=\"px-2 py-2 bg-cream-sand rounded-lg text-sm font-bold text-brand-brown border border-cream-border\">\r\n                            {quote.currency}{(item.quantity * item.unitPrice).toFixed(2)}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n                {quote.items.length === 0 && (\r\n                  <div className=\"text-center py-12 px-4\">\r\n                    <div className=\"mb-4 flex justify-center\">\r\n                      <svg className=\"w-16 h-16 text-brand-orange opacity-20\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\r\n                      </svg>\r\n                    </div>\r\n                    <p className=\"text-brand-brown font-semibold mb-2\">No items added yet</p>\r\n                    <p className=\"text-sm text-brand-russty mb-4\">Use AI generation above or click &quot;Add Item&quot; to get started</p>\r\n                    <div className=\"flex justify-center gap-2\">\r\n                      <Button variant=\"primary\" size=\"sm\" onClick={addItem}>Add First Item</Button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Totals */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-6 border border-cream-border\">\r\n              <h3 className=\"text-lg font-bold text-brand-brown mb-4 flex items-center gap-2\">\r\n                Totals\r\n              </h3>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-brand-brown\">Subtotal:</span>\r\n                  <span className=\"font-semibold\">{quote.currency}{totals.subtotal.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-brand-brown\">VAT ({quote.taxRate}%):</span>\r\n                  <span className=\"font-semibold\">{quote.currency}{totals.vat.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"pt-2 border-t border-cream-border flex justify-between\">\r\n                  <span className=\"text-brand-brown font-bold text-lg\">Total:</span>\r\n                  <span className=\"font-bold text-lg text-brand-orange\">{quote.currency}{totals.total.toFixed(2)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex flex-col sm:flex-row gap-3\">\r\n              <div className=\"flex-1\">\r\n                <Button fullWidth variant=\"secondary\" size=\"lg\" onClick={saveQuote}>\r\n                  Save Quote\r\n                </Button>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <Button fullWidth variant=\"primary\" size=\"lg\" onClick={generatePDF}>\r\n                  Generate PDF\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useRef","useEffect","useCallback","newQuote","jsxs","jsx","Fragment"],"mappings":"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"}