{"version":3,"file":"Settings-BxFyJ7jf.js","sources":["../../src/components/ui/ApiStatusCard.jsx","../../src/utils/providerTogglesApi.js","../../src/pages/Settings.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nexport default function ApiStatusCard(){\r\n  const [health, setHealth] = useState(null);\r\n  const [providers, setProviders] = useState(null);\r\n  const [events, setEvents] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [latency, setLatency] = useState({ health: 0, providers: 0, events: 0 });\r\n  const [lastError, setLastError] = useState(null);\r\n\r\n  async function refresh(){\r\n    setLoading(true); setError('');\r\n    try {\r\n      const t0 = performance.now();\r\n      const h = await fetch('/health').then(r=>r.ok?r.json():Promise.reject(new Error('health failed')));\r\n      setLatency(l => ({ ...l, health: Math.round(performance.now() - t0) }));\r\n      setHealth(h);\r\n    } catch(e){ setHealth(null); setError(e.message||'health failed'); setLastError({ at: Date.now(), message: e.message }); }\r\n    try {\r\n      const t0 = performance.now();\r\n      const p = await fetch('/api/providers').then(r=>r.ok?r.json():Promise.reject(new Error('providers failed')));\r\n      setLatency(l => ({ ...l, providers: Math.round(performance.now() - t0) }));\r\n      setProviders(p);\r\n    } catch(e){ setProviders(null); setError(prev=> prev || e.message || 'providers failed'); setLastError(prev => prev || { at: Date.now(), message: e.message }); }\r\n    try {\r\n      const t0 = performance.now();\r\n      const ev = await fetch('/api/events/search?country=ZA&demo=1').then(r=>r.ok?r.json():Promise.reject(new Error('events failed')));\r\n      setLatency(l => ({ ...l, events: Math.round(performance.now() - t0) }));\r\n      setEvents(ev);\r\n    } catch(e){ setEvents(null); setError(prev=> prev || e.message || 'events failed'); setLastError(prev => prev || { at: Date.now(), message: e.message }); }\r\n    setLoading(false);\r\n  }\r\n\r\n  useEffect(()=>{ refresh(); }, []);\r\n\r\n  const ok = (val)=> !!val;\r\n  const providerList = Array.isArray(providers?.providers) ? providers.providers : (Array.isArray(providers)? providers : []);\r\n  const eventsCount = Array.isArray(events?.events) ? events.events.length : 0;\r\n\r\n  return (\r\n    <div className=\"p-4 border border-cream-border bg-white rounded mb-4\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <h3 className=\"font-semibold text-brand-brown\">API Status</h3>\r\n        <button onClick={refresh} disabled={loading} className=\"text-xs px-2 py-1 border border-cream-border rounded bg-cream hover:bg-cream-hover disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed\">{loading? 'Refreshing…' : 'Refresh'}</button>\r\n      </div>\r\n      {error && <div className=\"text-xs text-red-600 mb-2\">{error}</div>}\r\n      <ul className=\"text-sm text-brand-brown/80 space-y-1\">\r\n        <li>\r\n          <span className=\"font-medium\">Health:</span> {ok(health) ? <span className=\"text-green-700\">OK</span> : <span className=\"text-red-600\">Unavailable</span>}\r\n          {health?.service ? <span className=\"ml-2 text-brand-brown/60\">{health.service}</span> : null}\r\n          {latency.health ? <span className=\"ml-2 text-brand-brown/50\">{latency.health} ms</span> : null}\r\n        </li>\r\n        <li>\r\n          <span className=\"font-medium\">Providers API:</span> {ok(providers) ? <span className=\"text-green-700\">OK</span> : <span className=\"text-red-600\">Unavailable</span>}\r\n          {providerList?.length>=0 ? <span className=\"ml-2 text-brand-brown/60\">{providerList.length} configured</span> : null}\r\n          {latency.providers ? <span className=\"ml-2 text-brand-brown/50\">{latency.providers} ms</span> : null}\r\n        </li>\r\n        <li>\r\n          <span className=\"font-medium\">Events (demo):</span> {ok(events) ? <span className=\"text-green-700\">OK</span> : <span className=\"text-red-600\">Unavailable</span>}\r\n          {ok(events) ? <span className=\"ml-2 text-brand-brown/60\">{eventsCount} found</span> : null}\r\n          {latency.events ? <span className=\"ml-2 text-brand-brown/50\">{latency.events} ms</span> : null}\r\n        </li>\r\n      </ul>\r\n      {lastError && (\r\n        <div className=\"text-[11px] text-brand-brown/60 mt-2\">Last error at {new Date(lastError.at).toLocaleTimeString()}: {lastError.message}</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// Client for provider toggles (events aggregator enable/disable)\r\n// Uses relative /api endpoints via Vite dev proxy\r\n\r\nfunction authHeaders() {\r\n  const token = import.meta.env.VITE_API_TOKEN || '';\r\n  return token ? { Authorization: `Bearer ${token}` } : {};\r\n}\r\n\r\nexport async function getProviderToggles() {\r\n  const res = await fetch(`/api/providers`, { headers: authHeaders() });\r\n  if (!res.ok) throw new Error(`Failed to fetch provider toggles (${res.status})`);\r\n  const j = await res.json();\r\n  // Backend has two shapes in codebase: { ok, providers } or raw array; normalize\r\n  const list = Array.isArray(j) ? j : (Array.isArray(j.providers) ? j.providers : []);\r\n  return list.map(p => ({ name: String(p.name||'').toLowerCase(), enabled: !!p.enabled }));\r\n}\r\n\r\nexport async function updateProviderToggles(list){\r\n  const payload = list.map(p => ({ name: String(p.name||'').toLowerCase(), enabled: !!p.enabled }));\r\n  const res = await fetch(`/api/providers`, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json', ...authHeaders() },\r\n    body: JSON.stringify(payload),\r\n  });\r\n  if (!res.ok) throw new Error(`Failed to update provider toggles (${res.status})`);\r\n  const j = await res.json();\r\n  const listOut = Array.isArray(j) ? j : (Array.isArray(j.providers) ? j.providers : []);\r\n  return listOut.map(p => ({ name: String(p.name||'').toLowerCase(), enabled: !!p.enabled }));\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport ApiStatusCard from '../components/ui/ApiStatusCard.jsx';\r\nimport { getProviderToggles, updateProviderToggles } from '../utils/providerTogglesApi.js';\r\nimport { loadCustomAliases, saveCustomAliases } from '../utils/searchIntent.js';\r\n\r\nexport default function Settings() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [toggles, setToggles] = useState([\r\n    { name: 'ticketmaster', enabled: true },\r\n    { name: 'seatgeek', enabled: true },\r\n  ]);\r\n  const [demoEvents, setDemoEvents] = useState(() => (localStorage.getItem('demoEvents') === '1'));\r\n  const [smartAliases, setSmartAliases] = useState(() => (localStorage.getItem('smartAliases') !== '0'));\r\n  const [customAliases, setCustomAliases] = useState(() => loadCustomAliases());\r\n  const [newAlias, setNewAlias] = useState({ key: '', kind: 'city', value: '' });\r\n  const [showWeather, setShowWeather] = useState(() => (localStorage.getItem('showWeather') !== '0'));\r\n\r\n  async function refresh() {\r\n    setError(''); setSuccess(''); setLoading(true);\r\n    try {\r\n      const list = await getProviderToggles();\r\n      if (Array.isArray(list) && list.length) setToggles(list);\r\n    } catch (e) {\r\n      setError(e.message || 'Failed to load provider toggles');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n  useEffect(() => { refresh(); }, []);\r\n\r\n  async function save() {\r\n    setSaving(true); setError(''); setSuccess('');\r\n    try {\r\n      const updated = await updateProviderToggles(toggles);\r\n      setToggles(updated);\r\n      setSuccess('Provider settings saved');\r\n    } catch (e) {\r\n      setError(e.message || 'Failed to save settings');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  function toggleProvider(name) {\r\n    setToggles(prev => prev.map(p => p.name === name ? { ...p, enabled: !p.enabled } : p));\r\n  }\r\n\r\n  function onDemoToggle() {\r\n    const next = !demoEvents;\r\n    setDemoEvents(next);\r\n    localStorage.setItem('demoEvents', next ? '1' : '0');\r\n  }\r\n\r\n  function onSmartAliasesToggle(){\r\n    const next = !smartAliases;\r\n    setSmartAliases(next);\r\n    localStorage.setItem('smartAliases', next ? '1' : '0');\r\n  }\r\n\r\n  function onShowWeatherToggle(){\r\n    const next = !showWeather;\r\n    setShowWeather(next);\r\n    localStorage.setItem('showWeather', next ? '1' : '0');\r\n    // Signal other tabs/components if open\r\n    try { window.dispatchEvent(new StorageEvent('storage', { key: 'showWeather', newValue: next ? '1' : '0' })); } catch {}\r\n  }\r\n\r\n  function addCustomAlias(){\r\n    const key = (newAlias.key||'').trim().toLowerCase();\r\n    const value = (newAlias.value||'').trim();\r\n    const kind = newAlias.kind;\r\n    if(!key || !value){ setError('Alias key and value are required'); return; }\r\n    // Replace existing if same key\r\n    const next = customAliases.filter(a => (a && a.key) !== key);\r\n    const record = { key };\r\n    if(kind === 'area') record.area = value;\r\n    else if(kind === 'city') record.city = value;\r\n    else if(kind === 'province') record.province = value;\r\n    else if(kind === 'country') record.country = value;\r\n    else if(kind === 'continent') record.continent = value;\r\n    next.push(record);\r\n    setCustomAliases(next);\r\n    saveCustomAliases(next);\r\n    setNewAlias({ key: '', kind: kind, value: '' });\r\n    setSuccess('Custom alias added'); setTimeout(()=>setSuccess(''), 1200);\r\n  }\r\n\r\n  function removeCustomAlias(key){\r\n    const next = customAliases.filter(a => a.key !== key);\r\n    setCustomAliases(next);\r\n    saveCustomAliases(next);\r\n  }\r\n\r\n  return (\r\n    <div className=\"overflow-x-hidden min-h-screen flex items-start justify-center px-4 py-6\">\r\n      <div className=\"w-full max-w-3xl\">\r\n      <h2 className=\"text-2xl font-bold mb-3 text-brand-orange\">Settings</h2>\r\n      <ApiStatusCard />\r\n      <div className=\"bg-cream-sand p-4 border border-cream-border space-y-4\">\r\n        <section>\r\n          <h3 className=\"font-semibold text-brand-brown mb-2\">Events Providers</h3>\r\n          <p className=\"text-sm text-brand-brown/80 mb-3\">Enable or disable trusted sources for events aggregation.</p>\r\n          {loading ? (\r\n            <div className=\"text-sm text-brand-brown\">Loading…</div>\r\n          ) : (\r\n            <ul className=\"divide-y divide-cream-border\">\r\n              {toggles.map(p => (\r\n                <li key={p.name} className=\"py-2 flex items-center justify-between\">\r\n                  <span className=\"capitalize text-brand-brown\">{p.name}</span>\r\n                  <label className=\"inline-flex items-center gap-2 text-sm\">\r\n                    <input type=\"checkbox\" checked={p.enabled} onChange={() => toggleProvider(p.name)} />\r\n                    <span>{p.enabled ? 'Enabled' : 'Disabled'}</span>\r\n                  </label>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n          <div className=\"mt-3 flex gap-2\">\r\n            <button onClick={refresh} className=\"px-3 py-1.5 bg-white border border-cream-border text-brand-brown hover:bg-cream-sand/70\">Refresh</button>\r\n            <button onClick={save} disabled={saving} className=\"px-3 py-1.5 bg-brand-orange text-white disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed\">{saving ? 'Saving…' : 'Save'}</button>\r\n          </div>\r\n          {error && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\r\n          {success && <p className=\"mt-2 text-sm text-green-700\">{success}</p>}\r\n        </section>\r\n\r\n        <section className=\"pt-4 border-t border-cream-border\">\r\n          <h3 className=\"font-semibold text-brand-brown mb-2\">Demo Data</h3>\r\n          <label className=\"inline-flex items-center gap-2 text-sm\">\r\n            <input type=\"checkbox\" checked={demoEvents} onChange={onDemoToggle} />\r\n            <span>Show demo events (force demo results in Events UI)</span>\r\n          </label>\r\n            <p className=\"text-xs text-brand-brown/70 mt-1\">This sets a local flag only. The server also auto-falls back to demo when no provider keys are configured.</p>\r\n        </section>\r\n\r\n        <section className=\"pt-4 border-t border-cream-border\">\r\n          <h3 className=\"font-semibold text-brand-brown mb-2\">Weather</h3>\r\n          <label className=\"inline-flex items-center gap-2 text-sm\">\r\n            <input type=\"checkbox\" checked={showWeather} onChange={onShowWeatherToggle} />\r\n            <span>Show live weather in Planner</span>\r\n          </label>\r\n        </section>\r\n\r\n        <section className=\"pt-4 border-t border-cream-border\">\r\n          <h3 className=\"font-semibold text-brand-brown mb-2\">Smart Search</h3>\r\n          <label className=\"inline-flex items-center gap-2 text-sm\">\r\n            <input type=\"checkbox\" checked={smartAliases} onChange={onSmartAliasesToggle} />\r\n            <span>Use location aliases (CPT, JHB, KZN…)</span>\r\n          </label>\r\n          <p className=\"text-xs text-brand-brown/70 mt-1\">When enabled, common shorthand codes and nicknames are recognized in search (e.g., CPT &rarr; Cape Town, JHB &rarr; Johannesburg, KZN &rarr; KwaZulu-Natal).</p>\r\n        </section>\r\n\r\n        <section className=\"pt-4 border-t border-cream-border\">\r\n          <h3 className=\"font-semibold text-brand-brown mb-2\">Custom Location Aliases</h3>\r\n          <p className=\"text-sm text-brand-brown/80 mb-3\">Add your own shortcuts (e.g., &quot;PSB&quot; → Port Shepstone). These merge with built-ins and only apply on this device.</p>\r\n          <div className=\"flex flex-col sm:flex-row gap-2 items-start sm:items-end\">\r\n            <div className=\"flex-1\">\r\n              <label className=\"block text-xs text-brand-brown/70 mb-1\">Alias key</label>\r\n              <input className=\"w-full border border-cream-border px-2 py-1.5 bg-white\" placeholder=\"e.g., psb\" value={newAlias.key} onChange={e=>setNewAlias(v=>({...v, key:e.target.value}))} />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-xs text-brand-brown/70 mb-1\">Type</label>\r\n              <select className=\"border border-cream-border px-2 py-1.5 bg-white\" value={newAlias.kind} onChange={e=>setNewAlias(v=>({...v, kind:e.target.value}))}>\r\n                <option value=\"area\">Area</option>\r\n                <option value=\"city\">City</option>\r\n                <option value=\"province\">Province</option>\r\n                <option value=\"country\">Country</option>\r\n                <option value=\"continent\">Continent</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <label className=\"block text-xs text-brand-brown/70 mb-1\">Maps to</label>\r\n              <input className=\"w-full border border-cream-border px-2 py-1.5 bg-white\" placeholder=\"e.g., Port Shepstone\" value={newAlias.value} onChange={e=>setNewAlias(v=>({...v, value:e.target.value}))} />\r\n            </div>\r\n            <div>\r\n              <button onClick={addCustomAlias} className=\"px-3 py-1.5 bg-brand-orange text-white\">Add</button>\r\n            </div>\r\n          </div>\r\n          {customAliases && customAliases.length ? (\r\n            <ul className=\"mt-3 divide-y divide-cream-border\">\r\n              {customAliases.map(a => (\r\n                <li key={a.key} className=\"py-2 flex items-center justify-between text-sm\">\r\n                  <span className=\"text-brand-brown\">\r\n                    <span className=\"font-mono bg-white border border-cream-border px-1 py-0.5 mr-2\">{a.key}</span>\r\n                    {a.area ? `Area: ${a.area}` : a.city ? `City: ${a.city}` : a.province ? `Province: ${a.province}` : a.country ? `Country: ${a.country}` : a.continent ? `Continent: ${a.continent}` : ''}\r\n                  </span>\r\n                  <button onClick={()=>removeCustomAlias(a.key)} className=\"px-2 py-1 border border-cream-border bg-white text-brand-brown\">Remove</button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <p className=\"text-xs text-brand-brown/70 mt-2\">No custom aliases yet.</p>\r\n          )}\r\n        </section>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":"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"}