import{r as a,j as e}from"./index-E_l07fEO.js";import{A as N}from"./AutoSyncBanner-HMD482kt.js";import{C as w}from"./ComplianceStatusCard-Ao6xoUVY.js";import"./createLucideIcon-DpTQJcjX.js";function A(s){return s?Number(s)<Date.now():!1}function E(s,p=30){if(!s)return!1;const c=Date.now(),m=Number(s)-c;return m>0&&m<=p*24*60*60*1e3}function P(){const[s,p]=a.useState([]),[c,m]=a.useState(!1),[x,S]=a.useState(""),[u,b]=a.useState(!1),v=["license","insurance","permit"];a.useEffect(()=>{},[]);function h(r){let n=0,o=0,d=0;for(const l of r){const f=Array.isArray(l.documents)?l.documents:[],y=new Set(f.map(i=>i.docType));for(const i of v)y.has(i)||(d+=1);for(const i of f)A(i.expiresAt)||(E(i.expiresAt)?o+=1:n+=1)}return{valid:n,expiring:o,missing:d}}const j=u?(s||[]).filter(r=>r.verified):s||[],t=h(j);async function g(r){r.preventDefault();const n=r.currentTarget,o=n.providerId.value,d=n.docType.value,l=n.file.files?.[0];if(n.expiresAt.value&&new Date(n.expiresAt.value).getTime(),!(!o||!d||!l)){alert("Upload stub — enable API to persist");return}}return e.jsxs("div",{className:"text-brand-brown",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"🛡️ Compliance Center"}),e.jsx("div",{className:"mb-3",children:e.jsx(N,{message:"Documents are validated automatically; expiry reminders are sent before deadlines."})}),e.jsx("div",{className:"mb-4",children:e.jsx(w,{valid:t.valid,expiring:t.expiring,missing:t.missing})}),e.jsxs("div",{className:"bg-cream-sand p-4 border border-cream-border rounded",children:[e.jsx("p",{className:"mb-2",children:"Upload and manage licenses, permits, and insurance documents."}),e.jsx("p",{className:"text-brand-brown/70 text-sm",children:"Automation-ready placeholder — upload tools and live validation results will appear here."}),e.jsxs("form",{className:"mt-3 flex flex-col sm:flex-row gap-2",onSubmit:g,children:[e.jsx("input",{name:"providerId",className:"border rounded px-2 py-1 flex-1",placeholder:"Provider ID (e.g., hotel-123)",required:!0}),e.jsxs("select",{name:"docType",className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"license",children:"Business license"}),e.jsx("option",{value:"insurance",children:"Insurance certificate"}),e.jsx("option",{value:"permit",children:"Operating permit"})]}),e.jsx("input",{name:"file",type:"file",className:"border rounded px-2 py-1"}),e.jsx("input",{name:"expiresAt",type:"date",className:"border rounded px-2 py-1","aria-label":"Expiry date"}),e.jsx("button",{className:"px-3 py-1.5 bg-brand-orange text-white rounded",children:"Upload"})]}),x?e.jsx("div",{className:"text-sm text-red-600 mt-2",children:x}):null,c?e.jsx("div",{className:"text-sm text-brand-brown/70 mt-2",children:"Loading…"}):null,e.jsxs("div",{className:"mt-4",children:[t.expiring>0?e.jsxs("div",{className:"mb-2 text-sm flex items-center gap-2 bg-amber-50 border border-amber-200 text-amber-800 px-2 py-1 rounded",children:[e.jsx("span",{className:"font-medium",children:"Heads up:"}),e.jsxs("span",{children:[t.expiring," document",t.expiring>1?"s":""," expiring soon."]})]}):null,e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"font-semibold",children:"Providers"}),e.jsxs("label",{className:"text-sm flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"accent-brand-orange",checked:u,onChange:r=>b(r.target.checked)}),e.jsx("span",{children:"Verified only"})]})]}),e.jsx("div",{className:"text-sm text-brand-brown/70",children:"Enable API to view persisted providers/documents."})]})]})]})}export{P as default};
