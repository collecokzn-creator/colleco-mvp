import{j as t,r as i}from"./index-E_l07fEO.js";import{c as m}from"./payments-Crek84YA.js";function j({items:a=[],currency:e="USD",fees:s}){a.reduce((o,n)=>o+Math.max(0,Number(n.amount||0)),0);const r=s||b(a);return t.jsxs("div",{className:"border border-cream-border rounded p-3 bg-cream text-brand-brown text-sm",children:[t.jsx("div",{className:"font-semibold mb-2",children:"Price breakdown"}),t.jsx(c,{label:"Subtotal",value:r.subtotal,currency:e}),t.jsx(c,{label:"Payment processing",value:r.paymentProcessor,currency:e}),t.jsx(c,{label:"Platform fee",value:r.platformFee,currency:e}),t.jsx(c,{label:"Taxes",value:r.taxes,currency:e}),t.jsx("div",{className:"border-t border-cream-border mt-2 pt-2 font-semibold",children:t.jsx(c,{label:"Total",value:r.total,currency:e})})]})}function c({label:a,value:e,currency:s}){return t.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[t.jsx("span",{children:a}),t.jsx("span",{children:x(e,s)})]})}function x(a,e){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(a)}catch{return`${e} ${a.toFixed(2)}`}}function b(a=[]){const e=a.reduce((d,l)=>d+Math.max(0,Number(l.amount||0)),0),s=Math.round(e*.029*100)/100+.3,r=Math.round(e*.05*100)/100,o=Math.round(e*.15*100)/100,n=Math.round((e+s+r+o)*100)/100;return{subtotal:e,paymentProcessor:s,platformFee:r,taxes:o,total:n}}function y({items:a=[],currency:e="USD"}){const[s,r]=i.useState(!1),[o,n]=i.useState("");async function d(){n(""),r(!0);try{{const{checkoutUrl:u}=m({items:a,currency:e,metadata:{source:"itinerary"}});window.location.assign(u)}}catch(l){n(l.message||"Payment failed")}finally{r(!1)}}return t.jsxs("div",{children:[t.jsx("button",{onClick:d,disabled:s,className:"px-4 py-2 bg-brand-orange text-white rounded hover:opacity-95 disabled:opacity-60",children:s?"Processingâ€¦":"Pay securely"}),o?t.jsx("div",{className:"text-sm text-red-600 mt-1",children:o}):null]})}export{j as F,y as P};
