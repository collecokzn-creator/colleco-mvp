import{r}from"./index-E_l07fEO.js";import{u as y}from"./useLocalStorageState-B5CzfI59.js";function C(){const[o,s]=y("basket:v1",[]),d=r.useCallback(t=>{s(e=>t?.id?e.find(a=>a.id===t.id)?e.map(a=>a.id===t.id?{...a,quantity:(a.quantity||1)+1}:a):[...e,{...t,quantity:t.quantity||1,price:Number(t.price||0),day:t.day||1}]:e)},[s]),i=r.useCallback(t=>{s(e=>e.filter(n=>n.id!==t))},[s]),l=r.useCallback((t,e)=>{s(n=>n.map(a=>a.id===t?{...a,quantity:Math.max(1,e)}:a))},[s]),p=r.useCallback((t,e)=>{s(n=>n.map(a=>a.id===t?{...a,...e}:a))},[s]),k=r.useCallback((t,e)=>{s(n=>n.map(a=>a.id===t?{...a,day:Math.max(1,Number(e)||1)}:a))},[s]),m=r.useCallback(t=>{s(e=>{const n=new Map(e.map(u=>[u.id,u])),a=new Set,c=[];return t.forEach(u=>{n.has(u)&&(c.push(n.get(u)),a.add(u))}),e.forEach(u=>{a.has(u.id)||c.push(u)}),c})},[s]),b=r.useCallback(()=>s([]),[s]),f=o.filter(t=>Number(t.price)>0);return{basket:o,addToBasket:d,removeFromBasket:i,updateQuantity:l,updateItem:p,updateDay:k,reorderWithin:m,clearBasket:b,paidItems:f}}export{C as u};
